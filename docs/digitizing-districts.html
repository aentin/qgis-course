<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Упражнение 7 Пространственные и атрибутивные запросы | Основы геоинформатики: практикум в QGIS</title>
  <meta name="description" content="Упражнение 7 Пространственные и атрибутивные запросы | Основы геоинформатики: практикум в QGIS" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Упражнение 7 Пространственные и атрибутивные запросы | Основы геоинформатики: практикум в QGIS" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Упражнение 7 Пространственные и атрибутивные запросы | Основы геоинформатики: практикум в QGIS" />
  <meta name="github-repo" content="aentin/qgis-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Упражнение 7 Пространственные и атрибутивные запросы | Основы геоинформатики: практикум в QGIS" />
  
  <meta name="twitter:description" content="Упражнение 7 Пространственные и атрибутивные запросы | Основы геоинформатики: практикум в QGIS" />
  

<meta name="author" content="Андрей Энтин, Тимофей Самсонов, Андрей Карпачевский" />


<meta name="date" content="2023-09-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="digitizing-topomap.html"/>
<link rel="next" href="geometry.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Основы геоинформатики</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Общие сведения</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#учебные-материалы"><i class="fa fa-check"></i>Учебные материалы</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#программное-обеспечение-для-работы"><i class="fa fa-check"></i>Программное обеспечение для работы</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#macos"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#linux"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Основы работы с QGIS</b></span></li>
<li class="chapter" data-level="1" data-path="map-design-general.html"><a href="map-design-general.html"><i class="fa fa-check"></i><b>1</b> Создание общегеографической карты</a>
<ul>
<li class="chapter" data-level="1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-intro"><i class="fa fa-check"></i><b>1.1</b> Введение</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-checklist"><i class="fa fa-check"></i><b>1.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-begin"><i class="fa fa-check"></i><b>1.2</b> Начало работы</a></li>
<li class="chapter" data-level="1.3" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-projection"><i class="fa fa-check"></i><b>1.3</b> Настройка системы координат</a></li>
<li class="chapter" data-level="1.4" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-navigation"><i class="fa fa-check"></i><b>1.4</b> Навигация по карте</a></li>
<li class="chapter" data-level="1.5" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-relief"><i class="fa fa-check"></i><b>1.5</b> Оформление изображения рельефа</a></li>
<li class="chapter" data-level="1.6" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-vector"><i class="fa fa-check"></i><b>1.6</b> Добавление векторных наборов данных</a></li>
<li class="chapter" data-level="1.7" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-attributes"><i class="fa fa-check"></i><b>1.7</b> Использование атрибутов объектов при визуализации</a></li>
<li class="chapter" data-level="1.8" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-labels"><i class="fa fa-check"></i><b>1.8</b> Подписи</a></li>
<li class="chapter" data-level="1.9" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-layout"><i class="fa fa-check"></i><b>1.9</b> Настройка компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="map-design-world.html"><a href="map-design-world.html"><i class="fa fa-check"></i><b>2</b> Создание политической карты мира</a>
<ul>
<li class="chapter" data-level="2.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-intro"><i class="fa fa-check"></i><b>2.1</b> Введение</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-checklist"><i class="fa fa-check"></i><b>2.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-begin"><i class="fa fa-check"></i><b>2.2</b> Начало работы</a></li>
<li class="chapter" data-level="2.3" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-input-data"><i class="fa fa-check"></i><b>2.3</b> Загрузка исходных данных</a></li>
<li class="chapter" data-level="2.4" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-qgis-project"><i class="fa fa-check"></i><b>2.4</b> Создание ГИС-проекта и загрузка данных в проект</a></li>
<li class="chapter" data-level="2.5" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-crs"><i class="fa fa-check"></i><b>2.5</b> Настройка системы координат проекта</a></li>
<li class="chapter" data-level="2.6" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-colorbrewer"><i class="fa fa-check"></i><b>2.6</b> Окраска стран в разные цвета</a></li>
<li class="chapter" data-level="2.7" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-other-layers"><i class="fa fa-check"></i><b>2.7</b> Добавление других слоёв на карту</a></li>
<li class="chapter" data-level="2.8" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-layout"><i class="fa fa-check"></i><b>2.8</b> Создание компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html"><i class="fa fa-check"></i><b>3</b> Создание карты четвертичных отложений</a>
<ul>
<li class="chapter" data-level="3.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-intro"><i class="fa fa-check"></i><b>3.1</b> Введение</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-checklist"><i class="fa fa-check"></i><b>3.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-begin"><i class="fa fa-check"></i><b>3.2</b> Начало работы</a></li>
<li class="chapter" data-level="3.3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-data"><i class="fa fa-check"></i><b>3.3</b> Добавление данных в проект</a></li>
<li class="chapter" data-level="3.4" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-classification"><i class="fa fa-check"></i><b>3.4</b> Применение готового стиля к слою</a></li>
<li class="chapter" data-level="3.5" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-csv"><i class="fa fa-check"></i><b>3.5</b> Создание набора пространственных данных из таблицы с координатами</a></li>
<li class="chapter" data-level="3.6" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-final"><i class="fa fa-check"></i><b>3.6</b> Оформление карты</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="map-design-population.html"><a href="map-design-population.html"><i class="fa fa-check"></i><b>4</b> Создание социально-экономической карты</a>
<ul>
<li class="chapter" data-level="4.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-intro"><i class="fa fa-check"></i><b>4.1</b> Введение</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-checklist"><i class="fa fa-check"></i><b>4.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-begin"><i class="fa fa-check"></i><b>4.2</b> Начало работы</a></li>
<li class="chapter" data-level="4.3" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-change-crs"><i class="fa fa-check"></i><b>4.3</b> Изменение системы координат проекта</a></li>
<li class="chapter" data-level="4.4" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-fill-color"><i class="fa fa-check"></i><b>4.4</b> Создание картограмм</a></li>
<li class="chapter" data-level="4.5" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-symbols"><i class="fa fa-check"></i><b>4.5</b> Создание шкалы значков</a></li>
<li class="chapter" data-level="4.6" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-labels"><i class="fa fa-check"></i><b>4.6</b> Добавление подписей значков</a></li>
<li class="chapter" data-level="4.7" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-basemap"><i class="fa fa-check"></i><b>4.7</b> Настройка условных знаков географической основы</a></li>
<li class="chapter" data-level="4.8" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-layout"><i class="fa fa-check"></i><b>4.8</b> Создание макета карты</a></li>
</ul></li>
<li class="part"><span><b>II Редактирование данных в ГИС</b></span></li>
<li class="chapter" data-level="5" data-path="raster-reference.html"><a href="raster-reference.html"><i class="fa fa-check"></i><b>5</b> Привязка графических материалов</a>
<ul>
<li class="chapter" data-level="5.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-intro"><i class="fa fa-check"></i><b>5.1</b> Введение</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-control"><i class="fa fa-check"></i><b>5.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-input"><i class="fa fa-check"></i><b>5.2</b> Привязка растра по меткам координат</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-select-coordinate-system"><i class="fa fa-check"></i><b>5.2.1</b> Определение целевой системы координат</a></li>
<li class="chapter" data-level="5.2.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-topomap"><i class="fa fa-check"></i><b>5.2.2</b> Привязка листа топографической карты</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-basemap"><i class="fa fa-check"></i><b>5.3</b> Добавление базовой карты</a></li>
<li class="chapter" data-level="5.4" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-frommap"><i class="fa fa-check"></i><b>5.4</b> Использование координат с базовой карты</a></li>
<li class="chapter" data-level="5.5" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-accuracy"><i class="fa fa-check"></i><b>5.5</b> Оценка точности привязки</a></li>
<li class="chapter" data-level="5.6" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-linear"><i class="fa fa-check"></i><b>5.6</b> Интерактивная привязка растров на основе аффинного преобразования</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html"><i class="fa fa-check"></i><b>6</b> Ручная векторизация растра</a>
<ul>
<li class="chapter" data-level="6.1" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-intro"><i class="fa fa-check"></i><b>6.1</b> Введение</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-control"><i class="fa fa-check"></i><b>6.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-basedata"><i class="fa fa-check"></i><b>6.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="6.3" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-points"><i class="fa fa-check"></i><b>6.3</b> Создание точечных объектов</a></li>
<li class="chapter" data-level="6.4" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-lines"><i class="fa fa-check"></i><b>6.4</b> Создание линейных объектов</a></li>
<li class="chapter" data-level="6.5" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-polygons"><i class="fa fa-check"></i><b>6.5</b> Создание полигональных объектов</a></li>
<li class="chapter" data-level="6.6" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-layout"><i class="fa fa-check"></i><b>6.6</b> Оформление макета компоновки</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="digitizing-districts.html"><a href="digitizing-districts.html"><i class="fa fa-check"></i><b>7</b> Пространственные и атрибутивные запросы</a>
<ul>
<li class="chapter" data-level="7.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-intro"><i class="fa fa-check"></i><b>7.1</b> Введение</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-control"><i class="fa fa-check"></i><b>7.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-basedata"><i class="fa fa-check"></i><b>7.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="7.3" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-new-geopackage"><i class="fa fa-check"></i><b>7.3</b> Создание набора пространственных данных</a></li>
<li class="chapter" data-level="7.4" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-drawing"><i class="fa fa-check"></i><b>7.4</b> Векторизация районов</a></li>
<li class="chapter" data-level="7.5" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-query"><i class="fa fa-check"></i><b>7.5</b> Пространственные и атрибутивные запросы</a></li>
<li class="chapter" data-level="7.6" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-diagrams"><i class="fa fa-check"></i><b>7.6</b> Визуализация слоя при помощи картодиаграмм</a></li>
<li class="chapter" data-level="7.7" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-layout"><i class="fa fa-check"></i><b>7.7</b> Создание и экспорт макета компоновки</a></li>
</ul></li>
<li class="part"><span><b>III Векторный анализ</b></span></li>
<li class="chapter" data-level="8" data-path="geometry.html"><a href="geometry.html"><i class="fa fa-check"></i><b>8</b> Геометрические операции с векторными объектами</a>
<ul>
<li class="chapter" data-level="8.1" data-path="geometry.html"><a href="geometry.html#geometry-intro"><i class="fa fa-check"></i><b>8.1</b> Введение</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="geometry.html"><a href="geometry.html#geometry-control"><i class="fa fa-check"></i><b>8.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="8.1.2" data-path="geometry.html"><a href="geometry.html#geometry-annotation"><i class="fa fa-check"></i><b>8.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="geometry.html"><a href="geometry.html#geometry-dissolve"><i class="fa fa-check"></i><b>8.2</b> Объединение контуров схемы четвертичных отложений</a></li>
<li class="chapter" data-level="8.3" data-path="geometry.html"><a href="geometry.html#geometry-buffer"><i class="fa fa-check"></i><b>8.3</b> Построение буферных зон</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="geometry.html"><a href="geometry.html#geometry-buffer-constant"><i class="fa fa-check"></i><b>8.3.1</b> Буферные зоны постоянной ширины</a></li>
<li class="chapter" data-level="8.3.2" data-path="geometry.html"><a href="geometry.html#geometry-buffer-variable"><i class="fa fa-check"></i><b>8.3.2</b> Построение буферных зон переменной ширины</a></li>
<li class="chapter" data-level="8.3.3" data-path="geometry.html"><a href="geometry.html#geometry-buffer-other"><i class="fa fa-check"></i><b>8.3.3</b> Буферные зоны других объектов</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="geometry.html"><a href="geometry.html#geometry-selection"><i class="fa fa-check"></i><b>8.4</b> Сохранение выборки в новую таблицу</a></li>
<li class="chapter" data-level="8.5" data-path="geometry.html"><a href="geometry.html#geometry-erase"><i class="fa fa-check"></i><b>8.5</b> Нахождение геометрической разности объектов</a></li>
<li class="chapter" data-level="8.6" data-path="geometry.html"><a href="geometry.html#geometry-zonal-stat"><i class="fa fa-check"></i><b>8.6</b> Расчёт зональной статистики</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="overlay.html"><a href="overlay.html"><i class="fa fa-check"></i><b>9</b> Анализ пространственных взаимосвязей</a>
<ul>
<li class="chapter" data-level="9.1" data-path="overlay.html"><a href="overlay.html#overlay-intro"><i class="fa fa-check"></i><b>9.1</b> Введение</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="overlay.html"><a href="overlay.html#overlay-control"><i class="fa fa-check"></i><b>9.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="9.1.2" data-path="overlay.html"><a href="overlay.html#overlay-annotation"><i class="fa fa-check"></i><b>9.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="overlay.html"><a href="overlay.html#overlay-vectors"><i class="fa fa-check"></i><b>9.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="9.3" data-path="overlay.html"><a href="overlay.html#overlay-intersect"><i class="fa fa-check"></i><b>9.3</b> Оверлей слоев методом пересечения</a></li>
<li class="chapter" data-level="9.4" data-path="overlay.html"><a href="overlay.html#overlay-merge"><i class="fa fa-check"></i><b>9.4</b> Слияние результатов пересечения с целью получения показателя пространственной связи</a></li>
<li class="chapter" data-level="9.5" data-path="overlay.html"><a href="overlay.html#overlay-sumarea-subtypes"><i class="fa fa-check"></i><b>9.5</b> Объединение подтипов почв для подсчёта суммарной площади</a></li>
<li class="chapter" data-level="9.6" data-path="overlay.html"><a href="overlay.html#overlay-fieldcalc"><i class="fa fa-check"></i><b>9.6</b> Расчёт площадей объектов</a></li>
<li class="chapter" data-level="9.7" data-path="overlay.html"><a href="overlay.html#overlay-join"><i class="fa fa-check"></i><b>9.7</b> Соединение таблиц по названию подтипа почв</a></li>
<li class="chapter" data-level="9.8" data-path="overlay.html"><a href="overlay.html#overlay-resulting"><i class="fa fa-check"></i><b>9.8</b> Вычисление результирующих значений показателя связи</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="spatrelations.html"><a href="spatrelations.html"><i class="fa fa-check"></i><b>10</b> Анализ пространственных соотношений</a>
<ul>
<li class="chapter" data-level="10.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-intro"><i class="fa fa-check"></i><b>10.1</b> Введение</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-control"><i class="fa fa-check"></i><b>10.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="10.1.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-annotation"><i class="fa fa-check"></i><b>10.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-vizual"><i class="fa fa-check"></i><b>10.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="10.3" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-overlay"><i class="fa fa-check"></i><b>10.3</b> Расчёт площадей и оверлей</a></li>
<li class="chapter" data-level="10.4" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-join"><i class="fa fa-check"></i><b>10.4</b> Соединение таблиц по ключевому полю</a></li>
<li class="chapter" data-level="10.5" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-other"><i class="fa fa-check"></i><b>10.5</b> Расчёт площадей, не покрытых объектами</a></li>
<li class="chapter" data-level="10.6" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-symbology"><i class="fa fa-check"></i><b>10.6</b> Настройка символики</a></li>
</ul></li>
<li class="part"><span><b>IV Растровый анализ</b></span></li>
<li class="chapter" data-level="11" data-path="weighted-overlay.html"><a href="weighted-overlay.html"><i class="fa fa-check"></i><b>11</b> Оптимизация местоположения</a>
<ul>
<li class="chapter" data-level="11.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-intro"><i class="fa fa-check"></i><b>11.1</b> Введение</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-control"><i class="fa fa-check"></i><b>11.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="11.1.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-annotation"><i class="fa fa-check"></i><b>11.1.2</b> Аннотация</a></li>
<li class="chapter" data-level="11.1.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-warning"><i class="fa fa-check"></i><b>11.1.3</b> Прежде чем начать…</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-init"><i class="fa fa-check"></i><b>11.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="11.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-slopes"><i class="fa fa-check"></i><b>11.3</b> Расчет углов наклона</a></li>
<li class="chapter" data-level="11.4" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-distances"><i class="fa fa-check"></i><b>11.4</b> Расчет расстояний</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-roads"><i class="fa fa-check"></i><b>11.4.1</b> Расстояния до дорог</a></li>
<li class="chapter" data-level="11.4.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-streams"><i class="fa fa-check"></i><b>11.4.2</b> Водотоки</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass"><i class="fa fa-check"></i><b>11.5</b> Переклассификация наборов данных</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-distance"><i class="fa fa-check"></i><b>11.5.1</b> Переклассификация растров расстояний</a></li>
<li class="chapter" data-level="11.5.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-slope"><i class="fa fa-check"></i><b>11.5.2</b> Переклассификация растра крутизны</a></li>
<li class="chapter" data-level="11.5.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#преобразование-слоя-типов-землепользования-в-растровое-представление"><i class="fa fa-check"></i><b>11.5.3</b> Преобразование слоя типов землепользования в растровое представление</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-combination"><i class="fa fa-check"></i><b>11.6</b> Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</a></li>
<li class="chapter" data-level="11.7" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-final-decision"><i class="fa fa-check"></i><b>11.7</b> Окончательный выбор участка</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="hydrodem.html"><a href="hydrodem.html"><i class="fa fa-check"></i><b>12</b> Гидрологическое моделирование на основе ЦМР</a>
<ul>
<li class="chapter" data-level="12.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-intro"><i class="fa fa-check"></i><b>12.1</b> Введение</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-control"><i class="fa fa-check"></i><b>12.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="12.1.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-annotation"><i class="fa fa-check"></i><b>12.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-init"><i class="fa fa-check"></i><b>12.2</b> Получение и подготовка исходных данных</a></li>
<li class="chapter" data-level="12.3" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-preprocessing"><i class="fa fa-check"></i><b>12.3</b> Гидрологическая коррекция ЦМР</a></li>
<li class="chapter" data-level="12.4" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-flowacc"><i class="fa fa-check"></i><b>12.4</b> Расчёт водосборной площади</a></li>
<li class="chapter" data-level="12.5" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-network"><i class="fa fa-check"></i><b>12.5</b> Создание растра водотоков на основе модели водосборной площади</a></li>
<li class="chapter" data-level="12.6" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-basin"><i class="fa fa-check"></i><b>12.6</b> Определение границ бассейна р. Оскол</a></li>
<li class="chapter" data-level="12.7" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-mapping"><i class="fa fa-check"></i><b>12.7</b> Картографическое представление результата</a></li>
</ul></li>
<li class="part"><span><b>V Сетевой анализ</b></span></li>
<li class="chapter" data-level="13" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>13</b> Анализ транспортных сетей</a>
<ul>
<li class="chapter" data-level="13.1" data-path="networks.html"><a href="networks.html#networks-intro"><i class="fa fa-check"></i><b>13.1</b> Введение</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="networks.html"><a href="networks.html#networks-control"><i class="fa fa-check"></i><b>13.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="13.1.2" data-path="networks.html"><a href="networks.html#networks-annotation"><i class="fa fa-check"></i><b>13.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="networks.html"><a href="networks.html#networks-init"><i class="fa fa-check"></i><b>13.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="13.3" data-path="networks.html"><a href="networks.html#networks-query"><i class="fa fa-check"></i><b>13.3</b> Выбор элементов дорожной сети</a></li>
<li class="chapter" data-level="13.4" data-path="networks.html"><a href="networks.html#networks-route"><i class="fa fa-check"></i><b>13.4</b> Построение маршрута</a></li>
<li class="chapter" data-level="13.5" data-path="networks.html"><a href="networks.html#networks-isochrones"><i class="fa fa-check"></i><b>13.5</b> Расчёт изохрон</a></li>
<li class="chapter" data-level="13.6" data-path="networks.html"><a href="networks.html#networks-matrix"><i class="fa fa-check"></i><b>13.6</b> Работа с матрицей «источник-назначение»</a></li>
</ul></li>
<li class="part"><span><b>VI Геокодирование</b></span></li>
<li class="chapter" data-level="14" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>14</b> Адресное геокодирование и ядерная оценка плотности</a>
<ul>
<li class="chapter" data-level="14.1" data-path="geocoding.html"><a href="geocoding.html#geoding-intro"><i class="fa fa-check"></i><b>14.1</b> Введение</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-control"><i class="fa fa-check"></i><b>14.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="14.1.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-annotation"><i class="fa fa-check"></i><b>14.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-input"><i class="fa fa-check"></i><b>14.2</b> Получение исходных данных</a></li>
<li class="chapter" data-level="14.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-debug"><i class="fa fa-check"></i><b>14.3</b> Тестирование работы сервиса геокодирования</a></li>
<li class="chapter" data-level="14.4" data-path="geocoding.html"><a href="geocoding.html#geocoding-import"><i class="fa fa-check"></i><b>14.4</b> Импорт списка адресов в QGIS</a></li>
<li class="chapter" data-level="14.5" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch-install"><i class="fa fa-check"></i><b>14.5</b> Установка модуля пакетного геокодирования</a></li>
<li class="chapter" data-level="14.6" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch"><i class="fa fa-check"></i><b>14.6</b> Пакетное геокодирование</a></li>
<li class="chapter" data-level="14.7" data-path="geocoding.html"><a href="geocoding.html#geocoding-mapping"><i class="fa fa-check"></i><b>14.7</b> Картографирование плотности объявлений</a></li>
</ul></li>
<li class="appendix"><span><b>Справочные сведения</b></span></li>
<li class="chapter" data-level="A" data-path="manual-catalog.html"><a href="manual-catalog.html"><i class="fa fa-check"></i><b>A</b> Форматы пространственных данных</a>
<ul>
<li class="chapter" data-level="A.1" data-path="manual-catalog.html"><a href="manual-catalog.html#manual-dataformats-shapefile"><i class="fa fa-check"></i><b>A.1</b> Шейп-файлы</a></li>
<li class="chapter" data-level="A.2" data-path="manual-catalog.html"><a href="manual-catalog.html#geopackage"><i class="fa fa-check"></i><b>A.2</b> GeoPackage</a></li>
<li class="chapter" data-level="A.3" data-path="manual-catalog.html"><a href="manual-catalog.html#базы-геоданных-esri"><i class="fa fa-check"></i><b>A.3</b> Базы геоданных ESRI</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="manual-crs.html"><a href="manual-crs.html"><i class="fa fa-check"></i><b>B</b> Форматы описания систем координат</a></li>
<li class="chapter" data-level="C" data-path="manual-plugins.html"><a href="manual-plugins.html"><i class="fa fa-check"></i><b>C</b> Установка модулей в QGIS</a>
<ul>
<li class="chapter" data-level="C.1" data-path="manual-plugins.html"><a href="manual-plugins.html#manual-plugins-install"><i class="fa fa-check"></i><b>C.1</b> Установка модулей</a></li>
<li class="chapter" data-level="C.2" data-path="manual-plugins.html"><a href="manual-plugins.html#manual-plugins-update"><i class="fa fa-check"></i><b>C.2</b> Обновление модулей</a></li>
<li class="chapter" data-level="C.3" data-path="manual-plugins.html"><a href="manual-plugins.html#manual-plugins-uninstall"><i class="fa fa-check"></i><b>C.3</b> Удаление модулей</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="mastertest.html"><a href="mastertest.html"><i class="fa fa-check"></i><b>D</b> Инструкция по регистрации в системе Мастер-тест</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Основы геоинформатики: практикум в QGIS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="digitizing-districts" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Упражнение 7</span> Пространственные и атрибутивные запросы<a href="digitizing-districts.html#digitizing-districts" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex07.zip">Архив с исходными данными</a></p>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex07_%D0%BE%D1%82%D1%87%D1%91%D1%82.docx">Контрольный лист</a></p>
<div id="digitizing-intro" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Введение<a href="digitizing-districts.html#digitizing-intro" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Цель задания</strong> — знакомство с редактированием векторных пространственных данных, элементами базовых технологий ГИС (оверлей, пространственный запрос, атрибутивный запрос).</p>
<p><strong>Необходимая теоретическая подготовка:</strong> Системы координат и проекции карт, привязка геоизображений, трансформирование геоизображений. Пространственные запросы, атрибутивные запросы, оверлей.</p>
<p><strong>Необходимая практическая подготовка:</strong> Знание основных компонент интерфейса QGIS (менеджер источников данных, панель слоёв, фрейм карты). Добавление источников пространственных данных в проект. Настройка символики и подписей объектов. Привязка растра. Создание макета, добавление карты и зарамочного оформления, экспорт макета.</p>
<p><strong>Исходные данные:</strong> Схема районов города с сайта <a href="https://neagent.info/">НЕАГЕНТ</a> по состоянию на 2021 г.; набор пространственных данных о зданиях и сооружениях, созданный на основе базы OpenStreetMap</p>
<p><strong>Результат:</strong> Набор пространственных данных с вернакулярными районами г. Новосибирск и статистикой по застройке в пределах округов. Картодиаграммы по количеству домов и степени застроенности. Картографическое изображение.</p>
<div id="digitizing-control" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Контрольный лист<a href="digitizing-districts.html#digitizing-control" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Привязать растровую схему районов города</li>
<li>Создать набор пространственных данных о районах путем цифрования растровой карты</li>
<li>Добавить семантическую информацию о районах</li>
<li>Выполнить серию пространственных и атрибутивных запросов для определения структуры застройки в пределах районов</li>
<li>Построить картодиаграммы по полученным значениям</li>
<li>Подготовить проект карты с компоновкой</li>
</ul>
</div>
</div>
<div id="digitizing-basedata" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Подготовка исходных данных<a href="digitizing-districts.html#digitizing-basedata" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="#digitizingf-districts">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Загрузите архив с исходными данными и распакуйте его в вашу рабочую директорию.</p></li>
<li><p>Создайте новый проект QGIS и загрузите любую картографическую основу с веб-сервиса. Сохраните проект в ту же директорию, где находятся исходные данные.</p></li>
<li><p>Привяжите схему избирательных округов. Если вы не знаете, как привязать схему, сверьтесь с <span id="raster-reference">упражнением 5</span></p></li>
</ol>
<p><kbd><strong>Снимок экрана №1.</strong> Окно QGIS с привязанным растровым изображением</kbd>.</p>
</div>
<div id="digitizing-new-geopackage" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Создание набора пространственных данных<a href="digitizing-districts.html#digitizing-new-geopackage" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="#digitizingf-districts">В начало упражнения ⇡</a></p>
<p>На этом этапе мы создадим новый векторный набор пространственных данных, в котором будут храниться контура районов. QGIS поддерживает множество форматов пространственных данных, выбор конкретного формата в каждом случае определяется задачами, требованиями и ограничениями проекта. В качестве формата по умолчанию в QGIS 3 используется <a href="https://www.geopackage.org/">GeoPackage</a>.</p>
<p>Файл GeoPackage представляет собой базу данных SQLite с дополнительными функциями для хранения наборов пространственных данных. Вся необходимая информация хранится в единственном файле <code>*.gpkg</code>; в процессе работы создаются временные файлы. В одном файле может быть сохранено несколько наборов пространственных данных (иногда их также называют «таблицами», <em>tables</em>, или «слоями», <em>layers</em>)</p>
<ol style="list-style-type: decimal">
<li><p>Запустите процедуру создания нового набора данных GeoPackage. Для этого нажмите кнопку <img src="images/Ex05_Vectorization/new_geopackage.png" /> на панели менеджера источников данных или сочетание клавиш <code>Ctrl+Shift+N</code>.</p></li>
<li><p>В открывшемся окне введите следующие параметры:</p>
<ul>
<li><strong>База данных:</strong> сохраните файл <code>*.gpkg</code> в директорию вашего проекта. Назовите его по шаблону <code>Districts_%Фамилия%.gpkg</code>;</li>
<li><strong>Имя таблицы:</strong> примите значение, предлагаемое по умолчанию после указания пути к базе;</li>
<li><strong>Тип геометрии:</strong> полигон (площадная)</li>
<li>Чекбоксы «Include Z dimension» и «Include M values» оставьте выключенными;</li>
<li><strong>Система координат</strong>: такая же, как система координат проекта.</li>
</ul></li>
<li><p>Помимо геометрии объектов, нам нужно будет хранить семантическую информацию — номера районов. Создайте новое поле целочисленного типа с названием <code>district_id</code>, как показано на рисунке ниже.</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/new_field.gif" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Проверьте правильность заполнения параметров. Если всё заполнено правильно, нажмите ОК. Новый слой будет добавлен в проект.</li>
</ol>
<p><img src="images/Ex05_Vectorization/new_layer.png" /></p>
</div>
<div id="digitizing-drawing" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Векторизация районов<a href="digitizing-districts.html#digitizing-drawing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="#digitizingf-districts">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Измените стиль слоя на <code>pattern dot blue</code>. Эта символика будет удобна для цифрования, поскольку позволит не «скрывать» растровый слой под создаваемыми объектами и в то же время будет контрастно выделяться на их фоне.</p></li>
<li><p>Теперь всё готово к редактированию слоя. Режим редактирования запускается при помощи кнопки <img src="images/Ex05_Vectorization/button_editing.png" /> или из контекстного меню слоя. Запустите режим редактирования.</p></li>
<li><p>Когда режим редактирования запущен, нажмите кнопку <img src="images/Ex05_Vectorization/button_new.png" />, чтобы начать добавление нового объекта</p></li>
<li><p>Увеличьте изображение до района, обозначенного цифрой «1». Вы начнёте векторизацию с него. По нажатию левой кнопки мыши устанавливается положение первого узла создаваемого контура. «Обходите» контур по часовой стрелке или против часовой стрелки, устанавливая новые узлы нажатием левой кнопки мыши, как показано на изображении ниже</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/new_object.gif" /></p>
<ol start="5" style="list-style-type: decimal">
<li><p>Чтобы завершить редактирование объекта, нажмите правую кнопку мыши.</p></li>
<li><p>Когда вы завершаете создание объекта в QGIS, появляется окно ввода значений атрибутов. Введите номер избирательного участка, как показано ниже</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/new_attribute.gif" /></p>
<p>Когда вы создаёте пространственные объекты в ГИС, важно соблюдать топологию объектов. Координаты узлов соседних объектов должны совпадать, между объектами не должно быть пробелов и перекрытий. Чтобы добиться такого соответствия, вам необходимо активировать опцию прилипания (снеппинга).</p>
<ol start="7" style="list-style-type: decimal">
<li>Найдите панель инструментов прилипания</li>
</ol>
<p><img src="images/Ex05_Vectorization/snapping_toolbar.png" /></p>
<ol start="8" style="list-style-type: decimal">
<li><p>Включите режим прилипания, нажав на иконку с изображением магнита</p></li>
<li><p>Нажимая на соседние иконки в панели, включите прилипание к объектам во всех слоях, но только к вершинам объектов</p></li>
<li><p>Установите порог прилипания равным 12 пикселей экрана.</p></li>
</ol>
<p>Теперь, если вы будете подводить курсор к существующим объектам, его положение будет автоматически «притягиваться» к ближайшим узлам</p>
<p><img src="images/Ex05_Vectorization/snapping_in_action.gif" /></p>
<ol start="11" style="list-style-type: decimal">
<li><p>Прилипание позволяет реализовать создание новых объектов путём трассировки по существующим объектам. Включите режим трассировки, нажав на кнопку <img src="images/Ex05_Vectorization/button_tracing.png" /></p></li>
<li><p>Оцифруйте соседний объект с помощью трассировки. Для этого подведите курсор к углу существующего объекта и установите первый узел. Затем переместите курсор вдоль общей границы и установите следующий узел. Промежуточные узлы будут добавлены автоматически. После оцифровки общей границы продолжайте векторизацию обычным способом. После добавления нового объекта не забудьте внести его атрибуты во всплывающем окне.</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/tracing_vectorization.gif" /></p>
<ol start="14" style="list-style-type: decimal">
<li>Используя полученные навыки, оцифруйте все районы города.</li>
</ol>
<p><strong>Важно!</strong> Время от времени сохраняйте ваши правки при помощи кнопки <img src="images/Ex05_Vectorization/save_edits.png" /> на панели редактирования. В QGIS, как и во всех ГИС-пакетах, сохранение правок в данных выполняется отдельно от сохранения проекта.</p>
<blockquote>
<p>Несколько советов по редактированию данных:</p>
</blockquote>
<blockquote>
<p>Чтобы отменить последний установленный узел, нажмите <code>Backspace</code>;</p>
</blockquote>
<blockquote>
<p>Чтобы полностью удалить последнюю оцифрованную фигуру, нажмите <code>Ctrl+Z</code>.</p>
</blockquote>
<blockquote>
<p>Чтобы изменить положение отдельного узла уже созданного объекта, можно воспользоваться инструментом редактирования узлов <img src="images/Ex05_Vectorization/button_editvertices.png" />.</p>
</blockquote>
<blockquote>
<p>Трассировка в QGIS работает только тогда, когда весь путь трассировки отображается на экране. Если часть сегмента вылезла за пределы фрейма, трассировка не сработает.</p>
</blockquote>
<blockquote>
<p>Изучите панель «Дополнительные инструменты оцифровки» — она может вам пригодиться</p>
</blockquote>
<blockquote>
<p>Плавные кривые линии (берега, реки и т.п.) при цифровании обычно аппроксимируются ломаными линиями с относительно большим числом узлов — так, чтобы отличия не были визуально заметны. Хотя многие форматы данных позволяют создавать криволинейные объекты, этот подход не являются общепринятым.</p>
</blockquote>
<ol start="18" style="list-style-type: decimal">
<li>По окончании цифрования объектов отключите растровый слой и отобразите данные в полном охвате. Сделайте снимок экрана.</li>
</ol>
<p><kbd><strong>Снимок экрана №2.</strong> Окно QGIS с оцифрованными границами районов</kbd>.</p>
</div>
<div id="digitizing-query" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Пространственные и атрибутивные запросы<a href="digitizing-districts.html#digitizing-query" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="#digitizingf-districts">В начало упражнения ⇡</a></p>
<p>В этой части работы вы оцените число жилых домов, оцифрованных пользователями ресурса <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, в пределах вычерченных вами районов. Волонтёрская географическая информация, к которой относится и OpenStreetMap, является важным источником данных для географических исследований благодаря своей детальности и относительной оперативности обновления, однако имеет ряд недостатков: неравномерное покрытие территории данными, низкая согласованность, структурированность и надёжность данных.</p>
<p>Для подсчёта числа зданий вы воспользуетесь следующим алгоритмом:</p>
<ul>
<li><p>Выбрать район на карте</p></li>
<li><p>Выбрать здания, попадающие в его пределы (<em>пространственный запрос</em>).</p></li>
<li><p>Из полученной выборки оставить только здания, принадлежащие к определённому типу (<em>атрибутивный запрос</em>).</p></li>
<li><p>Записать число отобранных зданий в соответствующий атрибут текущего района.</p></li>
</ul>
<p>Операции повторяются для каждого района.</p>
<ol style="list-style-type: decimal">
<li><p>Добавьте на карту набор данных о зданиях, который вы загрузили в начале занятия.</p></li>
<li><p>Откройте <strong>таблицу атрибутов</strong> слоя зданий. Для этого нажмите правой кнопкой мыши на слой в панели слоёв и выберите опцию «Открыть таблицу атрибутов» в контекстном меню.</p></li>
</ol>
<blockquote>
<p>Таблица атрибутов — это представление базы данных в виде таблицы. В большинстве случаев работа с семантической информацией в ГИС выполняется через таблицу атрибутов.</p>
</blockquote>
<p>Определите, какие атрибуты есть у набора пространственных данных о зданиях. Установите, какие значения атрибутов могут соответствовать жилым домам.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Закройте таблицу атрибутов слоя зданий и откройте таблицу атрибутов слоя избирательных округов.</p></li>
<li><p>Убедитесь, что для слоя избирательных участков включён режим редактирования.</p></li>
<li><p>В окне таблицы атрибутов слоя избирательных округов нажмите кнопку <img src="images/Ex05_Vectorization/button_addfield.png" /> или <code>Ctrl+W</code>, чтобы добавить новое поле, в которое будет записано число жилых домов для каждого избирательного участка.</p></li>
<li><p>Добавьте поле с именем <code>number_of_houses</code> целочисленного типа.</p></li>
</ol>
<p>На этом подготовительные операции закончены, мы переходим к запросам.</p>
<ol start="3" style="list-style-type: decimal">
<li><strong>Выберите</strong> любой из округов: выделите строку в таблице атрибутов или воспользуйтесь инструментом выборки в окне карты <img src="images/Ex05/selection1.png" />. Выделенный объект будет подсвечен жёлтым цветом на карте и синим цветом в таблице атрибутов.</li>
</ol>
<p><img src="images/Ex05_Vectorization/select1.png" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Теперь выберите те объекты из слоя зданий, которые находятся внутри выбранного округа. Для этого запустите инструмент «Вектор» — «Выбор» — «Выбрать по расположению…». Используйте условие «находятся внутри» (<em>are within</em>). Включите опцию «Использовать только выделенные объекты» для выбирающего слоя.</li>
</ol>
<p><img src="images/Ex05_Vectorization/select_by_location.png" /></p>
<p><img src="images/Ex05_Vectorization/selection2.png" /></p>
<p>Нажмите «Выполнить», чтобы выбрать объекты в слое зданий.</p>
<ol start="6" style="list-style-type: decimal">
<li>Имея выборку в слое зданий и не закрывая окно пространственного запроса («Выбрать по расположению…»), осуществите выборку по атрибутам. Для этого выберите в таблице слоёв слой зданий и нажмите кнопку «Выделить объекты, удовлетворяющие условию» <img src="images/Ex05/selection3.png" /> (или нажмите <code>Ctrl+F3</code>. Откроется форма ввода атрибутивного запроса.</li>
</ol>
<blockquote>
<p>Атрибутивные запросы в ГИС, как правило, создаются с использованием диалектов языка <a href="https://ru.wikipedia.org/wiki/SQL">SQL</a>. Само выражение представляет собой только условие (<em>where clause</em>) и часто использует значения атрибутов. В QGIS можно выполнить запрос и без составления выражения на языке SQL, но поскольку SQL более функционален, мы призываем вас сразу начать пользоваться им.</p>
</blockquote>
<p>Форма ввода атрибутивного запроса состоит из трёх частей. В левой части конструируется собственно запрос, средняя содержит список доступных переменных и функций, в правой отображается справочная и служебная информация. Сейчас вам нужно будет составить атрибутивный запрос, который позволит выбрать здания, являющиеся (с некоторой вероятностью) жилыми домами.</p>
<p><img src="images/Ex05_Vectorization/query_interface.png" /></p>
<p>Атрибутивный запрос представляет собой логическое выражение, которое применяется к кортежу базы данных (строке таблицы). Результатом вычисления логического выражения является либо логическая 1 (ИСТИНА), либо логический 0 (ЛОЖЬ). В выборку попадают объекты, для которых при вычислении выражения получено значение 1.</p>
<p>В простейшем случае выражение состоит из проверки равенства. Например, выражение <code>"type" = 'house'</code> будет истинным для всех объектов, у которых в поле <code>type</code> записано значение <code>house</code>. Можно конструировать более сложные логические выражения с использованием операторов AND (И), OR (ИЛИ) и других. Например, выражение <code>"type" = 'apartments' AND "name" IS NOT NULL</code> будет истинным для объектов, у которых в поле <code>type</code> записано значение <code>apartments</code> (т.е. многоэтажные жилые дома) и одновременно в поле <code>name</code> записано какое-либо значение, отличное от пустого (<code>NULL</code>) (т.е. имеющие название). А запрос <code>"type" = 'garage' OR "type" = 'garages'</code> выберет из слоя зданий объекты, у которых в поле <code>type</code> записано либо значение <code>garage</code>, либо значение <code>garages</code>.</p>
<blockquote>
<p>Примечание 1: в интерфейсе атрибутивного запроса и во всех остальных инструментах QGIS, использующих тот же интерфейс, названия полей обрамляются двойными кавычками (“), а строковые переменные — одинарными кавычками (’)
Примечание 2: в QGIS и в большинстве систем управления базами данных (СУБД) для работы с пустыми значениями (NULL) используются отдельные операторы. Например, выражение <code>"type" = NULL</code> будет воспринято как некорректное, вместо него следует писать <code>"type" IS NULL</code></p>
</blockquote>
<ol start="7" style="list-style-type: decimal">
<li>Составьте выражение, реализующее следующее условие:</li>
</ol>
<p><strong>Выбрать объекты, у которых атрибуту <code>type</code> присвоено значение <code>apartments</code> или <code>house</code></strong></p>
<p>Вводить выражение можно, пользуясь списком функций и полей в правой части окна. Двойной клик по полю или функции добавляет соответствующую запись в окно выражения</p>
<p><img src="images/Ex05_Vectorization/query.gif" /></p>
<ol start="11" style="list-style-type: decimal">
<li>Мы сформулировали условие для выборки, однако нам нужно выбрать объекты не просто из слоя, а из уже существующей выборки. Для этого откройте выпадающий список кнопки «Выбрать объекты» и выберите функцию «Фильтровать текущее выделение»:</li>
</ol>
<p><img src="images/Ex05/selection5.png" /></p>
<ol start="12" style="list-style-type: decimal">
<li>После применения фильтра появится всплывающее сообщение с числом выбранных объектов. Эта информация будет продублирована внизу окна QGIS:</li>
</ol>
<p><img src="images/Ex05_Vectorization/select_from_selection.png" /></p>
<ol start="13" style="list-style-type: decimal">
<li><p>Введите полученную цифру в таблицу атрибутов слоя избирательных округов в строке, соответствующей выбранному объекту (подсвечена синим).</p></li>
<li><p>Теперь, не закрывая окна пространственного и атрибутивного запроса, выбирайте по очереди каждый следующий объект в слое границ избирательных округов и повторяйте для них шаги 3-13. Таким образом вы заполните весь столбец <code>number_of_houses</code> в таблице атрибутов. В процессе выполнения не забывайте периодически сохранять правки.</p></li>
<li><p>Скопируйте таблицу атрибутов в любой табличный процессор (Microsoft Excel, Google Sheets, LibreOffice Calc). Для этого при помощи сочетания клавиш <code>Ctrl+A</code> выделите все записи в таблице, скопируйте при помощи <code>Ctrl+C</code> и вставьте записи без форматирования в табличный процессор при помощи <code>Ctrl+Shift+V</code>.</p></li>
<li><p>Удалите столбец <code>wkt_geometry</code>, если он есть в вашей таблице. Скопируйте остальные столбцы и вставьте их в отчётный файл.</p></li>
</ol>
<p><kbd><strong>Таблица №1.</strong> Таблица атрибутов слоя избирательных округов</kbd>.</p>
<ol start="18" style="list-style-type: decimal">
<li><p>Завершите редактирование слоя избирательных округов.</p></li>
<li><p>Отключите отображение слоя зданий.</p></li>
</ol>
</div>
<div id="digitizing-diagrams" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> Визуализация слоя при помощи картодиаграмм<a href="digitizing-districts.html#digitizing-diagrams" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="digitizing-districts.html#digitizing-districts">В начало упражнения ⇡</a></p>
<p>Как вы уже знаете из курса картографии, не существует прямого взаимно-однозначного соответствия между способами изображения, принятыми в картографии, и способами визуализации данных в ГИС. Чтобы отобразить абсолютную величину в пределах единиц статистического учёта (или аналогичных контуров), в картографии применяют способ картодиаграмм. Для создания условных знаков, соответствующих способу картодиаграмм, в QGIS применяется вкладка «Диаграммы» в свойствах слоя.</p>
<ol style="list-style-type: decimal">
<li><p>Откройте свойства слоя районов и перейдите на вкладку «Диаграммы». По умолчанию отображение диаграмм отключено. Включите отображение круговых диаграмм, выбрав опцию Pie Chart из выпадающего списка вверху.</p></li>
<li><p>В настройках диаграмм перейдите на вкладку «Атрибуты». Добавьте атрибут <code>number_of_houses</code> к диаграмме. Задайте для него мягкий оттенок оранжевого или жёлтого цвета.</p>
<blockquote>
<p>Примечание: вкладка «Атрибуты» нужна для настройки секторов круговых диаграмм. Если вы добавляете несколько атрибутов к диаграмме, программа автоматически рассчитывает размеры секторов для каждого объекта. Сейчас перед нами не стоит такая задача, так что, фактически, можно было не добавлять атрибуты или добавить любой другой.</p>
</blockquote></li>
<li><p>На вкладке «Отрисовка» («Рендеринг») установите для диаграмм настройку прозрачности (70 %)</p></li>
<li><p>На вкладке «Размер» измените способ задания размера с фиксированного на изменяющийся («масштабируемый»).</p>
<blockquote>
<p>Изменение размера диаграмм в QGIS работает следующим образом. Пользователь задаёт максимальное значение показателя, который будет управлять размером диаграммы, и соответствующий ему максимальный диаметр диаграммы. Размер круга масштабируется пропорционально величине показателя. Из картографических соображений следует всегда выбирать масштабирование площади (в новых версиях QGIS некорректно переведено как «к поверхности»), а не линейного размера (диаметра).</p>
</blockquote></li>
<li><p>В выпадающем списке «Атрибут» выберите нужный атрибут и нажмите кнопку «Найти, чтобы отобразить его максимальное значение. Оно будет отражено во вкладке «Макс. значение».</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/diagrams1.gif" /></p>
<ol start="6" style="list-style-type: decimal">
<li><p>Округлите полученное максимальное значение в большую сторону до величины, кратной 100.</p></li>
<li><p>Установите максимальный размер диаграмм равным 14 (мм). Диаграмма такого диаметра будет соответстовать объекту с указанным максимальным значением атрибута.</p>
<blockquote>
<p>В QGIS есть ещё одна полезная опция — увеличение размера диаграмм. Она применяется, если при масштабировании некоторые диаграммы становятся слишком малы. В таком случае их размер увеличивается до минимального (задаваемого пользователем) порогового значения. В этом упражнении она нам не требуется</p>
</blockquote></li>
<li><p>Перейдите на вкладку «Размещение» и проверьте, что для ваших диаграмм указана опция размещения над центроидом.</p></li>
<li><p>Перейдите на вкладку «Легенда». Здесь вы настроите комбинацию условных знаков для отображения в легенде. Нажмите кнопку «Условные обозначения для размеров диаграмм» (<em>Show Legend Entries for Diagram Size</em>).</p></li>
<li><p>Настройте отображение значков следующим образом:</p>
<ul>
<li>«Коллапсируйте» значки легенды;</li>
<li>В качестве символа используйте белый маркер круглой формы с тёмно-серой обводкой;</li>
<li>Задайте заголовок («Число домов»);</li>
</ul></li>
</ol>
<p>Интерфейс настройки диаграммы должен принять приблизительно следующий вид:</p>
<p><img src="images/Ex05_Vectorization/diagram2.png" /></p>
<p><strong>Важное замечание:</strong> такой набор значков не является картографически корректным для легенды к абсолютной непрерывной шкале значков. По состоянию на февраль 2022 г. ни один широко используемый ГИС-пакет не может сделать легенду к размерам кругов картодиаграммы согласно принятым картографическим правилам. Легенды к таким картам следует составлять или исправлять вручную.</p>
<p>По окончании настройки символов окно QGIS будет выглядеть следующим образом:</p>
<p><img src="images/Ex05_Vectorization/map_diagrams.png" /></p>
<ol start="11" style="list-style-type: decimal">
<li>Самостоятельно измените настройки отображения слоёв так, чтобы базовая карта не «доминировала» над тематическим содержанием, и сделайте снимок экрана.</li>
</ol>
<p><kbd><strong>Снимок экрана №3.</strong> Окно QGIS с настроенной символикой</kbd>.</p>
</div>
<div id="digitizing-layout" class="section level2 hasAnchor" number="7.7">
<h2><span class="header-section-number">7.7</span> Создание и экспорт макета компоновки<a href="digitizing-districts.html#digitizing-layout" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="digitizing-districts.html#digitizing-districts">В начало упражнения ⇡</a></p>
<p>Изображение, которое вы видите во фрейме данных, можно экспортировать «как есть» (с помощью опции «Проекты» — «Импорт/экспорт» — «Экспортировать карту как изображение…»). Однако для картографических целей, как правило, формируется <strong>компоновка карты</strong>. На листе заданного формата размещается картографическое изображение, добавляется название, легенда, масштабная линейка и элементы зарамочного оформления.</p>
<p>Сейчас мы создадим макет компоновки с расчётом на то, что итоговая карта-схема будет вставлена в отчёт.</p>
<ol style="list-style-type: decimal">
<li><p>Создайте новый макет компоновки («Проект» — «Создать Макет…») или <code>Ctrl+P</code>.</p></li>
<li><p>В качестве названия макета введите свою фамилию.</p></li>
</ol>
<blockquote>
<p>В отличие от проектов QGIS и наборов пространственных данных, на названия макетов компоновки в QGIS не накладывается ограничений.</p>
</blockquote>
<p>После ввода названия откроется окно компоновки (<em>Layout</em>)</p>
<div class="float">
<img src="images/Ex01/Layout.png" alt="Layout" />
<div class="figcaption">Layout</div>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Измените ориентацию страницы с альбомной, предлагаемой по умолчанию, на портретную, соответствующую ориентации страниц отчёта. На изображении ниже показано, как это сделать.</li>
</ol>
<div class="float">
<img src="images/Ex05_Vectorization/album_portrait.gif" alt="Layout" />
<div class="figcaption">Layout</div>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Добавьте картографическое изображение (фрейм карты) на макет</li>
</ol>
<div class="float">
<img src="images/Ex05_Vectorization/add_map.gif" alt="Add map" />
<div class="figcaption">Add map</div>
</div>
<ol start="5" style="list-style-type: decimal">
<li><p>Измените положение и размер фрейма карты таким образом, чтобы на листе оставались поля: левое: 3 см, правое: 1,5 см.</p></li>
<li><p>Изменяя высоту фрейма, масштаб изображения, а также перемещая картографическое изображение внутри фрейма при помощи кнопки «Переместить содержимое элемента» <img src="images/Ex05_Vectorization/button_moveelement.png" />, добейтесь вида фрейма, аналогичного рисунку ниже:</p></li>
</ol>
<div class="float">
<img src="images/Ex05_Vectorization/map_frame.png" alt="Map layout" />
<div class="figcaption">Map layout</div>
</div>
<ol start="7" style="list-style-type: decimal">
<li><p>Не закрывая окно макета, вернитесь в основное окно QGIS и переименуйте слой районов. Назовите его «Районы Новосибирска».</p></li>
<li><p>Добавьте на макет легенду с помощью кнопки <img src="images/Ex05_Vectorization/button_addlegend.png" />. Поместите легенду в наиболее свободное место в пределах карты.</p></li>
<li><p>Отключите автообновление легенды и удалите ненужные записи, как показано на рисунке ниже:</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/legend_deleteelements.gif" /></p>
<ol start="10" style="list-style-type: decimal">
<li><p>В свойствах элемента легенды найдите вкладку отступ и удалите (установите равным нулю) отступ под заголовком легенды.</p></li>
<li><p>Добавьте масштабную линейку с помощью кнопки <img src="images/Ex05_Vectorization/button_addscalebar.png" />. Разместите масштабную линейку в юго-западном углу изображения. При необходимости измените обозначение единиц измерения.</p></li>
<li><p>Добавьте название карты (текстовый элемент) с помощью кнопки <img src="images/Ex05_Vectorization/button_addtext.png" />. Самостоятельно выберите оптимальное место для размещения названия.</p></li>
<li><p>Экспортируйте карту-схему («Макет» — «Экспорт в Изображение» или кнопка <img src="images/Ex05_Vectorization/button_exporttoraster.png" />) с разрешением 96 точек на дюйм (dpi). Используйте опцию «Кадрировать по содержимому» (<em>Crop to Content</em>).</p>
<blockquote>
<p>Примечание: разрешение 96 точек на дюйм считается довольно низким для картографических целей. Изображения с таким разрешением не годятся для печати, но иногда могут быть пригодны для размещения в Интернете. ВЫ снижаете разрешение для того, чтобы сохранить читаемость базовой карты.</p>
</blockquote></li>
<li><p>Вставьте полученное изображение в отчётный файл.</p></li>
</ol>
<p><kbd><strong>Итоговое картографическое изобаржение</strong></kbd></p>
<ol start="14" style="list-style-type: decimal">
<li>Ответьте на контрольные вопросы в конце отчётного файла</li>
</ol>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="digitizing-topomap.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geometry.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["qgis-course.pdf", "qgis-course.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
