<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Упражнение 6 Векторизация карты избирательных округов | Основы геоинформатики: практикум в QGIS</title>
  <meta name="description" content="Упражнение 6 Векторизация карты избирательных округов | Основы геоинформатики: практикум в QGIS" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Упражнение 6 Векторизация карты избирательных округов | Основы геоинформатики: практикум в QGIS" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Упражнение 6 Векторизация карты избирательных округов | Основы геоинформатики: практикум в QGIS" />
  <meta name="github-repo" content="aentin/qgis-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Упражнение 6 Векторизация карты избирательных округов | Основы геоинформатики: практикум в QGIS" />
  
  <meta name="twitter:description" content="Упражнение 6 Векторизация карты избирательных округов | Основы геоинформатики: практикум в QGIS" />
  

<meta name="author" content="Андрей Энтин, Тимофей Самсонов" />


<meta name="date" content="2021-03-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="raster-reference.html"/>
<link rel="next" href="map-ref-districts.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Основы геоинформатики</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Общие сведения</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#учебные-материалы"><i class="fa fa-check"></i>Учебные материалы</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#программное-обеспечение-для-работы"><i class="fa fa-check"></i>Программное обеспечение для работы</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#macos"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#linux"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Основы работы с QGIS</b></span></li>
<li class="chapter" data-level="1" data-path="map-design-general.html"><a href="map-design-general.html"><i class="fa fa-check"></i><b>1</b> Создание общегеографической карты</a>
<ul>
<li class="chapter" data-level="1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-intro"><i class="fa fa-check"></i><b>1.1</b> Введение</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-checklist"><i class="fa fa-check"></i><b>1.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-begin"><i class="fa fa-check"></i><b>1.2</b> Начало работы</a></li>
<li class="chapter" data-level="1.3" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-projection"><i class="fa fa-check"></i><b>1.3</b> Настройка системы координат</a></li>
<li class="chapter" data-level="1.4" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-navigation"><i class="fa fa-check"></i><b>1.4</b> Навигация по карте</a></li>
<li class="chapter" data-level="1.5" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-relief"><i class="fa fa-check"></i><b>1.5</b> Оформление рельефа</a></li>
<li class="chapter" data-level="1.6" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-vector"><i class="fa fa-check"></i><b>1.6</b> Добавление векторных наборов данных</a></li>
<li class="chapter" data-level="1.7" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-attributes"><i class="fa fa-check"></i><b>1.7</b> Использование атрибутов объектов при визуализации</a></li>
<li class="chapter" data-level="1.8" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-labels"><i class="fa fa-check"></i><b>1.8</b> Подписи</a></li>
<li class="chapter" data-level="1.9" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-layout"><i class="fa fa-check"></i><b>1.9</b> Настройка компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="map-design-world.html"><a href="map-design-world.html"><i class="fa fa-check"></i><b>2</b> Создание политической карты мира</a>
<ul>
<li class="chapter" data-level="2.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-intro"><i class="fa fa-check"></i><b>2.1</b> Введение</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-checklist"><i class="fa fa-check"></i><b>2.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-begin"><i class="fa fa-check"></i><b>2.2</b> Начало работы</a></li>
<li class="chapter" data-level="2.3" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-input-data"><i class="fa fa-check"></i><b>2.3</b> Загрузка исходных данных</a></li>
<li class="chapter" data-level="2.4" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-qgis-project"><i class="fa fa-check"></i><b>2.4</b> Создание ГИС-проекта и загрузка данных в проект</a></li>
<li class="chapter" data-level="2.5" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-crs"><i class="fa fa-check"></i><b>2.5</b> Настройка системы координат проекта</a></li>
<li class="chapter" data-level="2.6" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-colorbrewer"><i class="fa fa-check"></i><b>2.6</b> Окраска стран в разные цвета</a></li>
<li class="chapter" data-level="2.7" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-other-layers"><i class="fa fa-check"></i><b>2.7</b> Добавление других слоёв на карту</a></li>
<li class="chapter" data-level="2.8" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-layout"><i class="fa fa-check"></i><b>2.8</b> Создание компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html"><i class="fa fa-check"></i><b>3</b> Создание карты четвертичных отложений</a>
<ul>
<li class="chapter" data-level="3.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-intro"><i class="fa fa-check"></i><b>3.1</b> Введение</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-checklist"><i class="fa fa-check"></i><b>3.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-begin"><i class="fa fa-check"></i><b>3.2</b> Начало работы</a></li>
<li class="chapter" data-level="3.3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-data"><i class="fa fa-check"></i><b>3.3</b> Добавление данных в проект</a></li>
<li class="chapter" data-level="3.4" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-classification"><i class="fa fa-check"></i><b>3.4</b> Применение готового стиля к слою</a></li>
<li class="chapter" data-level="3.5" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-csv"><i class="fa fa-check"></i><b>3.5</b> Создание набора пространственных данных из таблицы с координатами</a></li>
<li class="chapter" data-level="3.6" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-final"><i class="fa fa-check"></i><b>3.6</b> Оформление карты</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="map-design-population.html"><a href="map-design-population.html"><i class="fa fa-check"></i><b>4</b> Создание социально-экономической карты</a>
<ul>
<li class="chapter" data-level="4.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-intro"><i class="fa fa-check"></i><b>4.1</b> Введение</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-checklist"><i class="fa fa-check"></i><b>4.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-begin"><i class="fa fa-check"></i><b>4.2</b> Начало работы</a></li>
<li class="chapter" data-level="4.3" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-change-crs"><i class="fa fa-check"></i><b>4.3</b> Изменение системы координат проекта</a></li>
<li class="chapter" data-level="4.4" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-fill-color"><i class="fa fa-check"></i><b>4.4</b> Создание картограмм</a></li>
<li class="chapter" data-level="4.5" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-symbols"><i class="fa fa-check"></i><b>4.5</b> Создание шкалы значков</a></li>
<li class="chapter" data-level="4.6" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-labels"><i class="fa fa-check"></i><b>4.6</b> Добавление подписей значков</a></li>
<li class="chapter" data-level="4.7" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-basemap"><i class="fa fa-check"></i><b>4.7</b> Настройка условных знаков географической основы</a></li>
<li class="chapter" data-level="4.8" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-layout"><i class="fa fa-check"></i><b>4.8</b> Создание макета карты</a></li>
</ul></li>
<li class="part"><span><b>II Редактирование данных в ГИС</b></span></li>
<li class="chapter" data-level="5" data-path="raster-reference.html"><a href="raster-reference.html"><i class="fa fa-check"></i><b>5</b> Привязка графических материалов</a>
<ul>
<li class="chapter" data-level="5.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-intro"><i class="fa fa-check"></i><b>5.1</b> Введение</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-control"><i class="fa fa-check"></i><b>5.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-input"><i class="fa fa-check"></i><b>5.2</b> Привязка растра по известным координатам</a></li>
<li class="chapter" data-level="5.3" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-basemap"><i class="fa fa-check"></i><b>5.3</b> Добавление базовой карты</a></li>
<li class="chapter" data-level="5.4" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-accuracy"><i class="fa fa-check"></i><b>5.4</b> Оценка точности привязки</a></li>
<li class="chapter" data-level="5.5" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-frommap"><i class="fa fa-check"></i><b>5.5</b> Использование координат с карты</a></li>
<li class="chapter" data-level="5.6" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-linear"><i class="fa fa-check"></i><b>5.6</b> Привязка с использованием линейной трансформации</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="digitizing-districts.html"><a href="digitizing-districts.html"><i class="fa fa-check"></i><b>6</b> Векторизация карты избирательных округов</a>
<ul>
<li class="chapter" data-level="6.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-intro"><i class="fa fa-check"></i><b>6.1</b> Введение</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-control"><i class="fa fa-check"></i><b>6.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-basedata"><i class="fa fa-check"></i><b>6.2</b> Добавление базовых данных</a></li>
<li class="chapter" data-level="6.3" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-new-geopackage"><i class="fa fa-check"></i><b>6.3</b> Создание набора пространственных данных</a></li>
<li class="chapter" data-level="6.4" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-drawing"><i class="fa fa-check"></i><b>6.4</b> Векторизация избирательных округов</a></li>
<li class="chapter" data-level="6.5" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-query"><i class="fa fa-check"></i><b>6.5</b> Пространственные и атрибутивные запросы</a></li>
<li class="chapter" data-level="6.6" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-diagrams"><i class="fa fa-check"></i><b>6.6</b> Визуализация слоя при помощи картодиаграмм</a></li>
<li class="chapter" data-level="6.7" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-layout"><i class="fa fa-check"></i><b>6.7</b> Создание и экспорт макета компоновки</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="map-ref-districts.html"><a href="map-ref-districts.html"><i class="fa fa-check"></i><b>7</b> Привязка и цифрование административной карты</a>
<ul>
<li class="chapter" data-level="7.1" data-path="map-ref-districts.html"><a href="map-ref-districts.html#map-ref-districts-intro"><i class="fa fa-check"></i><b>7.1</b> Введение</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="map-ref-districts.html"><a href="map-ref-districts.html#map-ref-economic-control"><i class="fa fa-check"></i><b>7.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="map-ref-districts.html"><a href="map-ref-districts.html#map-ref-districts-basemap"><i class="fa fa-check"></i><b>7.2</b> Добавление базовых данных</a></li>
<li class="chapter" data-level="7.3" data-path="map-ref-districts.html"><a href="map-ref-districts.html#map-ref-districts-referencing"><i class="fa fa-check"></i><b>7.3</b> Привязка карты</a></li>
<li class="chapter" data-level="7.4" data-path="map-ref-districts.html"><a href="map-ref-districts.html#map-ref-districts-creation"><i class="fa fa-check"></i><b>7.4</b> Создание слоя избирательных округов</a></li>
<li class="chapter" data-level="7.5" data-path="map-ref-districts.html"><a href="map-ref-districts.html#map-ref-districts-stats"><i class="fa fa-check"></i><b>7.5</b> Расчет статистики по округам</a></li>
<li class="chapter" data-level="7.6" data-path="map-ref-districts.html"><a href="map-ref-districts.html#map-ref-districts-diagrams"><i class="fa fa-check"></i><b>7.6</b> Построение картодиаграмм</a></li>
<li class="chapter" data-level="7.7" data-path="map-ref-districts.html"><a href="map-ref-districts.html#map-ref-districts-wms"><i class="fa fa-check"></i><b>7.7</b> Использование базовых слоёв из сети Интернет</a></li>
<li class="chapter" data-level="7.8" data-path="map-ref-districts.html"><a href="map-ref-districts.html#map-ref-districts-result"><i class="fa fa-check"></i><b>7.8</b> Оформление итоговой схемы</a></li>
</ul></li>
<li class="part"><span><b>III Векторный анализ</b></span></li>
<li class="chapter" data-level="8" data-path="overlay.html"><a href="overlay.html"><i class="fa fa-check"></i><b>8</b> Анализ пространственных взаимосвязей</a>
<ul>
<li class="chapter" data-level="8.1" data-path="overlay.html"><a href="overlay.html#overlay-intro"><i class="fa fa-check"></i><b>8.1</b> Введение</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="overlay.html"><a href="overlay.html#overlay-control"><i class="fa fa-check"></i><b>8.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="8.1.2" data-path="overlay.html"><a href="overlay.html#overlay-annotation"><i class="fa fa-check"></i><b>8.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="overlay.html"><a href="overlay.html#overlay-vectors"><i class="fa fa-check"></i><b>8.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="8.3" data-path="overlay.html"><a href="overlay.html#overlay-intersect"><i class="fa fa-check"></i><b>8.3</b> Оверлей слоев методом пересечения</a></li>
<li class="chapter" data-level="8.4" data-path="overlay.html"><a href="overlay.html#overlay-merge"><i class="fa fa-check"></i><b>8.4</b> Слияние результатов пересечения с целью получения показателя пространственной связи</a></li>
<li class="chapter" data-level="8.5" data-path="overlay.html"><a href="overlay.html#overlay-sumarea-subtypes"><i class="fa fa-check"></i><b>8.5</b> Объединение подтипов почв для подсчёта суммарной площади</a></li>
<li class="chapter" data-level="8.6" data-path="overlay.html"><a href="overlay.html#overlay-fieldcalc"><i class="fa fa-check"></i><b>8.6</b> Расчёт площадей объектов</a></li>
<li class="chapter" data-level="8.7" data-path="overlay.html"><a href="overlay.html#overlay-join"><i class="fa fa-check"></i><b>8.7</b> Соединение таблиц по названию подтипа почв</a></li>
<li class="chapter" data-level="8.8" data-path="overlay.html"><a href="overlay.html#overlay-resulting"><i class="fa fa-check"></i><b>8.8</b> Вычисление результирующих значений показателя связи</a></li>
</ul></li>
<li class="part"><span><b>IV Растровый анализ</b></span></li>
<li class="chapter" data-level="9" data-path="weighted-overlay.html"><a href="weighted-overlay.html"><i class="fa fa-check"></i><b>9</b> Оптимизация местоположения</a>
<ul>
<li class="chapter" data-level="9.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-intro"><i class="fa fa-check"></i><b>9.1</b> Введение</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-control"><i class="fa fa-check"></i><b>9.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="9.1.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-annotation"><i class="fa fa-check"></i><b>9.1.2</b> Аннотация</a></li>
<li class="chapter" data-level="9.1.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-warning"><i class="fa fa-check"></i><b>9.1.3</b> Прежде чем начать…</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-init"><i class="fa fa-check"></i><b>9.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="9.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-slopes"><i class="fa fa-check"></i><b>9.3</b> Расчет углов наклона</a></li>
<li class="chapter" data-level="9.4" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-distances"><i class="fa fa-check"></i><b>9.4</b> Расчет расстояний</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-roads"><i class="fa fa-check"></i><b>9.4.1</b> Расстояния до дорог</a></li>
<li class="chapter" data-level="9.4.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-streams"><i class="fa fa-check"></i><b>9.4.2</b> Водотоки</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass"><i class="fa fa-check"></i><b>9.5</b> Переклассификация наборов данных</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-distance"><i class="fa fa-check"></i><b>9.5.1</b> Переклассификация растров расстояний</a></li>
<li class="chapter" data-level="9.5.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-slope"><i class="fa fa-check"></i><b>9.5.2</b> Переклассификация растра крутизны</a></li>
<li class="chapter" data-level="9.5.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#преобразование-слоя-типов-землепользования-в-растровое-представление"><i class="fa fa-check"></i><b>9.5.3</b> Преобразование слоя типов землепользования в растровое представление</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-combination"><i class="fa fa-check"></i><b>9.6</b> Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</a></li>
<li class="chapter" data-level="9.7" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-final-decision"><i class="fa fa-check"></i><b>9.7</b> Окончательный выбор участка</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="hydrodem.html"><a href="hydrodem.html"><i class="fa fa-check"></i><b>10</b> Гидрологическое моделирование на основе ЦМР</a>
<ul>
<li class="chapter" data-level="10.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-intro"><i class="fa fa-check"></i><b>10.1</b> Введение</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-control"><i class="fa fa-check"></i><b>10.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="10.1.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-annotation"><i class="fa fa-check"></i><b>10.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-init"><i class="fa fa-check"></i><b>10.2</b> Получение и подготовка исходных данных</a></li>
<li class="chapter" data-level="10.3" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-preprocessing"><i class="fa fa-check"></i><b>10.3</b> Гидрологическая коррекция ЦМР</a></li>
<li class="chapter" data-level="10.4" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-flowacc"><i class="fa fa-check"></i><b>10.4</b> Расчёт водосборной площади</a></li>
<li class="chapter" data-level="10.5" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-basin"><i class="fa fa-check"></i><b>10.5</b> Определение границ бассейна р. Оскол</a></li>
</ul></li>
<li class="appendix"><span><b>Справочные сведения</b></span></li>
<li class="chapter" data-level="A" data-path="manual-catalog.html"><a href="manual-catalog.html"><i class="fa fa-check"></i><b>A</b> Форматы пространственных данных</a>
<ul>
<li class="chapter" data-level="A.1" data-path="manual-catalog.html"><a href="manual-catalog.html#manual-dataformats-shapefile"><i class="fa fa-check"></i><b>A.1</b> Шейп-файлы</a></li>
<li class="chapter" data-level="A.2" data-path="manual-catalog.html"><a href="manual-catalog.html#geopackage"><i class="fa fa-check"></i><b>A.2</b> GeoPackage</a></li>
<li class="chapter" data-level="A.3" data-path="manual-catalog.html"><a href="manual-catalog.html#базы-геоданных-esri"><i class="fa fa-check"></i><b>A.3</b> Базы геоданных ESRI</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="mastertest.html"><a href="mastertest.html"><i class="fa fa-check"></i><b>B</b> Инструкция по регистрации в системе Мастер-тест</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Основы геоинформатики: практикум в QGIS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="digitizing-districts" class="section level1" number="6">
<h1><span class="header-section-number">Упражнение 6</span> Векторизация карты избирательных округов</h1>
<p><a href="https://1drv.ms/u/s!AmtmZDq3JgxHgZtz3mcQqknItl3Gyw?e=TR90KB" target="_blank">Архив с данными и файлом отчёта</a></p>
<div id="digitizing-intro" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Введение</h2>
<p><strong>Цель задания</strong> — знакомство с редактированием векторных пространственных данных, элементами базовых технологий ГИС (оверлей, пространственный запрос, атрибутивный запрос).</p>
<p><strong>Необходимая теоретическая подготовка:</strong> Системы координат и проекции карт, привязка геоизображений, трансформирование геоизображений. Пространственные запросы, атрибутивные запросы, оверлей.</p>
<p><strong>Необходимая практическая подготовка:</strong> Знание основных компонент интерфейса QGIS (менеджер источников данных, панель слоёв, фрейм карты). Добавление источников пространственных данных в проект. Настройка символики и подписей объектов. Создание макета, добавление карты и зарамочного оформления, экспорт макета.</p>
<p><strong>Исходные данные:</strong> привязанная растровая карта избирательных округов г. Кинешма; набор пространственных данных о контурах зданий, созданный на основе базы OpenStreetMap</p>
<p><strong>Результат:</strong> Набор пространственных данных с избирательными округами г. Кинешма и статистикой по застройке в пределах округов. Картодиаграммы по количеству домов и степени застроенности. Картографическое изображение.</p>
<div id="digitizing-control" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Контрольный лист</h3>
<ul>
<li>Создать набор пространственных данных об избирательных округах путем цифрования растровой карты</li>
<li>Добавить номера районов в таблицу атрибутов</li>
<li>Выполнить серию пространственных и атрибутивных запросов для определения структуры застройки в пределах избирательных округов</li>
<li>Построить картодиаграммы по полученным значениям</li>
<li>Подготовить проект карты с компоновкой</li>
</ul>
</div>
</div>
<div id="digitizing-basedata" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Добавление базовых данных</h2>
<p><a href="#digitizingf-districts">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Для выполнения этого упражнения вам потребуется привязанный растр избирательных округов из <a href="raster-reference.html#raster-reference-linear">упражнения № 5</a>. Выполните привязку этого растра, если вы не сделали её ранее.</p></li>
<li><p>Создайте в вашей рабочей директории каталог для хранения материалов проекта. Назовите его <code>Ex02</code>. Поместите привязанный растр в каталог. Поместите набор данных <code>kineshma_osm_buildings.gpkg</code> в этот же каталог.</p></li>
<li><p>Создайте новый проект QGIS и загрузите в него привязанный растр.</p></li>
<li><p>Проверьте, что система координат растра и система координат проекта совпадают и соответствуют действительным.</p>
<p><strong>Важно:</strong> если вы видите значок <img src="images/Ex05_Vectorization/unknown_crs.png" alt="?" /> напротив слоя растра в панели слоёв, это означает, что система координат растра не была корректно распознана. В таком случае вам нужно вручную установить систему координат слоя и систему координат проекта. Подсказка: система координат привязанного растра должна быть такой же, как система координат базовой карты, к которой вы привязывали растр (Яндекс.Карты).</p></li>
</ol>
<!-- EPSG:32638 -->
<ol start="5" style="list-style-type: decimal">
<li>Сохраните проект QGIS в папку с данными проекта</li>
</ol>
<p><kbd><strong>Снимок экрана №1.</strong> Окно QGIS с загруженным в него растровым изображением</kbd>.</p>
</div>
<div id="digitizing-new-geopackage" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Создание набора пространственных данных</h2>
<p><a href="#digitizingf-districts">В начало упражнения ⇡</a></p>
<p>На этом этапе мы создадим новый векторный набор пространственных данных, в котором будут храниться контура избирательных округов. QGIS поддерживает множество форматов пространственных данных, выбор конкретного формата в каждом случае определяется задачами, требованиями и ограничениями проекта. В качестве формата по умолчанию в QGIS 3 используется <a href="https://www.geopackage.org/">GeoPackage</a>.</p>
<p>Файл GeoPackage представляет собой базу данных SQLite с дополнительными функциями для хранения наборов пространственных данных. Вся необходимая информация хранится в единственном файле <code>*.gpkg</code>; в процессе работы создаются временные файлы. В одном файле может быть сохранено несколько наборов пространственных данных (иногда их также называют «таблицами», <em>tables</em>, или «слоями», <em>layers</em>)</p>
<ol style="list-style-type: decimal">
<li><p>Запустите процедуру создания нового набора данных GeoPackage. Для этого нажмите кнопку <img src="images/Ex05_Vectorization/new_geopackage.png" /> на панели менеджера источников данных или сочетание клавиш <code>Ctrl+Shift+N</code>.</p></li>
<li><p>В открывшемся окне введите следующие параметры:</p>
<ul>
<li><strong>База данных:</strong> сохраните файл <code>*.gpkg</code> в папку <code>Ex02</code> в вашей рабочей директории. Назовите его по шаблону <code>Kineshma_%Фамилия%.gpkg</code>;</li>
<li><strong>Имя таблицы:</strong> примите значение, предлагаемое по умолчанию после указания пути к базе;</li>
<li><strong>Тип геометрии:</strong> полигон</li>
<li>Чекбоксы «Include Z dimension» и «Include M values» оставьте выключенными;</li>
<li><strong>Система координат</strong>: такая же, как система координат проекта.</li>
</ul></li>
<li><p>Помимо геометрии объектов, нам нужно будет хранить семантическую информацию — номера избирательных округов. Создайте новое поле целочисленного типа с названием <code>district_id</code>, как показано на рисунке ниже</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/new_field.gif" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Проверьте правильность заполнения параметров. Если всё заполнено правильно, нажмите ОК. Новый слой будет добавлен в проект.</li>
</ol>
<p><img src="images/Ex05_Vectorization/new_layer.png" /></p>
</div>
<div id="digitizing-drawing" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Векторизация избирательных округов</h2>
<p><a href="#digitizingf-districts">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Измените стиль слоя на <code>pattern dot blue</code>. Эта символика будет удобна для цифрования, поскольку позволит не «скрывать» растровый слой под создаваемыми объектами и в то же время будет контрастно выделяться на их фоне.</p></li>
<li><p>Теперь всё готово к редактированию слоя. Режим редактирования запускается при помощи кнопки <img src="images/Ex05_Vectorization/button_editing.png" /> или из контекстного меню слоя. Запустите режим редактирования.</p></li>
<li><p>Когда режим редактирования запущен, нажмите кнопку <img src="images/Ex05_Vectorization/button_new.png" />, чтобы начать добавление нового объекта</p></li>
<li><p>Увеличьте изображение таким образом, чтобы видеть избирательные округа возле южного сегмента границы двух административных округов. Нажмите левой кнопкой мыши на карте в месте, где проходит граница избирательного округа и не проходит граница административного округа. По нажатию левой кнопки мыши устанавливается положение первого узла создаваемого контура. «Обходите» контур по часовой стрелке или против часовой стрелки, устанавливая новые узлы нажатием левой кнопки мыши, как показано на изображении ниже</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/new_object.gif" />
<em>Примечание: на этом изображении сегменты создаваемого объекта отрисовываются синим цветом. Когда вы начнёте создавать объект, те же линии у вас будут показаны тонкой красной линией — это настройка QGIS по умолчанию</em></p>
<ol start="5" style="list-style-type: decimal">
<li><p>Чтобы завершить редактирование объекта, нажмите правую кнопку мыши.</p></li>
<li><p>Когда вы завершаете создание объекта в QGIS, появляется окно ввода значений атрибутов. Введите номер избирательного участка, как показано ниже</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/new_attribute.gif" /></p>
<p>Когда вы создаёте пространственные объекты в ГИС, важно соблюдать топологию объектов. Координаты узлов соседних объектов должны совпадать, между объектами не должно быть пробелов и перекрытий. Чтобы добиться такого соответствия, вам необходимо активировать опцию прилипания (снеппинга).</p>
<ol start="7" style="list-style-type: decimal">
<li>Найдите панель инструментов прилипания</li>
</ol>
<p><img src="images/Ex05_Vectorization/snapping_toolbar.png" /></p>
<ol start="8" style="list-style-type: decimal">
<li><p>Включите режим прилипания, нажав на иконку с изображением магнита</p></li>
<li><p>Нажимая на соседние иконки в панели, включите прилипание к объектам во всех слоях, но только к вершинам объектов</p></li>
<li><p>Установите порог прилипания равным 12 пикселей экрана.</p></li>
</ol>
<p>Теперь, если вы будете подводить курсор к существующим объектам, его положение будет автоматически «притягиваться» к ближайшим узлам</p>
<p><img src="images/Ex05_Vectorization/snapping_in_action.gif" /></p>
<ol start="11" style="list-style-type: decimal">
<li><p>Прилипание позволяет реализовать создание новых объектов путём трассировки по существующим объектам. Включите режим трассировки, нажав на кнопку <img src="images/Ex05_Vectorization/button_tracing.png" /></p></li>
<li><p>Оцифруйте соседний объект с помощью трассировки. Для этого подведите курсор к углу существующего объекта и установите первый узел. Затем переместите курсор вдоль общей границы и установите следующий узел. Промежуточные узлы будут добавлены автоматически. После оцифровки общей границы продолжайте векторизацию обычным способом.</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/tracing_vectorization.gif" /></p>
<ol start="13" style="list-style-type: decimal">
<li><p>После добавления нового объекта не забудьте внести его номер во всплывающем окне</p></li>
<li><p>Используя полученные навыки, оцифруйте все избирательные округа.</p></li>
</ol>
<p><strong>Важно!</strong> Время от времени сохраняйте ваши правки при помощи кнопки <img src="images/Ex05_Vectorization/save_edits.png" /> на панели редактирования. В QGIS, как и во всех ГИС-пакетах, сохранение правок в данных выполняется отдельно от сохранения проекта.</p>
<p>Несколько советов по редактированию данных:</p>
<pre><code>- Чтобы отменить последний установленный узел, нажмите `Backspace`;
- Чтобы полностью удалить последнюю оцифрованную фигуру, нажмите `Ctrl+Z`.
- Чтобы изменить положение отдельного узла уже созданного объекта, можно воспользоваться инструментом редактирования узлов ![](images/Ex05_Vectorization/button_editvertices.png).
- Трассировка в QGIS работает только тогда, когда весь путь трассировки отображается на экране. Если часть сегмента вылезла за пределы фрейма, трассировка не сработает.
- Изучите панель «Дополнительные инструменты оцифровки» — она может вам пригодиться
- Плавные кривые линии (берега, реки и т.п.) при цифровании обычно аппроксимируются ломаными линиями с относительно большим числом узлов — так, чтобы отличия не были визуально заметны. Хотя многие форматы данных позволяют создавать криволинейные объекты, этот подход не являются общепринятым.</code></pre>
<ol start="18" style="list-style-type: decimal">
<li>По окончании цифрования объектов отключите растровый слой и отобразите данные в полном охвате. Сделайте снимок экрана.</li>
</ol>
<p><kbd><strong>Снимок экрана №2.</strong> Окно QGIS с оцифрованными границами избирательных участков</kbd>.</p>
</div>
<div id="digitizing-query" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Пространственные и атрибутивные запросы</h2>
<p><a href="#digitizingf-districts">В начало упражнения ⇡</a></p>
<p>В этой части работы вы оцените число жилых домов, оцифрованных пользователями ресурса <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, в пределах избирательных участков. Волонтёрская географическая информация, к которой относится и OpenStreetMap, является важным источником данных для географических исследований благодаря своей детальности и относительной оперативности обновления, однако имеет ряд недостатков: неравномерное покрытие территории данными, низкая согласованность, структурированность и надёжность данных.</p>
<p>Для подсчёта числа зданий вы воспользуетесь следующим алгоритмом:</p>
<ul>
<li><p>Выбрать округ на карте</p></li>
<li><p>Выбрать здания, попадающие в его пределы (<em>пространственный запрос</em>).</p></li>
<li><p>Из полученной выборки оставить только здания, принадлежащие к определённому типу (<em>атрибутивный запрос</em>).</p></li>
<li><p>Записать число отобранных зданий в соответствующий атрибут текущего района.</p></li>
</ul>
<p>Операции повторяются для каждого округа.</p>
<ol style="list-style-type: decimal">
<li><p>Добавьте на карту набор данных о зданиях, который вы загрузили в начале занятия.</p></li>
<li><p>Откройте <strong>таблицу атрибутов</strong> слоя зданий. Для этого нажмите правой кнопкой мыши на слой в панели слоёв и выберите опцию «Открыть таблицу атрибутов» в контекстном меню.</p></li>
</ol>
<blockquote>
<p>Таблица атрибутов — это представление базы данных в виде таблицы. В большинстве случаев работа с семантической информацией в ГИС выполняется через таблицу атрибутов.</p>
</blockquote>
<p>Определите, какие значения атрибутов могут соответствовать жилым домам.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Закройте таблицу атрибутов слоя зданий и откройте таблицу атрибутов слоя избирательных округов.</p></li>
<li><p>Убедитесь, что для слоя избирательных участков включён режим редактирования.</p></li>
<li><p>В окне таблицы атрибутов слоя избирательных округов нажмите кнопку <img src="images/Ex05_Vectorization/button_addfield.png" /> или <code>Ctrl+W</code>, чтобы добавить новое поле, в которое будет записано число жилых домов для каждого избирательного участка.</p></li>
<li><p>Добавьте поле с именем <code>number_of_houses</code> целочисленного типа.</p></li>
</ol>
<p>На этом подготовительные операции закончены, мы переходим к запросам.</p>
<ol start="3" style="list-style-type: decimal">
<li><p><strong>Выберите</strong> любой из округов: выделите строку в таблице атрибутов или воспользуйтесь инструментом выборки в окне карты <img src="images/Ex05/selection1.png" />. Выделенный объект будет подсвечен жёлтым цветом на карте и синим цветом в таблице атрибутов.</p></li>
<li><p>Теперь выберите те объекты из слоя зданий, которые находятся внутри выбранного округа. Для этого запустите инструмент «Вектор» — «Выбор» — «Выбрать по пространственному отношению…». Используйте условие «находятся внутри» (<em>are within</em>). Включите опцию «Использовать только выделенные объекты» для выбирающего слоя.</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/selection2.png" /></p>
<p>Нажмите «Выполнить», чтобы выбрать объекты в слое зданий.</p>
<ol start="6" style="list-style-type: decimal">
<li>Имея выборку в слое зданий и не закрывая окно пространственного запроса («Выделение по районам…»), осуществите выборку по атрибутам. Для этого выберите в таблице слоёв слой зданий и нажмите кнопку «Выделить объекты, удовлетворяющие условию» <img src="images/Ex05/selection3.png" />. Откроется форма ввода атрибутивного запроса.</li>
</ol>
<blockquote>
<p>Атрибутивные запросы в ГИС, как правило, создаются с использованием диалектов языка <a href="https://ru.wikipedia.org/wiki/SQL">SQL</a>. Само выражение представляет собой только условие (<em>where clause</em>) и часто использует значения атрибутов.</p>
</blockquote>
<p>Форма ввода атрибутивного запроса состоит из трёх частей. В левой части конструируется собственно запрос, средняя содержит список доступных переменных и функций, в правой отображается справочная и служебная информация. Сейчас вам нужно будет составить атрибутивный запрос, который позволит выбрать здания, являющиеся (с некоторой вероятностью) жилыми домами.</p>
<p><img src="images/Ex05_Vectorization/query_interface.png" /></p>
<p>Атрибутивный запрос представляет собой логическое выражение, которое применяется к кортежу базы данных (строке таблицы). Результатом вычисления логического выражения является либо логическая 1 (ИСТИНА), либо логический 0 (ЛОЖЬ). В выборку попадают объекты, для которых при вычислении выражения получено значение 1.</p>
<p>В простейшем случае выражение состоит из проверки равенства. Например, выражение <code>"building" = 'house'</code> будет истинным для всех объектов, у которых в поле <code>building</code> записано значение <code>house</code>. Можно конструировать более сложные логические выражения с использованием операторов AND (И), OR (ИЛИ) и других. Например, выражение <code>"building" = 'house' AND "amenity" IS NOT NULL</code> будет истинным для объектов, у которых в поле <code>building</code> записано значение <code>house</code> и одновременно в поле <code>amenity</code> записано какое-либо значение, отличное от пустого (<code>NULL</code>). А запрос <code>"building" = 'garage' OR "building" = 'garages'</code> выберет из слоя зданий объекты, у которых в поле <code>building</code> записано значение <code>garage</code> или <code>garages</code>.</p>
<blockquote>
<p>Примечание 1: в QGIS названия полей обрамляются двойными кавычками ("), а строковые переменные — одинарными кавычками (’)
Примечание 2: в QGIS и в большинстве систем управления базами данных (СУБД) для работы с пустыми значениями (NULL) используются отдельные операторы. Например, выражение <code>"amenity" = NULL</code> будет воспринято как некорректное, вместо него следует писать <code>"amenity" IS NULL</code></p>
</blockquote>
<ol start="7" style="list-style-type: decimal">
<li>Составьте выражение, реализующее следующее условие:</li>
</ol>
<p><strong>Выбрать объекты, у которых атрибуту <code>building</code> присвоено значение <code>apartments</code> или <code>house</code>, а также объекты, у которых атрибуту <code>building</code> присвоено значение <code>yes</code>, но при этом не присвоено значение атрибута <code>amenity</code>.</strong></p>
<p>Вводить выражение можно, пользуясь списком функций и полей в правой части окна. Двойной клик по полю или функции добавляет соответствующую запись в окно выражения</p>
<p><img src="images/Ex05_Vectorization/query.gif" /></p>
<p><button id="show_table_button" type="button" class="btn btn-default action-button" onclick="button_handler()">Показать выражение</button><div id="resultContainer" hidden="true"> "building" = 'apartments' OR "building" = 'house' OR ( "building" =  'yes' AND  "amenity" IS NULL)</div></p>
<script type="text/javascript">
function button_handler() {
  document.getElementById('resultContainer').hidden = false;
}
</script>
<ol start="11" style="list-style-type: decimal">
<li>Мы сформулировали условие для выборки, однако нам нужно выбрать объекты не просто из слоя, а из уже существующей выборки. Для этого откройте выпадающий список кнопки «Выбрать объекты» и выберите функцию «Фильтровать текущее выделение»:</li>
</ol>
<p><img src="images/Ex05/selection5.png" /></p>
<ol start="12" style="list-style-type: decimal">
<li>После применения фильтра появится всплывающее сообщение с числом выбранных объектов. Эта информация будет продублирована внизу окна QGIS:</li>
</ol>
<p><img src="images/Ex05_Vectorization/select_from_selection.png" /></p>
<ol start="13" style="list-style-type: decimal">
<li><p>Введите полученную цифру в таблицу атрибутов слоя избирательных округов в строке, соответствующей выбранному объекту (подсвечена синим).</p></li>
<li><p>Теперь, не закрывая окна пространственного и атрибутивного запроса, выбирайте по очереди каждый следующий объект в слое границ избирательных округов и повторяйте для них шаги 3-13. Таким образом вы заполните весь столбец <code>number_of_houses</code> в таблице атрибутов. В процессе выполнения не забывайте периодически сохранять правки.</p></li>
<li><p>Скопируйте таблицу атрибутов в любой табличный процессор (Microsoft Excel, Google Sheets, LibreOffice Calc). Для этого при помощи сочетания клавиш <code>Ctrl+A</code> выделите все записи в таблице, скопируйте при помощи <code>Ctrl+C</code> и вставьте записи без форматирования в табличный процессор при помощи <code>Ctrl+Shift+V</code>.</p></li>
<li><p>Удалите столбец <code>wkt_geometry</code>, если он есть в вашей таблице. Скопируйте остальные столбцы и вставьте их в отчётный файл.</p></li>
</ol>
<p><kbd><strong>Таблица №1.</strong> Таблица атрибутов слоя избирательных округов</kbd>.</p>
<ol start="18" style="list-style-type: decimal">
<li><p>Завершите редактирование слоя избирательных округов.</p></li>
<li><p>Отключите отображение слоя зданий.</p></li>
</ol>
</div>
<div id="digitizing-diagrams" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Визуализация слоя при помощи картодиаграмм</h2>
<p><a href="digitizing-districts.html#digitizing-districts">В начало упражнения ⇡</a></p>
<p>Как вы уже знаете из курса картографии, не существует прямого взаимно-однозначного соответствия между способами изображения, принятыми в картографии, и способами визуализации данных в ГИС. Чтобы отобразить абсолютную величину в пределах единиц статистического учёта (или аналогичных контуров), в картографии применяют способ картодиаграмм. Для создания условных знаков, соответствующих способу картодиаграмм, в QGIS применяется вкладка «Диаграммы» в свойствах слоя.</p>
<ol style="list-style-type: decimal">
<li><p>Откройте свойства слоя избирательных округов и перейдите на вкладку «Диаграммы». По умолчанию отображение диаграмм отключено. Включите отображение круговых диаграмм, выбрав опцию Pie Chart из выпадающего списка вверху.</p></li>
<li><p>В настройках диаграмм перейдите на вкладку «Атрибуты». Добавьте атрибут <code>number_of_houses</code> к диаграмме. Задайте для него мягкий оттенок оранжевого или жёлтого цвета.</p>
<blockquote>
<p>Примечание: вкладка «Атрибуты» нужна для настройки секторов круговых диаграмм. Если вы добавляете несколько атрибутов к диаграмме, программа автоматически рассчитывает размеры секторов для каждого объекта. Сейчас перед нами не стоит такая задача, так что, фактически, можно было не добавлять атрибуты или добавить любой другой.</p>
</blockquote></li>
<li><p>На вкладке «Рендеринг» установите для диаграмм настройку прозрачности (70 %)</p></li>
<li><p>На вкладке «Размер» измените способ задания размера с фиксированного на переменный («масштабируемый»).</p>
<blockquote>
<p>Изменение размера диаграмм в QGIS работает следующим образом. Пользователь задаёт максимальное значение показателя, который будет управлять размером диаграммы, и соответствующий ему максимальный диаметр диаграммы. Размер круга масштабируется пропорционально величине показателя. Из картографических соображений следует всегда выбирать масштабирование площади, а не линейного размера (диаметра).</p>
</blockquote></li>
<li><p>В выпадающем списке «Атрибут» выберите нужный атрибут и нажмите кнопку «Найти, чтобы отобразить его максимальное значение. Оно будет отражено во вкладке «Макс. значение».</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/diagrams1.gif" /></p>
<ol start="6" style="list-style-type: decimal">
<li><p>Округлите полученное максимальное значение в большую сторону до величины, кратной 50.</p></li>
<li><p>Установите максимальный размер диаграмм равным 14 (мм). Диаграмма такого диаметра будет соответстовать объекту с указанным максимальным значением атрибута.</p>
<blockquote>
<p>В QGIS есть ещё одна полезная опция — увеличение размера диаграмм. Она применяется, если при масштабировании некоторые диаграммы становятся слишком малы. В таком случае их размер увеличивается до минимального (задаваемого пользователем) порогового значения. В этом упражнении она нам не требуется</p>
</blockquote></li>
<li><p>Перейдите на вкладку «Размещение» и проверьте, что для ваших диаграмм указана опция размещения над центроидом.</p></li>
<li><p>Перейдите на вкладку «Легенда». Здесь вы настроите комбинацию условных знаков для отображения в легенде. Нажмите кнопку «Показать значки для размера диаграмм в легенде» (<em>Show Legend Entries for Diagram Size</em>).</p></li>
<li><p>Настройте отображение значков следующим образом:</p>
<ul>
<li>«Коллапсируйте» значки легенды;</li>
<li>В качестве символа используйте белый маркер круглой формы с тёмно-серой обводкой;</li>
<li>Задайте заголовок («Число домов»);</li>
</ul></li>
</ol>
<p>Интерфейс настройки диаграммы должен принять приблизительно следующий вид:</p>
<p><img src="images/Ex05_Vectorization/diagram2.png" /></p>
<p><strong>Важное замечание:</strong> конечно, такой набор значков не является картографически корректным для создания легенды к абсолютной непрерывной шкале значков. По состоянию на 28 февраля 2021 г. ни один широко используемый ГИС-пакет не может сделать легенду к размерам кругов картодиаграммы согласно принятым картографическим правилам. Легенды к таким картам следует составлять или исправлять вручную.</p>
<p>По окончанию настройки символов окно QGIS будет выглядеть следующим образом:</p>
<p><img src="images/Ex05_Vectorization/map_diagrams.png" /></p>
<ol start="11" style="list-style-type: decimal">
<li>Добавьте базовую карту из сети Интернет. Самостоятельно решите, какую базовую карту использовать. Если вам покажется, что изображение базовой карты визуально «подавляет» слой избирательных округов, используйте настройки прозрачности. Сделайте снимок экрана.</li>
</ol>
<p><kbd><strong>Снимок экрана №3.</strong> Окно QGIS с настроенной символикой</kbd>.</p>
</div>
<div id="digitizing-layout" class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> Создание и экспорт макета компоновки</h2>
<p><a href="digitizing-districts.html#digitizing-districts">В начало упражнения ⇡</a></p>
<p>Изображение, которое вы видите во фрейме данных, можно экспортировать «как есть» (с помощью опции «Проекты» — «Импорт/экспорт» — «Экспортировать карту как изображение…»). Однако для картографических целей, как правило, формируется <strong>компоновка карты</strong>. На листе заданного формата размещается картографическое изображение, добавляется название, легенда, масштабная линейка и элементы зарамочного оформления.</p>
<p>Сейчас мы создадим макет компоновки с расчётом на то, что итоговая карта-схема будет вставлена в отчёт.</p>
<ol style="list-style-type: decimal">
<li><p>Создайте новый макет компоновки («Проект» — «Создать Макет…») или <code>Ctrl+P</code>.</p></li>
<li><p>В качестве названия макета введите свою фамилию.</p></li>
</ol>
<p>После ввода названия откроется окно компоновки (<em>Layout</em>) <img src="images/Ex01/Layout.png" alt="Layout" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Измените ориентацию страницы с альбомной, предлагаемой по умолчанию, на портретную, соответствующую ориентации страниц отчёта. На изображении ниже показано, как это сделать.</li>
</ol>
<div class="figure">
<img src="images/Ex05_Vectorization/album_portrait.gif" alt="" />
<p class="caption">Layout</p>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Добавьте картографическое изображение (фрейм карты) на макет</li>
</ol>
<div class="figure">
<img src="images/Ex05_Vectorization/add_map.gif" alt="" />
<p class="caption">Add map</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li><p>Измените положение и размер фрейма карты таким образом, чтобы на листе оставались поля: левое: 3 см, правое: 1,5 см.</p></li>
<li><p>Изменяя высоту фрейма, масштаб изображения, а также перемещая картографическое изображение внутри фрейма при помощи кнопки <img src="images/Ex05_Vectorization/button_moveelement.png" /> «Переместить содержимое элемента», добейтесь вида фрейма, аналогичного рисунку ниже:</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/map_frame.png" /></p>
<ol start="7" style="list-style-type: decimal">
<li><p>Не закрывая окно макета, вернитесь в основное окно QGIS и переименуйте слой избирательных округов. Назовите его «Избирательные округа».</p></li>
<li><p>Добавьте на макет легенду с помощью кнопки <img src="images/Ex05_Vectorization/button_addlegend.png" />. Поместите легенду в северо-восточном углу изображения.</p></li>
<li><p>Отключите автообновление легенды, чтобы удалить ненужные записи, как показано на рисунке ниже:</p></li>
</ol>
<p><img src="images/Ex05_Vectorization/legend_deleteelements.gif" /></p>
<ol start="10" style="list-style-type: decimal">
<li><p>В свойствах элемента легенды найдите вкладку отступ и удалите (установите равным нулю) отступ под заголовком легенды.</p></li>
<li><p>Добавьте масштабную линейку с помощью кнопки <img src="images/Ex05_Vectorization/button_addscalebar.png" />. Разместите масштабную линейку в юго-западном углу изображения. При необходимости измените обозначение единиц измерения.</p></li>
<li><p>Экспортируйте карту-схему («Макет» — «Экспорт в Изображение» или кнопка <img src="images/Ex05_Vectorization/button_exporttoraster.png" />) с разрешением 96 точек на дюйм (dpi). Используйте опцию «Обрезать по содержимому» (<em>Crop to Content</em>).</p>
<blockquote>
<p>Примечание: разрешение 96 точек на дюйм считается довольно низким для картографических целей. Изображения с таким разрешением не годятся для печати, но иногда могут быть пригодны для размещения в Интернете. ВЫ снижаете разрешение для того, чтобы сохранить читаемость базовой карты.</p>
</blockquote></li>
<li><p>Вставьте полученное изображение в отчётный файл.</p></li>
<li><p>Ответьте на контрольные вопросы в конце отчётного файла</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="raster-reference.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="map-ref-districts.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["qgis-course.pdf", "qgis-course.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
