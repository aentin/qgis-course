<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Упражнение 14 Адресное геокодирование и ядерная оценка плотности | Основы геоинформатики: практикум в QGIS</title>
  <meta name="description" content="Упражнение 14 Адресное геокодирование и ядерная оценка плотности | Основы геоинформатики: практикум в QGIS" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Упражнение 14 Адресное геокодирование и ядерная оценка плотности | Основы геоинформатики: практикум в QGIS" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Упражнение 14 Адресное геокодирование и ядерная оценка плотности | Основы геоинформатики: практикум в QGIS" />
  <meta name="github-repo" content="aentin/qgis-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Упражнение 14 Адресное геокодирование и ядерная оценка плотности | Основы геоинформатики: практикум в QGIS" />
  
  <meta name="twitter:description" content="Упражнение 14 Адресное геокодирование и ядерная оценка плотности | Основы геоинформатики: практикум в QGIS" />
  

<meta name="author" content="Андрей Энтин, Тимофей Самсонов, Андрей Карпачевский" />


<meta name="date" content="2025-04-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="networks.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Основы геоинформатики</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Общие сведения</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#учебные-материалы"><i class="fa fa-check"></i>Учебные материалы</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#программное-обеспечение-для-работы"><i class="fa fa-check"></i>Программное обеспечение для работы</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#macos"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#linux"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Основы работы с QGIS</b></span></li>
<li class="chapter" data-level="1" data-path="map-design-general.html"><a href="map-design-general.html"><i class="fa fa-check"></i><b>1</b> Создание общегеографической карты</a>
<ul>
<li class="chapter" data-level="1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-intro"><i class="fa fa-check"></i><b>1.1</b> Введение</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-checklist"><i class="fa fa-check"></i><b>1.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-begin"><i class="fa fa-check"></i><b>1.2</b> Начало работы</a></li>
<li class="chapter" data-level="1.3" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-projection"><i class="fa fa-check"></i><b>1.3</b> Настройка системы координат</a></li>
<li class="chapter" data-level="1.4" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-navigation"><i class="fa fa-check"></i><b>1.4</b> Навигация по карте</a></li>
<li class="chapter" data-level="1.5" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-relief"><i class="fa fa-check"></i><b>1.5</b> Оформление изображения рельефа</a></li>
<li class="chapter" data-level="1.6" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-vector"><i class="fa fa-check"></i><b>1.6</b> Добавление векторных наборов данных</a></li>
<li class="chapter" data-level="1.7" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-attributes"><i class="fa fa-check"></i><b>1.7</b> Использование атрибутов объектов при визуализации</a></li>
<li class="chapter" data-level="1.8" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-labels"><i class="fa fa-check"></i><b>1.8</b> Подписи</a></li>
<li class="chapter" data-level="1.9" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-layout"><i class="fa fa-check"></i><b>1.9</b> Настройка компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="map-design-world.html"><a href="map-design-world.html"><i class="fa fa-check"></i><b>2</b> Создание политической карты мира</a>
<ul>
<li class="chapter" data-level="2.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-intro"><i class="fa fa-check"></i><b>2.1</b> Введение</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-checklist"><i class="fa fa-check"></i><b>2.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-begin"><i class="fa fa-check"></i><b>2.2</b> Начало работы</a></li>
<li class="chapter" data-level="2.3" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-input-data"><i class="fa fa-check"></i><b>2.3</b> Загрузка исходных данных</a></li>
<li class="chapter" data-level="2.4" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-qgis-project"><i class="fa fa-check"></i><b>2.4</b> Создание ГИС-проекта и загрузка данных в проект</a></li>
<li class="chapter" data-level="2.5" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-crs"><i class="fa fa-check"></i><b>2.5</b> Настройка системы координат проекта</a></li>
<li class="chapter" data-level="2.6" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-colorbrewer"><i class="fa fa-check"></i><b>2.6</b> Окраска стран в разные цвета</a></li>
<li class="chapter" data-level="2.7" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-other-layers"><i class="fa fa-check"></i><b>2.7</b> Добавление других слоёв на карту</a></li>
<li class="chapter" data-level="2.8" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-layout"><i class="fa fa-check"></i><b>2.8</b> Создание компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html"><i class="fa fa-check"></i><b>3</b> Создание карты четвертичных отложений</a>
<ul>
<li class="chapter" data-level="3.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-intro"><i class="fa fa-check"></i><b>3.1</b> Введение</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-checklist"><i class="fa fa-check"></i><b>3.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-begin"><i class="fa fa-check"></i><b>3.2</b> Начало работы</a></li>
<li class="chapter" data-level="3.3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-data"><i class="fa fa-check"></i><b>3.3</b> Добавление данных в проект</a></li>
<li class="chapter" data-level="3.4" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-classification"><i class="fa fa-check"></i><b>3.4</b> Применение готового стиля к слою</a></li>
<li class="chapter" data-level="3.5" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-csv"><i class="fa fa-check"></i><b>3.5</b> Создание набора пространственных данных из таблицы с координатами</a></li>
<li class="chapter" data-level="3.6" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-final"><i class="fa fa-check"></i><b>3.6</b> Оформление карты</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="map-design-population.html"><a href="map-design-population.html"><i class="fa fa-check"></i><b>4</b> Создание социально-экономической карты</a>
<ul>
<li class="chapter" data-level="4.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-intro"><i class="fa fa-check"></i><b>4.1</b> Введение</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-checklist"><i class="fa fa-check"></i><b>4.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-begin"><i class="fa fa-check"></i><b>4.2</b> Начало работы</a></li>
<li class="chapter" data-level="4.3" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-change-crs"><i class="fa fa-check"></i><b>4.3</b> Изменение системы координат проекта</a></li>
<li class="chapter" data-level="4.4" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-fill-color"><i class="fa fa-check"></i><b>4.4</b> Создание картограмм</a></li>
<li class="chapter" data-level="4.5" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-symbols"><i class="fa fa-check"></i><b>4.5</b> Создание шкалы значков</a></li>
<li class="chapter" data-level="4.6" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-labels"><i class="fa fa-check"></i><b>4.6</b> Добавление подписей значков</a></li>
<li class="chapter" data-level="4.7" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-basemap"><i class="fa fa-check"></i><b>4.7</b> Настройка условных знаков географической основы</a></li>
<li class="chapter" data-level="4.8" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-layout"><i class="fa fa-check"></i><b>4.8</b> Создание макета карты</a></li>
</ul></li>
<li class="part"><span><b>II Редактирование данных в ГИС</b></span></li>
<li class="chapter" data-level="5" data-path="raster-reference.html"><a href="raster-reference.html"><i class="fa fa-check"></i><b>5</b> Привязка графических материалов</a>
<ul>
<li class="chapter" data-level="5.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-intro"><i class="fa fa-check"></i><b>5.1</b> Введение</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-control"><i class="fa fa-check"></i><b>5.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-input"><i class="fa fa-check"></i><b>5.2</b> Привязка растра по меткам координат</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-select-coordinate-system"><i class="fa fa-check"></i><b>5.2.1</b> Определение целевой системы координат</a></li>
<li class="chapter" data-level="5.2.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-topomap"><i class="fa fa-check"></i><b>5.2.2</b> Привязка листа топографической карты</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-basemap"><i class="fa fa-check"></i><b>5.3</b> Добавление базовой карты</a></li>
<li class="chapter" data-level="5.4" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-frommap"><i class="fa fa-check"></i><b>5.4</b> Использование координат с базовой карты</a></li>
<li class="chapter" data-level="5.5" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-accuracy"><i class="fa fa-check"></i><b>5.5</b> Оценка точности привязки</a></li>
<li class="chapter" data-level="5.6" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-linear"><i class="fa fa-check"></i><b>5.6</b> Интерактивная привязка растров на основе аффинного преобразования</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html"><i class="fa fa-check"></i><b>6</b> Ручная векторизация растра</a>
<ul>
<li class="chapter" data-level="6.1" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-intro"><i class="fa fa-check"></i><b>6.1</b> Введение</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-control"><i class="fa fa-check"></i><b>6.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-basedata"><i class="fa fa-check"></i><b>6.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="6.3" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-points"><i class="fa fa-check"></i><b>6.3</b> Создание точечных объектов</a></li>
<li class="chapter" data-level="6.4" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-lines"><i class="fa fa-check"></i><b>6.4</b> Создание линейных объектов</a></li>
<li class="chapter" data-level="6.5" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-polygons"><i class="fa fa-check"></i><b>6.5</b> Создание полигональных объектов</a></li>
<li class="chapter" data-level="6.6" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-layout"><i class="fa fa-check"></i><b>6.6</b> Оформление макета компоновки</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="query.html"><a href="query.html"><i class="fa fa-check"></i><b>7</b> Пространственные и атрибутивные запросы</a>
<ul>
<li class="chapter" data-level="7.1" data-path="query.html"><a href="query.html#query-intro"><i class="fa fa-check"></i><b>7.1</b> Введение</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="query.html"><a href="query.html#query-control"><i class="fa fa-check"></i><b>7.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="query.html"><a href="query.html#query-basedata"><i class="fa fa-check"></i><b>7.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="7.3" data-path="query.html"><a href="query.html#query-new-geopackage"><i class="fa fa-check"></i><b>7.3</b> Создание набора пространственных данных</a></li>
<li class="chapter" data-level="7.4" data-path="query.html"><a href="query.html#query-drawing"><i class="fa fa-check"></i><b>7.4</b> Векторизация районов</a></li>
<li class="chapter" data-level="7.5" data-path="query.html"><a href="query.html#query-query"><i class="fa fa-check"></i><b>7.5</b> Пространственные и атрибутивные запросы</a></li>
<li class="chapter" data-level="7.6" data-path="query.html"><a href="query.html#query-diagrams"><i class="fa fa-check"></i><b>7.6</b> Визуализация слоя при помощи картодиаграмм</a></li>
<li class="chapter" data-level="7.7" data-path="query.html"><a href="query.html#query-layout"><i class="fa fa-check"></i><b>7.7</b> Создание и экспорт макета компоновки</a></li>
</ul></li>
<li class="part"><span><b>III Векторный анализ</b></span></li>
<li class="chapter" data-level="8" data-path="geometry.html"><a href="geometry.html"><i class="fa fa-check"></i><b>8</b> Геометрические операции с векторными объектами</a>
<ul>
<li class="chapter" data-level="8.1" data-path="geometry.html"><a href="geometry.html#geometry-intro"><i class="fa fa-check"></i><b>8.1</b> Введение</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="geometry.html"><a href="geometry.html#geometry-control"><i class="fa fa-check"></i><b>8.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="8.1.2" data-path="geometry.html"><a href="geometry.html#geometry-annotation"><i class="fa fa-check"></i><b>8.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="geometry.html"><a href="geometry.html#geometry-dissolve"><i class="fa fa-check"></i><b>8.2</b> Объединение контуров схемы четвертичных отложений</a></li>
<li class="chapter" data-level="8.3" data-path="geometry.html"><a href="geometry.html#geometry-buffer"><i class="fa fa-check"></i><b>8.3</b> Построение буферных зон</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="geometry.html"><a href="geometry.html#geometry-buffer-constant"><i class="fa fa-check"></i><b>8.3.1</b> Буферные зоны постоянной ширины</a></li>
<li class="chapter" data-level="8.3.2" data-path="geometry.html"><a href="geometry.html#geometry-buffer-variable"><i class="fa fa-check"></i><b>8.3.2</b> Построение буферных зон переменной ширины</a></li>
<li class="chapter" data-level="8.3.3" data-path="geometry.html"><a href="geometry.html#geometry-buffer-other"><i class="fa fa-check"></i><b>8.3.3</b> Буферные зоны других объектов</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="geometry.html"><a href="geometry.html#geometry-selection"><i class="fa fa-check"></i><b>8.4</b> Сохранение выборки в новую таблицу</a></li>
<li class="chapter" data-level="8.5" data-path="geometry.html"><a href="geometry.html#geometry-erase"><i class="fa fa-check"></i><b>8.5</b> Нахождение геометрической разности объектов</a></li>
<li class="chapter" data-level="8.6" data-path="geometry.html"><a href="geometry.html#geometry-zonal-stat"><i class="fa fa-check"></i><b>8.6</b> Расчёт зональной статистики</a></li>
<li class="chapter" data-level="8.7" data-path="geometry.html"><a href="geometry.html#geometry-final"><i class="fa fa-check"></i><b>8.7</b> Составление итоговой схемы</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="overlay.html"><a href="overlay.html"><i class="fa fa-check"></i><b>9</b> Анализ пространственных взаимосвязей</a>
<ul>
<li class="chapter" data-level="9.1" data-path="overlay.html"><a href="overlay.html#overlay-intro"><i class="fa fa-check"></i><b>9.1</b> Введение</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="overlay.html"><a href="overlay.html#overlay-control"><i class="fa fa-check"></i><b>9.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="9.1.2" data-path="overlay.html"><a href="overlay.html#overlay-annotation"><i class="fa fa-check"></i><b>9.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="overlay.html"><a href="overlay.html#overlay-vectors"><i class="fa fa-check"></i><b>9.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="9.3" data-path="overlay.html"><a href="overlay.html#overlay-intersect"><i class="fa fa-check"></i><b>9.3</b> Оверлей слоев методом пересечения</a></li>
<li class="chapter" data-level="9.4" data-path="overlay.html"><a href="overlay.html#overlay-merge"><i class="fa fa-check"></i><b>9.4</b> Слияние результатов пересечения с целью получения показателя пространственной связи</a></li>
<li class="chapter" data-level="9.5" data-path="overlay.html"><a href="overlay.html#overlay-sumarea-subtypes"><i class="fa fa-check"></i><b>9.5</b> Объединение подтипов почв для подсчёта суммарной площади</a></li>
<li class="chapter" data-level="9.6" data-path="overlay.html"><a href="overlay.html#overlay-fieldcalc"><i class="fa fa-check"></i><b>9.6</b> Расчёт площадей объектов</a></li>
<li class="chapter" data-level="9.7" data-path="overlay.html"><a href="overlay.html#overlay-join"><i class="fa fa-check"></i><b>9.7</b> Соединение таблиц по названию подтипа почв</a></li>
<li class="chapter" data-level="9.8" data-path="overlay.html"><a href="overlay.html#overlay-resulting"><i class="fa fa-check"></i><b>9.8</b> Вычисление результирующих значений показателя связи</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="spatrelations.html"><a href="spatrelations.html"><i class="fa fa-check"></i><b>10</b> Анализ пространственных соотношений</a>
<ul>
<li class="chapter" data-level="10.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-intro"><i class="fa fa-check"></i><b>10.1</b> Введение</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-control"><i class="fa fa-check"></i><b>10.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="10.1.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-annotation"><i class="fa fa-check"></i><b>10.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-vizual"><i class="fa fa-check"></i><b>10.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="10.3" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-area"><i class="fa fa-check"></i><b>10.3</b> Расчёт площадей объектов</a></li>
<li class="chapter" data-level="10.4" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-overlay"><i class="fa fa-check"></i><b>10.4</b> Оверлей векторных наборов данных</a></li>
<li class="chapter" data-level="10.5" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-join"><i class="fa fa-check"></i><b>10.5</b> Соединение таблиц по ключевому полю</a></li>
<li class="chapter" data-level="10.6" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-other"><i class="fa fa-check"></i><b>10.6</b> Расчёт площадей, не покрытых объектами</a></li>
<li class="chapter" data-level="10.7" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-symbology"><i class="fa fa-check"></i><b>10.7</b> Настройка символики</a></li>
</ul></li>
<li class="part"><span><b>IV Растровый анализ</b></span></li>
<li class="chapter" data-level="11" data-path="weighted-overlay.html"><a href="weighted-overlay.html"><i class="fa fa-check"></i><b>11</b> Оптимизация местоположения</a>
<ul>
<li class="chapter" data-level="11.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-intro"><i class="fa fa-check"></i><b>11.1</b> Введение</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-control"><i class="fa fa-check"></i><b>11.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="11.1.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-annotation"><i class="fa fa-check"></i><b>11.1.2</b> Аннотация</a></li>
<li class="chapter" data-level="11.1.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-warning"><i class="fa fa-check"></i><b>11.1.3</b> Прежде чем начать…</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-init"><i class="fa fa-check"></i><b>11.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="11.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-slopes"><i class="fa fa-check"></i><b>11.3</b> Расчет углов наклона</a></li>
<li class="chapter" data-level="11.4" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-distances"><i class="fa fa-check"></i><b>11.4</b> Расчет расстояний</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-roads"><i class="fa fa-check"></i><b>11.4.1</b> Расстояния до дорог</a></li>
<li class="chapter" data-level="11.4.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-streams"><i class="fa fa-check"></i><b>11.4.2</b> Водотоки</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass"><i class="fa fa-check"></i><b>11.5</b> Переклассификация наборов данных</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-distance"><i class="fa fa-check"></i><b>11.5.1</b> Переклассификация растров расстояний</a></li>
<li class="chapter" data-level="11.5.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-slope"><i class="fa fa-check"></i><b>11.5.2</b> Переклассификация растра крутизны</a></li>
<li class="chapter" data-level="11.5.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#преобразование-слоя-типов-землепользования-в-растровое-представление"><i class="fa fa-check"></i><b>11.5.3</b> Преобразование слоя типов землепользования в растровое представление</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-combination"><i class="fa fa-check"></i><b>11.6</b> Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</a></li>
<li class="chapter" data-level="11.7" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-final-decision"><i class="fa fa-check"></i><b>11.7</b> Окончательный выбор участка</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="hydrodem.html"><a href="hydrodem.html"><i class="fa fa-check"></i><b>12</b> Гидрологическое моделирование на основе ЦМП</a>
<ul>
<li class="chapter" data-level="12.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-intro"><i class="fa fa-check"></i><b>12.1</b> Введение</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-control"><i class="fa fa-check"></i><b>12.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="12.1.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-annotation"><i class="fa fa-check"></i><b>12.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-init"><i class="fa fa-check"></i><b>12.2</b> Предварительные операции</a></li>
<li class="chapter" data-level="12.3" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-preprocessing"><i class="fa fa-check"></i><b>12.3</b> Подготовка ЦМП к анализу</a></li>
<li class="chapter" data-level="12.4" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-fill"><i class="fa fa-check"></i><b>12.4</b> Гидрологическая коррекция ЦМП</a></li>
<li class="chapter" data-level="12.5" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-flowdir"><i class="fa fa-check"></i><b>12.5</b> Расчёт направлений стока</a></li>
<li class="chapter" data-level="12.6" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-flowacc"><i class="fa fa-check"></i><b>12.6</b> Расчёт водосборной площади</a></li>
<li class="chapter" data-level="12.7" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-basin"><i class="fa fa-check"></i><b>12.7</b> Определение границ бассейна р. Протвы</a></li>
<li class="chapter" data-level="12.8" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-network"><i class="fa fa-check"></i><b>12.8</b> Создание модели водотоков на основе водосборной площади</a></li>
<li class="chapter" data-level="12.9" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-watersheds"><i class="fa fa-check"></i><b>12.9</b> Создание покрытия частных водосборов</a></li>
<li class="chapter" data-level="12.10" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-mapping"><i class="fa fa-check"></i><b>12.10</b> Представление результата в виде перспективного изображения</a></li>
</ul></li>
<li class="part"><span><b>V Сетевой анализ</b></span></li>
<li class="chapter" data-level="13" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>13</b> Анализ транспортных сетей</a>
<ul>
<li class="chapter" data-level="13.1" data-path="networks.html"><a href="networks.html#networks-intro"><i class="fa fa-check"></i><b>13.1</b> Введение</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="networks.html"><a href="networks.html#networks-control"><i class="fa fa-check"></i><b>13.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="13.1.2" data-path="networks.html"><a href="networks.html#networks-annotation"><i class="fa fa-check"></i><b>13.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="networks.html"><a href="networks.html#networks-init"><i class="fa fa-check"></i><b>13.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="13.3" data-path="networks.html"><a href="networks.html#networks-query"><i class="fa fa-check"></i><b>13.3</b> Выбор элементов дорожной сети</a></li>
<li class="chapter" data-level="13.4" data-path="networks.html"><a href="networks.html#networks-route"><i class="fa fa-check"></i><b>13.4</b> Построение маршрута</a></li>
<li class="chapter" data-level="13.5" data-path="networks.html"><a href="networks.html#networks-isochrones"><i class="fa fa-check"></i><b>13.5</b> Расчёт изохрон</a></li>
<li class="chapter" data-level="13.6" data-path="networks.html"><a href="networks.html#networks-matrix"><i class="fa fa-check"></i><b>13.6</b> Работа с матрицей «источник-назначение»</a></li>
</ul></li>
<li class="part"><span><b>VI Точечные процессы</b></span></li>
<li class="chapter" data-level="14" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>14</b> Адресное геокодирование и ядерная оценка плотности</a>
<ul>
<li class="chapter" data-level="14.1" data-path="geocoding.html"><a href="geocoding.html#geoding-intro"><i class="fa fa-check"></i><b>14.1</b> Введение</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-control"><i class="fa fa-check"></i><b>14.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="14.1.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-annotation"><i class="fa fa-check"></i><b>14.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-input"><i class="fa fa-check"></i><b>14.2</b> Импорт исходных данных в QGIS</a></li>
<li class="chapter" data-level="14.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-debug"><i class="fa fa-check"></i><b>14.3</b> Тестирование работы сервиса геокодирования</a></li>
<li class="chapter" data-level="14.4" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch"><i class="fa fa-check"></i><b>14.4</b> Пакетное геокодирование</a></li>
<li class="chapter" data-level="14.5" data-path="geocoding.html"><a href="geocoding.html#geocoding-kde"><i class="fa fa-check"></i><b>14.5</b> Моделирование плотности объявлений</a></li>
<li class="chapter" data-level="14.6" data-path="geocoding.html"><a href="geocoding.html#geocoding-mapping"><i class="fa fa-check"></i><b>14.6</b> Картографирование плотности объявлений</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Основы геоинформатики: практикум в QGIS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="geocoding" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">Упражнение 14</span> Адресное геокодирование и ядерная оценка плотности<a href="geocoding.html#geocoding" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex14.zip">Архив с исходными данными</a></p>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex14_%D0%BE%D1%82%D1%87%D1%91%D1%82.docx">Контрольный лист</a></p>
<p><strong>Внимание! Ваш преподаватель может предоставить вам другие исходные данные для выполнения этого упражнения</strong>: <a href="https://drive.google.com/drive/folders/1-49SDiZutkI8iyMn-3q8z4B67hON8JeG?usp=sharing" target="blank">альтернативные исходные таблицы адресов</a>. При возникновении противоречий следуйте указаниям преподавателя!</p>
<p>Для выполнения этого упражнения вам потребуется веб-браузер с доступом в Интернет. Перед началом выполнения упражнения убедитесь, что у вас есть всё необходимое.</p>
<div id="geoding-intro" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> Введение<a href="geocoding.html#geoding-intro" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Цель задания</strong> — научиться создавать новые наборы пространственных данных с использованием геокодирования, визуализировать множества точек с помощью ядерной оценки плотности.</p>
<p><strong>Необходимая теоретическая подготовка:</strong> модели пространственных данных, модели пространственных объектов, базы пространственных объектов, системы координат, геокодирование, адресное геокодирование, ядерная оценка плотности</p>
<p><strong>Необходимая практическая подготовка:</strong> Знание основных компонент интерфейса QGIS (менеджер источников данных, таблица слоёв, фрейм карты, менеджер компоновок). Работа с различными форматами источников пространственных данных . Настройка символики и подписей объектов. Владение базовыми ГИС-технологиями.</p>
<p><strong>Исходные данные:</strong> таблица адресов недвижимости с ресурса <a href="https://www.cian.ru/">ЦИАН</a></p>
<p><strong>Результат:</strong> геокодированные точки объявлений о продаже недвижимости, карта плотности объявлений</p>
<div id="geocoding-control" class="section level3 hasAnchor" number="14.1.1">
<h3><span class="header-section-number">14.1.1</span> Контрольный лист<a href="geocoding.html#geocoding-control" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Загрузить таблицу адресов в QGIS</li>
<li>Выполнить геокодирование с использованием сервиса Nominatim</li>
<li>Проанализировать результат, определить проблемы, мешающие геокодированию</li>
<li>Исправить таблицу в соответсвии с выявленными проблемами</li>
<li>Повторно выполнить геокодирование, получить координаты точек, заданных адресами</li>
<li>Выполнить ядерную оценку плотности полученных точек</li>
<li>Визуализировать результат в виде карты-схемы</li>
</ul>
</div>
<div id="geocoding-annotation" class="section level3 hasAnchor" number="14.1.2">
<h3><span class="header-section-number">14.1.2</span> Аннотация<a href="geocoding.html#geocoding-annotation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Геокодирование (англ. <em>geocoding</em>) — это определение координат объектов по их географическим текстовым описаниям, которые, как правило, выражены в виде адресов и/или почтовых кодов. Геокодирование широко применяется в тех сферах, где входящая информация поступает массово, но не имеет прямой географической привязки. Примеры такой информации: места дорожно-транспортных происшествий, адреса объектов недвижимости для продажи или сдачи в аренду, IP-адреса отправителей и получателей сообщений в сети Интернет.</p>
<p>Для обеспечения геокодирования необходимо иметь обширную и постоянно обновляемую базу пространственных данных, где каждому адресу сопоставлены географические координаты. Другой компонент геокодирования — подсистема парсинга адреса, которая преобразует поданную на вход текстовую строку в вид, пригодный для автоматического распознавания геокодером.</p>
<p>Оперативное и достоверное геокодирование представляет большой интерес для различных групп пользователей — от служб доставок до спасателей и полиции. В то же время, для обеспечения пригодности результатов геокодирования требуется создать и поддерживать в актуальном состоянии обширную базу пространственных данных, а также предусмотреть надёжный интерфейс для обращения к сервису. Это превращает геокодирование в конкурентную бизнес-услугу. Существует ряд коммерческих сервисов, предоставляющих услуги геокодирования: <a href="https://pickpoint.io/ru">PickPoint</a>, <a href="https://developer.mapquest.com/documentation/geocoding-api/">MapQuest</a>, <a href="https://locationiq.com/geocoding">LocationIQ</a>; почти у всех из них есть «демонстрационный» бесплатный режим с ограничением по количеству запросов. Крупные картографические интернет-сервисы, такие, как Google Maps или Яндекс.Карты, предоставляют <a href="https://developers.google.com/maps/documentation/javascript/geocoding">свои</a> <a href="https://yandex.ru/dev/maps/geocoder/doc/desc/concepts/about.html">сервисы</a> геокодирования на похожих условиях. Из открытых решений популярностью пользуется сервис <a href="https://nominatim.org/">Nominatim</a>, использующий данные OpenStreetMap. Результаты геокодирования с помощью Nominatim проигрывают в точности и оперативности результатам коммерческих сервисов, но всё же пригодны для использования в научных и учебных целях.</p>
<p>Мы воспользуемся сервисом геокодирования Nominatim, чтобы нанести на карту точки, соответствующие объявлениям о продаже недвижимости, предоставленные сайтом <a href="https://www.cian.ru/">ЦИАН</a>.</p>
</div>
</div>
<div id="geocoding-input" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> Импорт исходных данных в QGIS<a href="geocoding.html#geocoding-input" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="geocoding.html#geocoding">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Скопируйте исходные данные к упражнению в свою рабочую директорию. Создайте проект QGIS и разместите его в вашей рабочей директории.</p></li>
<li><p>Установите модуль <strong>Spreadsheet Layers</strong>. Этот модуль позволяет импортировать таблицы Excel напрямую в QGIS. Модуль доступен в репозитории QGIS, поэтому достаточно ввести его имя в строке поиска.</p></li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/Spreadsheet01.png" alt="Модуль Spreadsheet Layers в окне управления модулями QGIS" />
<div class="figcaption">Модуль Spreadsheet Layers в окне управления модулями QGIS</div>
</div>
<ol start="3" style="list-style-type: decimal">
<li>После установки модуля найдите опцию импорта табличных данных: меню «Слой» — «Добавить слой» — «Добавить слой из таблицы» («Add Spreadsheet Layer»).</li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/Spreadsheet02.png" alt="Модуль Spreadsheet Layers в окне управления модулями QGIS" />
<div class="figcaption">Модуль Spreadsheet Layers в окне управления модулями QGIS</div>
</div>
<ol start="4" style="list-style-type: decimal">
<li>В открывшемся окне укажите путь к файлу Excel и страницу, с которой требуется загрузить данные. Выходной слой назовите по шаблону <code>Адреса - %Фамилия%</code>, где <code>%Фамилия%</code> — ваша фамилия. Укажите, что заголовки столбцов должны быть взяты из первой строки файла.</li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/Spreadsheet03.png" alt="Инструмент загрузки табличных данных в QGIS" />
<div class="figcaption">Инструмент загрузки табличных данных в QGIS</div>
</div>
<p>При необходимости на этом этапе можно изменить типы данных для столбцов, но в нашем упражнении такой необходимости нет.</p>
<ol start="6" style="list-style-type: decimal">
<li><p>Нажмите OK, чтобы добавить слой к проекту QGIS.</p></li>
<li><p>Откройте таблицу атрибутов слоя и убедитесь, что данные из таблицы Excel отображаются корректно. Обратите внимание, что никаких пространственных данных в проекте пока нет.</p></li>
</ol>
<div class="float">
<img src="images/Ex08_Geocoding/Spreadsheet04.png" alt="Таблица атрибутов загруженного слоя" />
<div class="figcaption">Таблица атрибутов загруженного слоя</div>
</div>
<ol start="8" style="list-style-type: decimal">
<li>Найдите в загруженном файле столбец, в котором записан адрес объекта недвижимости</li>
</ol>
</div>
<div id="geocoding-debug" class="section level2 hasAnchor" number="14.3">
<h2><span class="header-section-number">14.3</span> Тестирование работы сервиса геокодирования<a href="geocoding.html#geocoding-debug" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="geocoding.html#geocoding">В начало упражнения ⇡</a></p>
<p>Прежде чем начинать «пакетное» геокодирование всего списка, мы возьмём несколько отдельных адресов из него и проверим, насколько хорошо работает сервис распознавания адресов Nominatim. Для этого мы воспользуемся страницей интерфейса отладки Nominatim.</p>
<ol style="list-style-type: decimal">
<li>Откройте страницу интерфейса отладки Nominatim по <a href="https://nominatim.openstreetmap.org/ui/search.html">этой ссылке</a></li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/Nominatim01.png" alt="Интерфейс отладки Nominatim. Используется для тестирования распознавания отдельных адресов" />
<div class="figcaption">Интерфейс отладки Nominatim. Используется для тестирования распознавания отдельных адресов</div>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Скопируйте любой адрес из вашей таблицы и вставьте его в строку поиска (<em>Search</em>). Нажмите кнопку <strong>Search</strong>, чтобы запустить поиск</li>
</ol>
<p>Дальнейшее поведение системы зависит от того, насколько успешно парсер смог «прочитать» адрес. Если вся строка адреса распознана корректно, то в окне карты будет отображён объект, соответствующий найденному адресу.</p>
<div class="float">
<img src="images/Ex14_Geocoding/Nominatim02.png" alt="Пример успешного геокодирования" />
<div class="figcaption">Пример успешного геокодирования</div>
</div>
<p>Если с распознаванием адресов возникли какие-либо трудности, то их можно отследить по выдаче. На рисунке ниже в адресе <code>Москва, Староволынская улица, 12-5</code> распознал всё, кроме номера дома, и выдал в качестве результата объект, соответствующий улице.</p>
<p><img src="images/Ex14_Geocoding/Nominatim03.png" alt="Пример сомнительного результата" />
В этом примере достаточно восстановить букву «к» между номером дома и номером корпуса (<code>12к5</code>), и Nominatim отработает корректно.</p>
<p>В худшем случае геокодер вообще не сможет определить адрес. В примере ниже (<code>Москва, Нежинская улица, 3А, ш. Можайское ( км до МКАД)</code>) геокодер «сломался» уже на названии улицы.</p>
<div class="float">
<img src="images/Ex14_Geocoding/Nominatim04.png" alt="Адрес не распознан" />
<div class="figcaption">Адрес не распознан</div>
</div>
<p>В этом примере проблема решается относительно просто. В строке адреса слишком много лишней информации. Если убрать слова <code>, ш. Можайское ( км до МКАД)</code>, то Nominatim выдаст корректный результат.</p>
<div class="float">
<img src="images/Ex14_Geocoding/Nominatim05.png" alt="После изменения названия улицы адрес распознан корректно" />
<div class="figcaption">После изменения названия улицы адрес распознан корректно</div>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Подберите аналогичные примеры из вашего набора исходных данных и сделайте скриншоты выдачи сервиса отладки Nominatim. Если какие-либо примеры не удаётся найти быстро — пропустите этот шаг, у вас будет возможность сделать его позже. Если какие-либо примеры не удаётся найти совсем, напишите в бланке отчёта «примеров нет» вместо снимка экрана</li>
</ol>
<p><kbd>В отчёт: снимок экрана №1 – успешное распознавание адреса сервисом Nominatim (в ответ на запрос выводится правильный дом)</kbd></p>
<p><kbd>В отчёт: снимок экрана №2 – неточное или неполное распознавание адреса (в ответ на запрос выводится улица, или неправильный дом, или правильный адрес, но в другом населённом пункте)</kbd></p>
<p><kbd>В отчёт: снимок экрана №3 – полностью неудачная попытка распознавания (пустая выдача)</kbd></p>
<p>Мы рассмотрели некоторые потенциальные проблемы с распознаванием адресов, которые возникают при использовании сервиса Nominatim. Следует заметить, что другие, более «продвинутые» сервисы геокодирования могут автоматически распознавать и разрешать проблемы такого рода.</p>
</div>
<div id="geocoding-batch" class="section level2 hasAnchor" number="14.4">
<h2><span class="header-section-number">14.4</span> Пакетное геокодирование<a href="geocoding.html#geocoding-batch" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="geocoding.html#geocoding">В начало упражнения ⇡</a></p>
<p>Теперь можно попытаться выполнить распознавание адресов при помощи Nominatim «пакетно», т. е. сразу для многих адресов (для всех адресов в вашей таблице).</p>
<ol style="list-style-type: decimal">
<li>Откройте панель инструментов и с помощью строки поиска найдите инструмент «Пакетный геокодер Nominatim».</li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/coding00.png" alt="инструмент «Пакетный геокодер Nominatim» в панели инструментов анализа" />
<div class="figcaption">инструмент «Пакетный геокодер Nominatim» в панели инструментов анализа</div>
</div>
<ol start="2" style="list-style-type: decimal">
<li><p>Запустите инструмент и настройте входные параметры. Укажите, что результат должен быть сохранён во временный файл.</p></li>
<li><p>Запустите инстумент и дождитесь, пока он выполнит геокодирование. Для работы инструмента требуется доступ к сети Интернет, а сам процесс может занять 10-15 минут. По окончании работы инструмента не закрывайте его окно, оно нам пригодится.</p></li>
</ol>
<p><img src="images/Ex14_Geocoding/coding01.png" alt="Окно инструмента пакетного геокодирования после окончания работы" />
4. Когда инструмент закончит работу, сделайте снимок экрана целиком.</p>
<p><kbd>В отчёт: снимок экрана №4 – результат геокодирования исходной таблицы адресов</kbd></p>
<ol start="5" style="list-style-type: decimal">
<li><p>Обратите внимание на строки, выделенные жёлтым цветом в журнале инструмента. Таким способом обозначаются нераспознанные объекты. Скопируйте эти строки в отдельный текстовый документ (например, в «Блокнот»)</p></li>
<li><p>Удалите точечный слой с результатом геокодирования и сохраните проект QGIS.</p></li>
</ol>
<p>Теперь нам нужно отредактировать адреса в исходной таблице. QGIS даёт возможность запустить режим редактирования непосредственно для таблицы Excel, но результат такого редактирования не сохраняется в постоянный файл, а само редактирование может привести к полному «исчезновению» всех строк таблицы. Поэтому мы пойдём обходным путём: сначала экспортируем таблицу в формат базы пространственных данных, а затем отредактируем базу, а не исходную таблицу.</p>
<ol start="7" style="list-style-type: decimal">
<li>Нажмите правой кнопкой мыши на таблицу в панели слоёв и выберите опцию «Экспорт» — «Сохранить объекты как…»</li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/export01.png" alt="Контекстное меню с опцией экспорта" />
<div class="figcaption">Контекстное меню с опцией экспорта</div>
</div>
<ol start="8" style="list-style-type: decimal">
<li>Экспортируйте таблицу в вашу рабочую директорию в файл <code>Ex14_%Familia%.gpkg</code> (<code>%Familia%</code> — ваша фамилия латиницей), таблицу внутри Geopackage назовите <code>source_table</code>.</li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/export02.png" alt="Параметры экспорта" />
<div class="figcaption">Параметры экспорта</div>
</div>
<ol start="9" style="list-style-type: decimal">
<li><p>Когда экспорт будет завершён, а таблица добавлена в проект, удалите из проекта старую таблицу.</p></li>
<li><p>Отредактируйте таблицу с адресами — исправьте те адреса, которые вызвали проблемы (см. шаг 5 этого раздела). Используйте <a href="https://nominatim.openstreetmap.org/ui/search.html">интерфейс отладки Nominatim</a>, к которому вы обращались ранее, чтобы подобрать корректно распознаваемую строку для каждого «проблемного» адреса.</p></li>
</ol>
<blockquote>
<p>Примечание: в некоторых вариантах вам, вероятно, не удастся добиться геокодирования отдельных адресов. Игнорируйте такие адреса.</p>
</blockquote>
<ol start="11" style="list-style-type: decimal">
<li>Запустите инструмент геокодирования снова. На этот раз сохраните результат в GeoPackage (<code>Ex14_%Familia%.gpkg</code>) под именем <code>points</code>. Убедитесь, что все адреса (кроме тех, которые вы специально проигнорировали) распознаны. Если какие-либо адреса не распознаны, отредактируйте их, а затем выполните геокодирование снова.</li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/coding02.png" alt="Результат работы инструмента геокодирования" />
<div class="figcaption">Результат работы инструмента геокодирования</div>
</div>
<ol start="12" style="list-style-type: decimal">
<li><p>Добавьте в проект какую-либо базовую карту из сети Интернет, чтобы убедиться, что адреса корректно позционированы. Изучите визуально несколько точек на выбор. Если несколько точек «отлетают» от основного массива данных, удалите их.</p></li>
<li><p>Когда вы убедитесь в корректности позиционирования, удалите из проекта исходную таблицу с адресами, сделайте базовую карту полупрозрачной, а затем сделайте снимок экрана в охвате слоя <code>points</code>.</p></li>
</ol>
<p><kbd>В отчёт: снимок экрана №5 – результат геокодирования отредактированной таблицы адресов</kbd></p>
</div>
<div id="geocoding-kde" class="section level2 hasAnchor" number="14.5">
<h2><span class="header-section-number">14.5</span> Моделирование плотности объявлений<a href="geocoding.html#geocoding-kde" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="geocoding.html#geocoding">В начало упражнения ⇡</a></p>
<p>В результате геокодирования вы получили набор точек, каждая из которых соответствует одному объявлению о продаже недвижимости. При этом точки объявлений с одинаковым адресом будут иметь полностью совпадающие координаты. Поэтому визуальное отображение адресов даёт искажённое представление о распределении продаваемой недвижимости по территории.</p>
<p>Чтобы получить более достоверное распределение, можно перейти от дискретного представления явления (отдельные точки) к континуальному представлению (поле плотности). Для решения этой задачи применяется ядерная оценка плотности (<em>kernel density estimation</em>). Результатом ядерной оценки плотности является растр (регулярная сетка), каждая ячейка которой характеризует плотность явления или его ожидаемое количество.</p>
<blockquote>
<p>Примечание: результат ядерной оценки плотности зачастую называют «тепловой картой» или «теплокартой», поскольку при удачно подобранных графических средствах области высокой концентрации явления выглядят «яркими», «горячими», а области низкой концентрации — «тёмными», «холодными». Несмотря на широкое распространение этих названий, мы не рекомендуем пользоваться ими в географических исследованиях, чтобы избежать путаницы с картами климатических и метеорологических характеристик, где «тепло» и «холодно» используются в прямом смысле.</p>
</blockquote>
<p>Для построения ядерной оценки плотности желательно, чтобы исходные данные были приведены к прямоугольной системе координат, поэтому мы начнём с перепроецирования.</p>
<ol style="list-style-type: decimal">
<li><p>Измените систему координат проекта на какую-либо подходящую систему из числа тех, что могут быть использованы для топографического картографирования на вашей теорритории.</p></li>
<li><p>Перепроецируйте распознанные точки в систему координат проекта («Вектор» — «Управление данными» — «Перепроецировать слой…»). Результат перепроецирования сохраните в тот же GeoPackage, где лежат все предыдущие данные, под именем <code>points_project</code>. После успешного перепроецирования можно удалить из проекта исходные точки.</p></li>
</ol>
<p>Для выполнения ядерной оценки плотности в QGIS имеется инструмент <strong>Тепловая карта (оценка плотности ядер)</strong>. Его можно найти в панели инструментов анализа, в разделе «Интерполяция»</p>
<div class="float">
<img src="images/Ex08_Geocoding/kde00.png" alt="Инструмент ядерной оценки плотности в QGIS" />
<div class="figcaption">Инструмент ядерной оценки плотности в QGIS</div>
</div>
<ol start="3" style="list-style-type: decimal">
<li><p>Запустите инструмент ядерной оценки плотности. В качестве исходного слоя задайте геокодированные точки</p></li>
<li><p>Проверьте предлагаемое значение в поле «Радиус». Если возле поля «Радиус» изображён предупреждающий знак, а предлагаемая единица измерения — градусы, значит, ваш исходный слой сохранён в географической системе координат. Выполните перепроецирование слоя (шаг 14 предыдущего раздела).</p></li>
<li><p>Если с единицами измерения всё в порядке, установите радиус равным 400 м. Это охват области, на которую будет «распространяться» плотность точек.</p></li>
<li><p>Установите размер пиксела по X и по Y равным 10 м. Этого вполне достаточно для аппроксимации.</p></li>
<li><p>Укажите, что результирующий слой (<em>Heatmap</em>) нужно сохранить в вашу рабочую директорию под именем <code>heatmap_%Familia%.tif</code>, где <code>%Familia%</code> — ваша фамилия латинскими буквами</p></li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/kde01.png" alt="Настройки ядерной оценки плотности" />
<div class="figcaption">Настройки ядерной оценки плотности</div>
</div>
<ol start="8" style="list-style-type: decimal">
<li>Запустите инструмент ядерной оценки плотности и дождитесь, пока результат оценки будет добавлен к карте. После этого закройте инструмент ядерной оценки плотности.</li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/kde02.png" alt="Результат ядерной оценки плотности" />
<div class="figcaption">Результат ядерной оценки плотности</div>
</div>
<ol start="9" style="list-style-type: decimal">
<li><p>Если, как в примере выше, у результата геокодирования наблюдаются «трудности» с системой координат, установите для него нужную систему координат в свойствах слоя.</p></li>
<li><p>Поместите слой исходных точек над слоем ядерной оценки плотности, отобразите данные в охвате слоя ядерной оценки плотности и сделайте снимок экрана.</p></li>
</ol>
<p><kbd>В отчёт: снимок экрана №6 – ядерная оценка плотности объявлений о продаже недвижимости</kbd></p>
</div>
<div id="geocoding-mapping" class="section level2 hasAnchor" number="14.6">
<h2><span class="header-section-number">14.6</span> Картографирование плотности объявлений<a href="geocoding.html#geocoding-mapping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="geocoding.html#geocoding">В начало упражнения ⇡</a></p>
<p>Покрытие (растр) ядерной оценки плотности, которое мы получили на предыдущем шаге, уже само по себе пригодно для геоинформационного анализа. В каждой ячейке этого растра записано ожидаемое число объявлений о продаже недвижимости в радиусе 400 м. Однако если вы хотите сделать картографическое изображение из такого набора данных, придётся проделать некоторую дополнительную работу. В этой части упражнения мы настроим визуализацию для растрового слоя, а затем создадим на его основе векторные наборы данных с аналогичной символикой.</p>
<ol style="list-style-type: decimal">
<li><p>Откройте свойства слоя ядерной оценки плотности на вкладке «Стиль». Измените цветовую схему на «Одноканальное псевдоцветное». Округлите максимальное отображаемое значение вверх до ближайшего целого числа, кратного 5. Измените тип интерполяции на «Дискретную», задайте точность подписи равной 0.</p></li>
<li><p>Внизу слева, под таблицей с классами, выберите режим классификации — «Равные интервалы». Справа в той же строке установите число интервалов таким образом, чтобы интервал, отображающиеся выше, в таблице с классами, были «круглыми», т.е. с границами, кратными 5 или 10, как показано на рисунке ниже.</p></li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/kde_symbology_01.png" alt="Настройки отображения ядерной оценки плотности" />
<div class="figcaption">Настройки отображения ядерной оценки плотности</div>
</div>
<ol start="3" style="list-style-type: decimal">
<li><p>Нажмите правой кнопкой на изображение шкалы (градиента) и активируйте опцию «Инвертировать градиент».</p></li>
<li><p>Перейдите на вкладку «Прозрачность» и установите прозрачность слоя равной 50 или 66 %.</p></li>
</ol>
<p>В результате применения описанных настроек вы получите изображение ядерной оценки, аналогичное представленному ниже:</p>
<div class="float">
<img src="images/Ex14_Geocoding/kde_symbology_02.png" alt="Результат ядерной оценки плотности" />
<div class="figcaption">Результат ядерной оценки плотности</div>
</div>
<ol start="5" style="list-style-type: decimal">
<li>В панели слоёв разверните легенду к ядерной оценке плотности и сделайте снимок экрана целиком.</li>
</ol>
<p><kbd>В отчёт: снимок экрана №7 – ядерная оценка плотности объявлений о продаже недвижимости с настроенной символикой</kbd></p>
<p>Мы получили изображение, которое в терминах классической картографии можно было бы описать как псевдоизолинии с послойной окраской — если, конечно, на схему были бы нанесены изолинии. QGIS позволяет сделать на основе растрового покрытия и изолинии, и послойную окраску, и на следующих шагах мы сделаем их.</p>
<ol start="6" style="list-style-type: decimal">
<li>Чтобы создать изолинии на основе растра, запустите инструмент «Растр» — «Извлечение» — «Создать изолинии…». Установите сечение изолиний равным шагу вашей «послойной окраски», результат сохраните в вашу рабочую директорию в формате шейп-файла (не GeoPackage!) под именем <code>contours.shp</code></li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/contours01.png" alt="Изолинии, построенные по растру" />
<div class="figcaption">Изолинии, построенные по растру</div>
</div>
<ol start="7" style="list-style-type: decimal">
<li><p>При необходимости «поправьте» систему координат слоя изолиний.</p></li>
<li><p>Настройте подписи для изолиний. Укажите, что изолинии должны быть подписаны значениями «высот» (поле <code>ELEV</code>, если вы не поменяли его при создании), а подписи должны размещаться непосредственно на линиях.</p></li>
<li><p>Теперь создадим полигоны для изображения послойной окраски. Для этого в панели инструментов найдите инструмент под названием «Полигоны изолиний». Откройте интерфейс этого инструмента.</p></li>
<li><p>Установите «сечение» полигонов равным шагу вашей «послойной окраски», результат сохраните в вашу рабочую директорию в формате шейп-файла (не GeoPackage!) под именем <code>contours.shp</code>.</p></li>
</ol>
<div class="float">
<img src="images/Ex14_Geocoding/contours02.png" alt="Полигоны послойной окраски, построенные по растру" />
<div class="figcaption">Полигоны послойной окраски, построенные по растру</div>
</div>
<ol start="11" style="list-style-type: decimal">
<li><p>При необходимости «поправьте» систему координат слоя послойной окраски.</p></li>
<li><p>Настройте символику для полигонов таким образом, чтобы она была аналогична изображению растра, и при этом отображался только их фон, но не граница. Этого можно добиться следующим образом:</p></li>
</ol>
<ul>
<li>изменить символизацию полигонов на «Символизацию по уникальным значениям»;</li>
<li>в качестве поля для значения взять <code>ELEV_MIN</code> или <code>ELEV_MAX</code>;</li>
<li>в настройке «Знак» зайти в опцию знака и любым способом отключить обводку</li>
<li>нажать кнопку «Классифицировать» внизу таблицы элементов;</li>
<li>после завершения классификации удалить строчку «Все другие значения…»</li>
<li>настроить цветовую шкалу так же, как вы настроили её для растра.</li>
</ul>
<p>После завершения настройки окно свойств слоя послойной окраски будет выглядеть, как показано на рисунке ниже:</p>
<div class="float">
<img src="images/Ex14_Geocoding/contours03.png" alt="Настройки послойной окраски" />
<div class="figcaption">Настройки послойной окраски</div>
</div>
<ol start="13" style="list-style-type: decimal">
<li>Закройте окно свойств слоя послойной окраски. Разместите изолинии над послойной окраской, а исходный растр отключите. Сделайте снимок экрана.</li>
</ol>
<p><kbd>В отчёт: снимок экрана №8 – ядерная оценка плотности (векторное представление)</kbd></p>
<ol start="14" style="list-style-type: decimal">
<li>Создайте картографическое изображение на основе имеющихся пространственных данных. Создайте макет компоновки, добавьте на него картографическое изображение, легенду, масштабную линейку, название карты и сведения об авторстве. Для картографического изображения настройте градусную сетку. В легенде сохраните только те условные знаки, которые соответствуют тематическому содержанию карты; при необходимости самостоятельно отредактируйте подписи.</li>
</ol>
<blockquote>
<p>Примечание для картографов: легенда к изолиниям и псевдоизолиниям должна быть оформлена в виде шкалы, а не в виде отдельных «патчей» — см. примеры ниже. QGIS не обладает функционалом для автоматического сбора легенды, её нужно сделать самостоятельно в QGIS или в векторном графическом редакторе.</p>
</blockquote>
<div class="float">
<img src="images/Ex14_Geocoding/legend.png" alt="Примеры правильной и неправильных легенд к изолиниям" />
<div class="figcaption">Примеры правильной и неправильных легенд к изолиниям</div>
</div>
<ol start="15" style="list-style-type: decimal">
<li>Экспортируйте карту в формат PNG и вставьте её в отчёт.</li>
</ol>
<p><kbd>В отчёт: рисунок №1 – распределение объявлений о продаже недвижимости в выбранном районе</kbd></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="networks.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["qgis-course.pdf", "qgis-course.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
