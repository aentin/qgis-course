<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS</title>
  <meta name="description" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  <meta name="github-repo" content="aentin/qgis-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  
  <meta name="twitter:description" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  

<meta name="author" content="Андрей Энтин, Тимофей Самсонов, Андрей Карпачевский" />


<meta name="date" content="2025-04-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="weighted-overlay.html"/>
<link rel="next" href="networks.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Основы геоинформатики</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Общие сведения</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#учебные-материалы"><i class="fa fa-check"></i>Учебные материалы</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#программное-обеспечение-для-работы"><i class="fa fa-check"></i>Программное обеспечение для работы</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#macos"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#linux"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Основы работы с QGIS</b></span></li>
<li class="chapter" data-level="1" data-path="map-design-general.html"><a href="map-design-general.html"><i class="fa fa-check"></i><b>1</b> Создание общегеографической карты</a>
<ul>
<li class="chapter" data-level="1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-intro"><i class="fa fa-check"></i><b>1.1</b> Введение</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-checklist"><i class="fa fa-check"></i><b>1.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-begin"><i class="fa fa-check"></i><b>1.2</b> Начало работы</a></li>
<li class="chapter" data-level="1.3" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-projection"><i class="fa fa-check"></i><b>1.3</b> Настройка системы координат</a></li>
<li class="chapter" data-level="1.4" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-navigation"><i class="fa fa-check"></i><b>1.4</b> Навигация по карте</a></li>
<li class="chapter" data-level="1.5" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-relief"><i class="fa fa-check"></i><b>1.5</b> Оформление изображения рельефа</a></li>
<li class="chapter" data-level="1.6" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-vector"><i class="fa fa-check"></i><b>1.6</b> Добавление векторных наборов данных</a></li>
<li class="chapter" data-level="1.7" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-attributes"><i class="fa fa-check"></i><b>1.7</b> Использование атрибутов объектов при визуализации</a></li>
<li class="chapter" data-level="1.8" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-labels"><i class="fa fa-check"></i><b>1.8</b> Подписи</a></li>
<li class="chapter" data-level="1.9" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-layout"><i class="fa fa-check"></i><b>1.9</b> Настройка компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="map-design-world.html"><a href="map-design-world.html"><i class="fa fa-check"></i><b>2</b> Создание политической карты мира</a>
<ul>
<li class="chapter" data-level="2.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-intro"><i class="fa fa-check"></i><b>2.1</b> Введение</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-checklist"><i class="fa fa-check"></i><b>2.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-begin"><i class="fa fa-check"></i><b>2.2</b> Начало работы</a></li>
<li class="chapter" data-level="2.3" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-input-data"><i class="fa fa-check"></i><b>2.3</b> Загрузка исходных данных</a></li>
<li class="chapter" data-level="2.4" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-qgis-project"><i class="fa fa-check"></i><b>2.4</b> Создание ГИС-проекта и загрузка данных в проект</a></li>
<li class="chapter" data-level="2.5" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-crs"><i class="fa fa-check"></i><b>2.5</b> Настройка системы координат проекта</a></li>
<li class="chapter" data-level="2.6" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-colorbrewer"><i class="fa fa-check"></i><b>2.6</b> Окраска стран в разные цвета</a></li>
<li class="chapter" data-level="2.7" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-other-layers"><i class="fa fa-check"></i><b>2.7</b> Добавление других слоёв на карту</a></li>
<li class="chapter" data-level="2.8" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-layout"><i class="fa fa-check"></i><b>2.8</b> Создание компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html"><i class="fa fa-check"></i><b>3</b> Создание карты четвертичных отложений</a>
<ul>
<li class="chapter" data-level="3.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-intro"><i class="fa fa-check"></i><b>3.1</b> Введение</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-checklist"><i class="fa fa-check"></i><b>3.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-begin"><i class="fa fa-check"></i><b>3.2</b> Начало работы</a></li>
<li class="chapter" data-level="3.3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-data"><i class="fa fa-check"></i><b>3.3</b> Добавление данных в проект</a></li>
<li class="chapter" data-level="3.4" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-classification"><i class="fa fa-check"></i><b>3.4</b> Применение готового стиля к слою</a></li>
<li class="chapter" data-level="3.5" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-csv"><i class="fa fa-check"></i><b>3.5</b> Создание набора пространственных данных из таблицы с координатами</a></li>
<li class="chapter" data-level="3.6" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-final"><i class="fa fa-check"></i><b>3.6</b> Оформление карты</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="map-design-population.html"><a href="map-design-population.html"><i class="fa fa-check"></i><b>4</b> Создание социально-экономической карты</a>
<ul>
<li class="chapter" data-level="4.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-intro"><i class="fa fa-check"></i><b>4.1</b> Введение</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-checklist"><i class="fa fa-check"></i><b>4.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-begin"><i class="fa fa-check"></i><b>4.2</b> Начало работы</a></li>
<li class="chapter" data-level="4.3" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-change-crs"><i class="fa fa-check"></i><b>4.3</b> Изменение системы координат проекта</a></li>
<li class="chapter" data-level="4.4" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-fill-color"><i class="fa fa-check"></i><b>4.4</b> Создание картограмм</a></li>
<li class="chapter" data-level="4.5" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-symbols"><i class="fa fa-check"></i><b>4.5</b> Создание шкалы значков</a></li>
<li class="chapter" data-level="4.6" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-labels"><i class="fa fa-check"></i><b>4.6</b> Добавление подписей значков</a></li>
<li class="chapter" data-level="4.7" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-basemap"><i class="fa fa-check"></i><b>4.7</b> Настройка условных знаков географической основы</a></li>
<li class="chapter" data-level="4.8" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-layout"><i class="fa fa-check"></i><b>4.8</b> Создание макета карты</a></li>
</ul></li>
<li class="part"><span><b>II Редактирование данных в ГИС</b></span></li>
<li class="chapter" data-level="5" data-path="raster-reference.html"><a href="raster-reference.html"><i class="fa fa-check"></i><b>5</b> Привязка графических материалов</a>
<ul>
<li class="chapter" data-level="5.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-intro"><i class="fa fa-check"></i><b>5.1</b> Введение</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-control"><i class="fa fa-check"></i><b>5.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-input"><i class="fa fa-check"></i><b>5.2</b> Привязка растра по меткам координат</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-select-coordinate-system"><i class="fa fa-check"></i><b>5.2.1</b> Определение целевой системы координат</a></li>
<li class="chapter" data-level="5.2.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-topomap"><i class="fa fa-check"></i><b>5.2.2</b> Привязка листа топографической карты</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-basemap"><i class="fa fa-check"></i><b>5.3</b> Добавление базовой карты</a></li>
<li class="chapter" data-level="5.4" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-frommap"><i class="fa fa-check"></i><b>5.4</b> Использование координат с базовой карты</a></li>
<li class="chapter" data-level="5.5" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-accuracy"><i class="fa fa-check"></i><b>5.5</b> Оценка точности привязки</a></li>
<li class="chapter" data-level="5.6" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-linear"><i class="fa fa-check"></i><b>5.6</b> Интерактивная привязка растров на основе аффинного преобразования</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html"><i class="fa fa-check"></i><b>6</b> Ручная векторизация растра</a>
<ul>
<li class="chapter" data-level="6.1" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-intro"><i class="fa fa-check"></i><b>6.1</b> Введение</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-control"><i class="fa fa-check"></i><b>6.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-basedata"><i class="fa fa-check"></i><b>6.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="6.3" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-points"><i class="fa fa-check"></i><b>6.3</b> Создание точечных объектов</a></li>
<li class="chapter" data-level="6.4" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-lines"><i class="fa fa-check"></i><b>6.4</b> Создание линейных объектов</a></li>
<li class="chapter" data-level="6.5" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-polygons"><i class="fa fa-check"></i><b>6.5</b> Создание полигональных объектов</a></li>
<li class="chapter" data-level="6.6" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-layout"><i class="fa fa-check"></i><b>6.6</b> Оформление макета компоновки</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="query.html"><a href="query.html"><i class="fa fa-check"></i><b>7</b> Пространственные и атрибутивные запросы</a>
<ul>
<li class="chapter" data-level="7.1" data-path="query.html"><a href="query.html#query-intro"><i class="fa fa-check"></i><b>7.1</b> Введение</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="query.html"><a href="query.html#query-control"><i class="fa fa-check"></i><b>7.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="query.html"><a href="query.html#query-basedata"><i class="fa fa-check"></i><b>7.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="7.3" data-path="query.html"><a href="query.html#query-new-geopackage"><i class="fa fa-check"></i><b>7.3</b> Создание набора пространственных данных</a></li>
<li class="chapter" data-level="7.4" data-path="query.html"><a href="query.html#query-drawing"><i class="fa fa-check"></i><b>7.4</b> Векторизация районов</a></li>
<li class="chapter" data-level="7.5" data-path="query.html"><a href="query.html#query-query"><i class="fa fa-check"></i><b>7.5</b> Пространственные и атрибутивные запросы</a></li>
<li class="chapter" data-level="7.6" data-path="query.html"><a href="query.html#query-diagrams"><i class="fa fa-check"></i><b>7.6</b> Визуализация слоя при помощи картодиаграмм</a></li>
<li class="chapter" data-level="7.7" data-path="query.html"><a href="query.html#query-layout"><i class="fa fa-check"></i><b>7.7</b> Создание и экспорт макета компоновки</a></li>
</ul></li>
<li class="part"><span><b>III Векторный анализ</b></span></li>
<li class="chapter" data-level="8" data-path="geometry.html"><a href="geometry.html"><i class="fa fa-check"></i><b>8</b> Геометрические операции с векторными объектами</a>
<ul>
<li class="chapter" data-level="8.1" data-path="geometry.html"><a href="geometry.html#geometry-intro"><i class="fa fa-check"></i><b>8.1</b> Введение</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="geometry.html"><a href="geometry.html#geometry-control"><i class="fa fa-check"></i><b>8.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="8.1.2" data-path="geometry.html"><a href="geometry.html#geometry-annotation"><i class="fa fa-check"></i><b>8.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="geometry.html"><a href="geometry.html#geometry-dissolve"><i class="fa fa-check"></i><b>8.2</b> Объединение контуров схемы четвертичных отложений</a></li>
<li class="chapter" data-level="8.3" data-path="geometry.html"><a href="geometry.html#geometry-buffer"><i class="fa fa-check"></i><b>8.3</b> Построение буферных зон</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="geometry.html"><a href="geometry.html#geometry-buffer-constant"><i class="fa fa-check"></i><b>8.3.1</b> Буферные зоны постоянной ширины</a></li>
<li class="chapter" data-level="8.3.2" data-path="geometry.html"><a href="geometry.html#geometry-buffer-variable"><i class="fa fa-check"></i><b>8.3.2</b> Построение буферных зон переменной ширины</a></li>
<li class="chapter" data-level="8.3.3" data-path="geometry.html"><a href="geometry.html#geometry-buffer-other"><i class="fa fa-check"></i><b>8.3.3</b> Буферные зоны других объектов</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="geometry.html"><a href="geometry.html#geometry-selection"><i class="fa fa-check"></i><b>8.4</b> Сохранение выборки в новую таблицу</a></li>
<li class="chapter" data-level="8.5" data-path="geometry.html"><a href="geometry.html#geometry-erase"><i class="fa fa-check"></i><b>8.5</b> Нахождение геометрической разности объектов</a></li>
<li class="chapter" data-level="8.6" data-path="geometry.html"><a href="geometry.html#geometry-zonal-stat"><i class="fa fa-check"></i><b>8.6</b> Расчёт зональной статистики</a></li>
<li class="chapter" data-level="8.7" data-path="geometry.html"><a href="geometry.html#geometry-final"><i class="fa fa-check"></i><b>8.7</b> Составление итоговой схемы</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="overlay.html"><a href="overlay.html"><i class="fa fa-check"></i><b>9</b> Анализ пространственных взаимосвязей</a>
<ul>
<li class="chapter" data-level="9.1" data-path="overlay.html"><a href="overlay.html#overlay-intro"><i class="fa fa-check"></i><b>9.1</b> Введение</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="overlay.html"><a href="overlay.html#overlay-control"><i class="fa fa-check"></i><b>9.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="9.1.2" data-path="overlay.html"><a href="overlay.html#overlay-annotation"><i class="fa fa-check"></i><b>9.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="overlay.html"><a href="overlay.html#overlay-vectors"><i class="fa fa-check"></i><b>9.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="9.3" data-path="overlay.html"><a href="overlay.html#overlay-intersect"><i class="fa fa-check"></i><b>9.3</b> Оверлей слоев методом пересечения</a></li>
<li class="chapter" data-level="9.4" data-path="overlay.html"><a href="overlay.html#overlay-merge"><i class="fa fa-check"></i><b>9.4</b> Слияние результатов пересечения с целью получения показателя пространственной связи</a></li>
<li class="chapter" data-level="9.5" data-path="overlay.html"><a href="overlay.html#overlay-sumarea-subtypes"><i class="fa fa-check"></i><b>9.5</b> Объединение подтипов почв для подсчёта суммарной площади</a></li>
<li class="chapter" data-level="9.6" data-path="overlay.html"><a href="overlay.html#overlay-fieldcalc"><i class="fa fa-check"></i><b>9.6</b> Расчёт площадей объектов</a></li>
<li class="chapter" data-level="9.7" data-path="overlay.html"><a href="overlay.html#overlay-join"><i class="fa fa-check"></i><b>9.7</b> Соединение таблиц по названию подтипа почв</a></li>
<li class="chapter" data-level="9.8" data-path="overlay.html"><a href="overlay.html#overlay-resulting"><i class="fa fa-check"></i><b>9.8</b> Вычисление результирующих значений показателя связи</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="spatrelations.html"><a href="spatrelations.html"><i class="fa fa-check"></i><b>10</b> Анализ пространственных соотношений</a>
<ul>
<li class="chapter" data-level="10.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-intro"><i class="fa fa-check"></i><b>10.1</b> Введение</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-control"><i class="fa fa-check"></i><b>10.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="10.1.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-annotation"><i class="fa fa-check"></i><b>10.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-vizual"><i class="fa fa-check"></i><b>10.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="10.3" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-area"><i class="fa fa-check"></i><b>10.3</b> Расчёт площадей объектов</a></li>
<li class="chapter" data-level="10.4" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-overlay"><i class="fa fa-check"></i><b>10.4</b> Оверлей векторных наборов данных</a></li>
<li class="chapter" data-level="10.5" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-join"><i class="fa fa-check"></i><b>10.5</b> Соединение таблиц по ключевому полю</a></li>
<li class="chapter" data-level="10.6" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-other"><i class="fa fa-check"></i><b>10.6</b> Расчёт площадей, не покрытых объектами</a></li>
<li class="chapter" data-level="10.7" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-symbology"><i class="fa fa-check"></i><b>10.7</b> Настройка символики</a></li>
</ul></li>
<li class="part"><span><b>IV Растровый анализ</b></span></li>
<li class="chapter" data-level="11" data-path="weighted-overlay.html"><a href="weighted-overlay.html"><i class="fa fa-check"></i><b>11</b> Оптимизация местоположения</a>
<ul>
<li class="chapter" data-level="11.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-intro"><i class="fa fa-check"></i><b>11.1</b> Введение</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-control"><i class="fa fa-check"></i><b>11.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="11.1.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-annotation"><i class="fa fa-check"></i><b>11.1.2</b> Аннотация</a></li>
<li class="chapter" data-level="11.1.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-warning"><i class="fa fa-check"></i><b>11.1.3</b> Прежде чем начать…</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-init"><i class="fa fa-check"></i><b>11.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="11.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-slopes"><i class="fa fa-check"></i><b>11.3</b> Расчет углов наклона</a></li>
<li class="chapter" data-level="11.4" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-distances"><i class="fa fa-check"></i><b>11.4</b> Расчет расстояний</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-roads"><i class="fa fa-check"></i><b>11.4.1</b> Расстояния до дорог</a></li>
<li class="chapter" data-level="11.4.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-streams"><i class="fa fa-check"></i><b>11.4.2</b> Водотоки</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass"><i class="fa fa-check"></i><b>11.5</b> Переклассификация наборов данных</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-distance"><i class="fa fa-check"></i><b>11.5.1</b> Переклассификация растров расстояний</a></li>
<li class="chapter" data-level="11.5.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-slope"><i class="fa fa-check"></i><b>11.5.2</b> Переклассификация растра крутизны</a></li>
<li class="chapter" data-level="11.5.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#преобразование-слоя-типов-землепользования-в-растровое-представление"><i class="fa fa-check"></i><b>11.5.3</b> Преобразование слоя типов землепользования в растровое представление</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-combination"><i class="fa fa-check"></i><b>11.6</b> Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</a></li>
<li class="chapter" data-level="11.7" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-final-decision"><i class="fa fa-check"></i><b>11.7</b> Окончательный выбор участка</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="hydrodem.html"><a href="hydrodem.html"><i class="fa fa-check"></i><b>12</b> Гидрологическое моделирование на основе ЦМП</a>
<ul>
<li class="chapter" data-level="12.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-intro"><i class="fa fa-check"></i><b>12.1</b> Введение</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-control"><i class="fa fa-check"></i><b>12.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="12.1.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-annotation"><i class="fa fa-check"></i><b>12.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-init"><i class="fa fa-check"></i><b>12.2</b> Предварительные операции</a></li>
<li class="chapter" data-level="12.3" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-preprocessing"><i class="fa fa-check"></i><b>12.3</b> Подготовка ЦМП к анализу</a></li>
<li class="chapter" data-level="12.4" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-fill"><i class="fa fa-check"></i><b>12.4</b> Гидрологическая коррекция ЦМП</a></li>
<li class="chapter" data-level="12.5" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-flowdir"><i class="fa fa-check"></i><b>12.5</b> Расчёт направлений стока</a></li>
<li class="chapter" data-level="12.6" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-flowacc"><i class="fa fa-check"></i><b>12.6</b> Расчёт водосборной площади</a></li>
<li class="chapter" data-level="12.7" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-basin"><i class="fa fa-check"></i><b>12.7</b> Определение границ бассейна р. Протвы</a></li>
<li class="chapter" data-level="12.8" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-network"><i class="fa fa-check"></i><b>12.8</b> Создание модели водотоков на основе водосборной площади</a></li>
<li class="chapter" data-level="12.9" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-watersheds"><i class="fa fa-check"></i><b>12.9</b> Создание покрытия частных водосборов</a></li>
<li class="chapter" data-level="12.10" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-mapping"><i class="fa fa-check"></i><b>12.10</b> Представление результата в виде перспективного изображения</a></li>
</ul></li>
<li class="part"><span><b>V Сетевой анализ</b></span></li>
<li class="chapter" data-level="13" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>13</b> Анализ транспортных сетей</a>
<ul>
<li class="chapter" data-level="13.1" data-path="networks.html"><a href="networks.html#networks-intro"><i class="fa fa-check"></i><b>13.1</b> Введение</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="networks.html"><a href="networks.html#networks-control"><i class="fa fa-check"></i><b>13.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="13.1.2" data-path="networks.html"><a href="networks.html#networks-annotation"><i class="fa fa-check"></i><b>13.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="networks.html"><a href="networks.html#networks-init"><i class="fa fa-check"></i><b>13.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="13.3" data-path="networks.html"><a href="networks.html#networks-query"><i class="fa fa-check"></i><b>13.3</b> Выбор элементов дорожной сети</a></li>
<li class="chapter" data-level="13.4" data-path="networks.html"><a href="networks.html#networks-route"><i class="fa fa-check"></i><b>13.4</b> Построение маршрута</a></li>
<li class="chapter" data-level="13.5" data-path="networks.html"><a href="networks.html#networks-isochrones"><i class="fa fa-check"></i><b>13.5</b> Расчёт изохрон</a></li>
<li class="chapter" data-level="13.6" data-path="networks.html"><a href="networks.html#networks-matrix"><i class="fa fa-check"></i><b>13.6</b> Работа с матрицей «источник-назначение»</a></li>
</ul></li>
<li class="part"><span><b>VI Геокодирование</b></span></li>
<li class="chapter" data-level="14" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>14</b> Адресное геокодирование и ядерная оценка плотности</a>
<ul>
<li class="chapter" data-level="14.1" data-path="geocoding.html"><a href="geocoding.html#geoding-intro"><i class="fa fa-check"></i><b>14.1</b> Введение</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-control"><i class="fa fa-check"></i><b>14.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="14.1.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-annotation"><i class="fa fa-check"></i><b>14.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-input"><i class="fa fa-check"></i><b>14.2</b> Получение исходных данных</a></li>
<li class="chapter" data-level="14.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-debug"><i class="fa fa-check"></i><b>14.3</b> Тестирование работы сервиса геокодирования</a></li>
<li class="chapter" data-level="14.4" data-path="geocoding.html"><a href="geocoding.html#geocoding-import"><i class="fa fa-check"></i><b>14.4</b> Импорт списка адресов в QGIS</a></li>
<li class="chapter" data-level="14.5" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch-install"><i class="fa fa-check"></i><b>14.5</b> Установка модуля пакетного геокодирования</a></li>
<li class="chapter" data-level="14.6" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch"><i class="fa fa-check"></i><b>14.6</b> Пакетное геокодирование</a></li>
<li class="chapter" data-level="14.7" data-path="geocoding.html"><a href="geocoding.html#geocoding-mapping"><i class="fa fa-check"></i><b>14.7</b> Картографирование плотности объявлений</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Основы геоинформатики: практикум в QGIS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hydrodem" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Упражнение 12</span> Гидрологическое моделирование на основе ЦМП<a href="hydrodem.html#hydrodem" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex12.zip">Архив с исходными данными</a></p>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex12_%D0%BE%D1%82%D1%87%D1%91%D1%82.docx" target="_blank">Контрольный лист</a></p>
<div id="hydrodem-intro" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Введение<a href="hydrodem.html#hydrodem-intro" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Цель задания</strong> — научиться на основе цифровой модели рельефа выделять водотоки и их водосборные бассейны в автоматическом режиме. Осуществлять расчет статистики по высотам в рамках выделенных бассейнов</p>
<p><strong>Необходимая теоретическая подготовка:</strong> Растровая модель пространственных данных, цифровые модели рельефа (ЦМР), цифровые модели поверхности (ЦМП) и их типы, построение ЦМР, построение производных поверхностей (углы наклона, водосборная площадь), гидрологическое моделирование с использованием ЦМР и его принципы.</p>
<p><strong>Необходимая практическая подготовка:</strong> Знание основных компонент интерфейса QGIS (менеджер источников данных, таблица слоёв, фрейм карты, менеджер компоновок). Работа с различными форматами источников пространственных данных. Настройка символики и подписей объектов. Владение базовыми ГИС-технологиями. Создание компоновки карты: название, легенда, масштаб, градусная сетка.</p>
<p><strong>Исходные данные:</strong> тайлы глобальной ЦМП <a href="https://data.bris.ac.uk/data/dataset/s5hqmjcdj8yo2ibzi9b4ew3sn">FABDEM V1-2</a></p>
<p><strong>Результат:</strong> Схема водотоков и их водосборных бассейнов, построенная по ЦМП, с указанием морфометрических параметров бассейнов.</p>
<div id="hydrodem-control" class="section level3 hasAnchor" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> Контрольный лист<a href="hydrodem.html#hydrodem-control" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Создать виртуальный растр из отдельных тайлов ЦМП;</p></li>
<li><p>Выполнить перепроецирование ЦМП;</p></li>
<li><p>Рассчитать водосборную площадь</p></li>
<li><p>Построить границы бассейна указанного створа</p></li>
<li><p>Обрезать растры по границам построенного бассейна</p></li>
<li><p>Построить сеть тальвегов и частных водосборов</p></li>
<li><p>Рассчитать характеристики поверхности для частных водосборов</p></li>
<li><p>Визуализировать результаты расчёта</p></li>
</ul>
</div>
<div id="hydrodem-annotation" class="section level3 hasAnchor" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> Аннотация<a href="hydrodem.html#hydrodem-annotation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Цифровые модели рельефа играют важную роль в гидрологическом и геоморфологическом анализе. Одно из основных приложений ЦМР, позволивших значительно упростить анализ речных систем, — это автоматизированное построение водосборов и расчет их морфометрических характеристик. Большинство современных программных средств ГИС включают те или иные реализации инструментов гидрологического моделирования на основе ЦМР. QGIS в этом смысле является исключением: у него нет собственных инструментов анализа такого рода, но есть возможность использовать наработки других программных продуктов — например, <a href="https://grass.osgeo.org/">GRASS</a>, <a href="https://saga-gis.sourceforge.io/en/index.html">SAGA</a> и <a href="https://www.whiteboxgeo.com/">Whitebox</a>.</p>
<p>В этом упражнении вы используете инструменты Whitebox посредством интерфейса QGIS, чтобы выполнить гидрологический анализ цифровой модели рельефа, а затем визуализируете полученный результат в виде блок-диаграммы (3D-изображения).</p>
</div>
</div>
<div id="hydrodem-init" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Предварительные операции<a href="hydrodem.html#hydrodem-init" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Перед началом работы нам потребуется, как обычно, создать рабочую директорию и загрузить в неё исходные данные, а также установить и настроить два плагина для QGIS — а именно <a href="https://github.com/jblindsay/whitebox_workflows_for_qgis">Whitebox Workflows for QGIS</a>, требуемый для анализа, и <a href="https://github.com/minorua/Qgis2threejs">Qgis2threejs</a>, который будет использоваться для визуализации на заключительных этапах анализа.</p>
<ol style="list-style-type: decimal">
<li><p>Загрузите исходные данные для упражнения и поместите их в свою рабочую директорию.</p></li>
<li><p>Запустите QGIS и сохраните проект в свою рабочую директорию.</p></li>
<li><p>Установите модуль <strong>Qgis2threejs</strong>.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/module01_Qgis2threejs.png" />
4. Установите модуль <strong>Whitebox Workflows for QGIS</strong>. Будьте внимательны: в репозитории модулей QGIS есть и другие модули с названием Whitebox, вам нужен именно Whitebox Workflows for QGIS.</p>
<p><img src="images/Ex12_HydroDEM/module02_Whitebox.png" />
После установки модуля Whitebox Workflows for QGIS его инструменты доступны в панели «Инструменты анализа»:</p>
<p><img src="images/Ex12_HydroDEM/module02_Whitebox2.png" /></p>
</div>
<div id="hydrodem-preprocessing" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Подготовка ЦМП к анализу<a href="hydrodem.html#hydrodem-preprocessing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Чтобы работать с цифровой моделью местности, необходимо объединить все тайлы в единую мозаику, затем обрезать (кадрировать) её по охвату территории анализа и перепроецировать из географической системы координат в прямоугольную.</p>
<blockquote>
<p>Создание мозаики из тайлов, кадрирование и перепроектирование — типичные процедуры подготовки растровых тайлов к геоинформационному анализу. Хранить каждый промежуточный результат в виде отдельного файла, как правило, нет необходимости, а при больших объёмах данных и малых объёмах свободного места на диске — нет и возможности. На помощь здесь приходит виртуальный растр (<a href="https://gdal.org/drivers/raster/vrt.html">VRT</a>) — структура, хранящая ссылки на исходные данные и необходимые операции их преобразования.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>Загрузите тайлы FABDEM из папки <code>fabdem</code> в проект QGIS.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/QGIS_01_tiles.png" /></p>
<ol start="2" style="list-style-type: decimal">
<li><p>Соберите мозаику растровых тайлов. Для этого воспользуйтесь инструментом «Растр» — «Прочее» — «Создать виртуальный растр».</p>
<ul>
<li><p>Добавьте тайлы FABDEM в качестве исходных данных</p></li>
<li><p>Если установлена опция <em>Place each input file into a separate band</em>, отключите её.</p></li>
<li><p>Укажите, что виртуальный растр должен быть сохранён в рабочую директорию под именем <code>fabdem_mosaic.vrt</code></p></li>
</ul>
<p><img src="images/Ex12_HydroDEM/QGIS_02_vrt.png" /></p>
<p>Результат будет автоматически добавлен в проект</p>
<p><img src="images/Ex12_HydroDEM/QGIS_03_mosaic.png" /></p></li>
<li><p>Удалите исходные тайлы FABDEM из проекта.</p></li>
<li><p>Для анализа нам не потребуется вся площадь полученной мозаики, мы можем обрезать (кадрировать) мозаику до необходимого охвата, чтобы оптимизировать скорость вычислений и сократить объём требуемой памяти. Для этого воспользуемся инструментом «Растр» — «Извлечение» — «Обрезать растр по охвату…».</p>
<ul>
<li><p>Укажите слой fabdem_mosaic в качестве исходного набора данных</p></li>
<li><p>Введите следующий охват обрезки: <code>35.4,36.5,55.0,55.7</code> (это, соответственно, минимальная долгота, максимальная долгота, минимальная широта и максимальная широта. Для разделения целой и дробной части используется точка, для разделения чисел — запятая).</p></li>
<li><p>Результат сохраните в рабочую директорию под именем <code>fabdem_mosaic_crop.vrt</code></p></li>
</ul></li>
</ol>
<p><img src="images/Ex12_HydroDEM/QGIS_04_mosaic_crop.png" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Когда результат обрезки будет добавлен в проект, удалите из проекта старую мозаику и увеличьте изображение до охвата обрезанного набора данных.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/QGIS_05_mosaic_crop_result.png" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Теперь необходимо перевести растр в прямоугольную систему координат. Для крупномасштабного картографирования обычно используют системы координат топографических карт, и в этом смысле наша территория анализа расположена не очень удачно — на стыке двух соседних зон. Выберите подходящую систему прямогольных координат из систем проекции UTM на датуме WGS 84. Нужный номер зоны определите самостоятельно (можно выбрать любую из двух соседних зон). Установите для проекта выбранную систему координат.</li>
</ol>
<p>Из упражнения 1 мы помним, что QGIS умеет перепроецировать наборы данных на лету. Однако для целей морфометрического анализа ЦМП нам необходимо, чтобы набор данных был «физически» сохранён с использованием проецированной системы координат.</p>
<ol start="7" style="list-style-type: decimal">
<li>Используйте инструмент «Деформация (перепроецирование…)» («Растр» — «Проекции»), чтобы конвертировать вашу мозаику в новый набор данных. Укажите исходную и целевую систему координат (целевая СК должна совпадать с СК проекта), установите метод интерполяции «Билинейная (ядро 2×2)». Сохраните перепроецированный растр под именем <code>DEM</code> (от англ. <em>Digital Elevation Model</em>) в рабочую директорию, формат файла — GeoTIFF.</li>
</ol>
<p>Будьте внимательны: все ваши предыдущие результаты сохранялись в формат виртуальных растров (VRT), но на этом шаге вам нужно подготовить «реальный» растр (GeoTIFF). QGIS по умолчанию предложит вам сохранить результат в формат VRT, поскольку именно этот формат использовался в предыдущих шагах. Измените выходной формат на GeoTIFF</p>
<ol start="8" style="list-style-type: decimal">
<li>Когда перепроецированный растр добавится в проект, удалите из него «старую» мозаику и сделайте снимок экрана.</li>
</ol>
<p><kbd>В отчёт: снимок экрана №1 – ЦМП, подготовленная к анализу</kbd></p>
</div>
<div id="hydrodem-fill" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Гидрологическая коррекция ЦМП<a href="hydrodem.html#hydrodem-fill" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>На этом и последующих шагах вы примените ряд операций так называемого гидрологического моделирования на основе ЦМП, реализованных в инструментарии Whitebox. Гидрологическое моделирование с использованием ЦМП основывается на следующей идее: моделируемая вода стекает из ячейки с большей высотой в соседнюю ячейку с меньшей высотой. Трассируя поток вниз по склону, можно связывать ячейки в так называемые “сети потока” (<em>drainage networks</em>) и определять водосборные площади и границы бассейнов.</p>
<p><img src="images/Ex12_HydroDEM/DEM_flow_concept.png" /></p>
<p>Если на модели есть замкнутые локальные понижения, то они выступают как препятствие для распространения стока.</p>
<p><img src="images/Ex12_HydroDEM/depression_scheme.png" /></p>
<p>Распространённая практика — удалять замкнутые локальные понижения с ЦМП перед началом собственно гидрологического моделирования. Удалить повышения можно путём заполнения, то есть увеличения высот внутри них — таким образом понижение либо исчезает, либо перестаёт быть замкнутым. По-английски эта операция называется <em>Fill sinks</em> или <em>Fill depressions</em>. Альтернативный вариант — разрушать границы замкнутых локальных понижений (<em>Breach depressions</em>), чтобы они переставали быть замкнутыми. В Whitebox реализованы оба варианта, и разрушение границ в общем случае считается предпочтительным, но из-за особенностей рельефа нашей местности оно, как показывает практика, проигрывает заполнению. Поэтому мы воспользуемся заполнением понижений.</p>
<ol style="list-style-type: decimal">
<li><p>Создайте в вашей рабочей директории папку <code>processing</code>. Поскольку на этом и на следующих шагах мы будем создавать множество наборов данных с помощью Whitebox, желательно, чтобы они хранились в порядке.</p></li>
<li><p>Найдите и запустите инструмент <strong>Fill Depressions</strong> через поиск в панели «Инструменты анализа». В Whitebox реализовано несколько инструментов с похожими названиями, вам нужен именно тот, который называется Fill Depressions без всяких уточнений и комментариев.</p></li>
</ol>
<p>Настройте параметры инструмента, как указано ниже:</p>
<ul>
<li>Входная ЦМП (ЦМР): <code>DEM</code>;</li>
<li>Опция «Исправлять плоские участки» (<em>Fix flats</em>) включена;</li>
<li>Приращение высот для исправления плоскости: <span class="math inline">\(0.000001\)</span>.</li>
<li>Максимальная глубина заполняемого понижения: поставьте любое число, сопоставимое по величине с амплитудой ЦМР, например 50, 100 или 200. Это «пороговая» глубина понижения; алгоритм не заполняет понижения, которые глубже этого порога. Если оставить значение 0, предлагаемое по умолчанию, алгоритм не будет заполнять понижения совсем.</li>
<li>Результат сохраните в папку <code>processing</code> под именем <code>dem_fill.tif</code></li>
</ul>
<p><img src="images/Ex12_HydroDEM/Whitebox_01_fill.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Запустите инструмент и дождитесь, пока он закончит работу, а результат обработки будет добавлен в проект.</p></li>
<li><p>Когда результат будет добавлен в проект, разверните список слоёв и сделайте снимок экрана.</p></li>
</ol>
<p><kbd>В отчёт: снимок экрана №2 – ЦМП после заполнения локальных понижений</kbd></p>
</div>
<div id="hydrodem-flowdir" class="section level2 hasAnchor" number="12.5">
<h2><span class="header-section-number">12.5</span> Расчёт направлений стока<a href="hydrodem.html#hydrodem-flowdir" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Направление стока (англ. <em>catchment area</em>) — морфометрический параметр, вычисляемый для каждой ячейки растра и определяющий, в каком направлении потечёт моделируемая вода из центра этой ячейки. Разработан ряд принципов и алгоритмов определения направлений стока, самым простым и наиболее широко используемым из них является D8. Согласно алгоритму D8, весь поток из центральной ячейки распределяется в одну из соседних ячеек по линии наибольшего уклона (или не распределяется, если такой линии не существует). Для каждой ячейки, таким образом, кодируется направление, соответствующее целевой ячейке. Коды представляют собой степени числа 2, как показано на рисунке ниже:</p>
<p><img src="images/Ex12_HydroDEM/d8.svg" /></p>
<p>На этом шаге мы создадим растр направлений стока по ЦМП, прошедшей процедуру гидрологической коррекции.</p>
<ol style="list-style-type: decimal">
<li><p>Найдите инструмент <strong>D8 Pointer</strong> в панели инструментов анализа и запустите его.</p></li>
<li><p>В открывшемся окне укажите следующие параметры инструмента:</p></li>
</ol>
<ul>
<li>Исходная ЦМР: <code>dem_fill</code>;</li>
<li>Опция <em>ESRI pointer</em>: оставьте выключенной;</li>
<li>Результат сохраните в директорию <code>processing</code> под именем <code>dem_fill_flowdir.tif</code>.</li>
</ul>
<p><img src="images/Ex12_HydroDEM/Whitebox_02_flowdir.png" /></p>
<blockquote>
<p>Примечание: схема нумерации направлений, показанная выше — не единственная возможная. В частности, в программных продуктах компании ESRI (ArcGIS) применяется нумерация, «повёрнутая» относительно этой схемы на 45° по часовой стрелке: направление 1 указывает на восток, 2 — на юго-восток и т.д. Опция <em>ESRI pointer</em> позволяет инструменту Whitebox сгенерировать выходной файл, используя нумерацию, принятую в ArcGIS.</p>
</blockquote>
<ol start="3" style="list-style-type: decimal">
<li>Запустите инструмент и дождитесь, пока он закончит работу, а результат обработки будет добавлен в проект. Результат будет выглядеть, как показано на рисунке ниже — QGIS не распознаёт, что полученный растр содержит кодированные значения, и «красит» его в оттенки серого.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_03_flowdir_result.png" /></p>
<ol start="4" style="list-style-type: decimal">
<li><p>Измените настройки визуализации растра направлений стока: поменяйте стиль отрисовки на «Палитра / уникальные значения» и нажмите кнопку «Классифицировать», чтобы назначить собственный цвет каждому уникальному значению в полученном растре. Убедитесь, что список значений содержит только те значения, которые показаны на схеме выше. Если у вас есть время, измените цвета кодов таким образом, чтобы они соответствовали схеме, и настройте подписи, чтобы вместо кода в легенде отображалось географическое направление.</p></li>
<li><p>Примените новые настройки стиля и сделайте снимок экрана.</p></li>
</ol>
<p><kbd>В отчёт: снимок экрана №3 – растр направлений стока</kbd></p>
</div>
<div id="hydrodem-flowacc" class="section level2 hasAnchor" number="12.6">
<h2><span class="header-section-number">12.6</span> Расчёт водосборной площади<a href="hydrodem.html#hydrodem-flowacc" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Водосборная площадь (англ. <em>catchment area</em>) в геоморфометрии определяется для каждой точки поверхности так, как если бы точка была замыкающим створом. В регулярно-сеточном анализе водосборная площадь определяется для отдельных ячеек ЦМП и равняется суммарной площади всех ячеек, сток из которых проходит через данную ячейку (по принципу, описанному выше). Вместо площадей ячеек можно использовать какой-нибудь весовой коэффициент. Например, если этот коэффициент представляет слой поверхностного стока, то результирующая величина будет являться объёмом стока для данной ячейки.</p>
<p>Водосборную площадь вместе со всеми другими величинами, которые можно рассчитать по аналогичному принципу, часто называют аккумуляцией потока (англ. <em>flow accumulation</em>). Похожим образом называются инструменты расчёта водосборной площади в большинстве современных ГИС-пакетов, в том числе в Whitebox.</p>
<ol style="list-style-type: decimal">
<li><p>Найдите инструмент <strong>D8 Flow Accum</strong> в панели инструментов анализа и запустите его.</p></li>
<li><p>Установите следующие настройки:</p>
<ul>
<li>Исходный растр: <code>dem_fill_flowdir</code></li>
<li>Тип выходного набора данных: водосборная площадь (<em>catchment Area</em>)</li>
<li>Опция <em>Input is pointer</em> (входной набор данных — растр направлений стока) включена, остальные опции выключены.</li>
<li>Результат сохраните в директорию <code>processing</code> под именем <code>dem_fill_flowdir_flowacc.tif</code>.</li>
</ul></li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_04_flowacc.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Запустите расчёт и дождитесь его завершения (может занимать до 10 минут). По окончании расчётов в проект QGIS будет добавлен новый растровый слой:</li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_05_flowacc_result.png" /></p>
<blockquote>
<p>Водосборная площадь при движении вниз по склону увеличивается экспоненциально, поэтому изображение в оттенках серого, которое вы видите, почти целиком чёрное</p>
</blockquote>
<ol start="5" style="list-style-type: decimal">
<li>Измените стиль отображения растра водосборной площади на «Одноканальное псевдоцветное», максимальное значение — <code>1e7</code>, и выберите шкалу Blues. Примените изменения.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_06_flowacc_settings1.png" /></p>
<ol start="6" style="list-style-type: decimal">
<li>В свойствах слоя растра водосборной площади перейдите на вкладку «Пирамиды» и постройте пирамидальные слои всех доступных разрешений для вашего набора данных. Для этого выберите в списке справа все доступные разрешения, установите в переключателе внизу метод передискретизации Гаусса и нажмите кнопку «Построение пирамид». Примените изменения.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_07_flowacc_settings2.png" /></p>
<blockquote>
<p>Пирамидальные слои, или пирамиды — это производные растры относительно низкого разрешения, создаваемые на основе исходного растра для улучшения производительности в процессе визуализации. Если используется мелкий масштаб карты, ГИС-пакет отрисовывает не исходный растр, а один из пирамидальных слоёв.</p>
</blockquote>
<p><img src="images/Ex12_HydroDEM/Whitebox_08_flowacc_pyramids.png" /></p>
<blockquote>
<p>Если после построения пирамид на экране не произойдёт никаких изменений, обновите изображение с помощью клавиши F5 или измените масштаб изображения.</p>
</blockquote>
<ol start="7" style="list-style-type: decimal">
<li><p>Изучите полученное изображение, увеличивая и уменьшая масштаб визуализации.</p></li>
<li><p>Установите для растра водосборной площади прозрачность 50 %. Остальные слои отключите.</p></li>
<li><p>Добавьте в проект базовую карту Google Hybrid. Увеличьте изображение в юго-восточной части растра, где проходит граница Московской и Калужской областей. Найдите деревню Сатино, а к северу от неё — место слияния рек Протва и Исьма. Оцените, в какой мере области высоких значений водосборной площади соответствуют положениям водотоков и крупных эрозионных форм.</p></li>
<li><p>В контекстном меню слоя водосборной площади используйте опцию «Увеличить до реального размера (100 %)». Эта опция изменит масштаб картинки на экране таким образом, что один пиксель растра будет соответствовать одному пикселю вашего монитора. Сделайте снимок экрана так, чтобы на него попали окрестности д. Сатино.</p></li>
</ol>
<p><kbd>В отчёт: снимок экрана №4 – растр водосборной площади</kbd></p>
</div>
<div id="hydrodem-basin" class="section level2 hasAnchor" number="12.7">
<h2><span class="header-section-number">12.7</span> Определение границ бассейна р. Протвы<a href="hydrodem.html#hydrodem-basin" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Гидрологическое моделирование на основе ЦМР позволяет определять границы водосборного бассейна для произвольной точки местности. Продемонстрируем это на примере створа р. Протвы выше слияния её с р. Исьмой.</p>
<ol style="list-style-type: decimal">
<li><p>Создайте новый шейп-файл для хранения точки, соответствующей замыкающему створу бассейна. Обратите внимание, что это должен быть именно шейп-файл: Whitebox не умеет работать с другими типами пространственных данных. Шейп-файл должен иметь точечный тип геометрии, а также ту же систему координат, которая применяется в проекте. Из атрибутов необходим только уникальный идентификатор точки (Id, целочисленного типа).</p></li>
<li><p>Увеличьте изображение до места слияния Протвы и Исьмы, как показано на рисунке ниже:</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_09_gauge.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Включите режим редактирования для вашего шейп-файла и поставьте точку на ячейку растра, соответствующей руслу р. Протвы выше по течению её слияния с р. Исьмой, как показано на рисунке ниже. Создав точку, сохраните правки и выключите режим редактирования.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_10_gauge2.png" /></p>
<ol start="4" style="list-style-type: decimal">
<li><p>Найдите и запустите инструмент <strong>Watershed</strong>. Этот инструмент предназначен для идентификации водосборного бассейна заданного набора точек. Для этого ему нужны растр направлений стока и точки замыкающих створов. Установите настройки инструмента соответствующим образом. Результат можно сохранить во временный файл.</p></li>
<li><p>Запустите расчёт. Когда результат будет добавлен в проект, увеличьте изображение до полного охвата нового слоя.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_11_basin.png" /></p>
<p>На полученном растре представлено всего два значения: значение, соответствующее идентификатору исходной точки для ячеек, входящих в границы бассейна, и значение «нет данных» для всех остальных ячеек. Охват полученного растра соответствует охвату исходного растра направлений стока.</p>
<ol start="6" style="list-style-type: decimal">
<li><p>Векторизуйте полученный растр. Результат векторизации сохраните в корневую папку проекта под именем <code>basin_protva_polygon</code>, формат — шейп-файл (*.shp).</p></li>
<li><p>Изобразите полученный полигон с помощью обводки красного цвета без заливки. Удалите из проекта растровый слой бассейна.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_12_basin_vector.png" /></p>
<ol start="8" style="list-style-type: decimal">
<li><p>Используйте полученный полигон, чтобы обрезать растр водосборной площади по маске. Для этого воспользуйтесь инструментом «Растр» — «Извлечение» — «Обрезать растр по маске…». Поместите целевой растр в папку <code>processing</code>, назовите его <code>flowacc_crop.tif</code>.</p></li>
<li><p>Когда «обрезанный» растр будет добавлен в проект, примените к нему ту же символику, которая была задана исходному слою водосборной площади. Сам исходный слой водосборной площади отключите. Увеличьте изображение до охвата границ бассейна и сделайте снимок экрана.</p></li>
</ol>
<p><kbd>В отчёт: снимок экрана №5 – водосборный бассейн и обрезанный растр водосборной площади</kbd></p>
<ol start="10" style="list-style-type: decimal">
<li>Повторите ту же операцию для растра направлений стока; результат назовите <code>flowdir_crop.tif</code>. Когда новый слой будет добавлен в проект, отключите его.</li>
</ol>
</div>
<div id="hydrodem-network" class="section level2 hasAnchor" number="12.8">
<h2><span class="header-section-number">12.8</span> Создание модели водотоков на основе водосборной площади<a href="hydrodem.html#hydrodem-network" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Растр водосборной площади (или объёма стока) позволяет выделить сеть потенциальных водотоков. Ячейка считается принадлежащей к сети потенциальных водотоков, если величина водосборной площади в ней превышает некоторый заданный порог. Это упрощённый принцип, но он позволяет строить сети, подобные реальным.</p>
<p>Для выборки ячеек в QGIS можно воспользоваться уже знакомым вам инструментом переклассификации (см. <a href="weighted-overlay.html#weighted-overlay-reclass">Переклассификация наборов данных</a>). Но в Whitebox есть специальный инструмент для решения этой задачи, мы воспользуемся им.</p>
<ol style="list-style-type: decimal">
<li>Найдите и запустите инструмент <strong>Extract Streams</strong>. Этот инструмент принимает на вход растр водосборной площади и пороговое значение, при котором ячейка считается относящейся к водотоку. Используйте в качестве исходных данных слой <code>flowacc_crop</code> и пороговое значение, равное <span class="math inline">\(1000000\)</span>. Результат сохраните в папку <code>processing</code> под именем <code>flowacc_crop_streams.tif</code>.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_13_stream_network.png" /></p>
<p>Мы получили растр, в котором значение <span class="math inline">\(1\)</span> маркирует принадлежность ячейки к сети водотоков, а ячейки, не принадлежащие к сети водотоков, имеют значения «нет данных». На основе этой сети можно выполнить множество производных операций — например, назначить каждому сегменту сети уникальный идентификатор или рассчитать порядки водотоков по какой-либо системе.</p>
<ol start="2" style="list-style-type: decimal">
<li>Найдите и запустите инструмент <strong>Stream Link Identifier</strong>. Этот инструмент задаёт уникальные идентификаторы для каждого сегмента сети (от истока до слияния, от слияния до слияния, от слияния до устья). Для работы ему нужны растр направлений стока и растр сети водотоков. Установите соответствующие исходные данные, укажите, что результат следует записать в папку <code>processing</code> под именем <code>stream_links.tif</code></li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_14_stream_links.png" /></p>
<blockquote>
<p>Примечание: большая часть инструментов Whitebox, принимающих несколько растров на вход, требуют, чтобы эти растры были одинаковой конфигурации, и не будут работать, если вы подадите на вход растры с разным числом строк или столбцов. Об этом возвестит сообщение об ошибке.</p>
</blockquote>
<ol start="4" style="list-style-type: decimal">
<li><p>Отключите слой <code>stream_links</code>, мы вернёмся к нему позже.</p></li>
<li><p>Найдите и запустите инструмент <strong>Strahler Stream Order</strong>. Этот инструмент присваивает сегментам сети порядки по системе Стралера: порядок 1 получают водотоки, начинающиеся от истока, а при слиянии двух водотоков одинакового порядка результирующий порядок увеличивается на единицу. Для работы этого инструмента, как и для Stream Link Identifier, нужны растр направлений стока и растр сети водотоков (в любом виде). Установите соответствующие исходные данные, укажите, что результат следует записать в папку <code>processing</code> под именем <code>stream_order.tif</code>.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_15_stream_order.png" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Конвертируем полученный растр порядков водотоков в векторный набор данных. Для этого воспользуемся инструментом <strong>Rasters streams to vector</strong>. Этот инструмент не просто векторизует растровые линии водотоков, но и несколько генерализует их в процессе, а также следит за топологической корректностью получаемой сети. Для работы инструмента нужны растровая сеть водотоков (используйте <code>stream_order</code>, чтобы сохранить семантику порядков водотоков) и растр направлений стока. Результат сохраните в вашу рабочую директорию под именем <code>rivers.shp</code>.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_16_stream_vector.png" /></p>
<ol start="7" style="list-style-type: decimal">
<li><p>Когда слой векторных водотоков будет добавлен в проект, отключите все слои, кроме водотоков и границы бассейна. Также установите для слоя рек правильную систему координат — Whitebox не умеет этого делать.</p></li>
<li><p>Визуализируйте слой водотоков на основе символизации по диапазонам значений. Значения возьмите из поля <code>STRM_VAL</code>, исходный знак — тонкая линия синего цвета, метод (изменения знака) — размер, минимальный размер — <span class="math inline">\(0,26\)</span>, максимальный размер — <span class="math inline">\(1,5\)</span>. Окно настройки символов должно быть похоже на изображение ниже:</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/QGIS_06_rivers.png" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Примените настройки стиля, увеличьте изображение до полного охвата слоя водотоков и сделайте снимок экрана.</li>
</ol>
<p><kbd>В отчёт: снимок экрана №6 – векторная сеть потенциальных водотоков</kbd></p>
</div>
<div id="hydrodem-watersheds" class="section level2 hasAnchor" number="12.9">
<h2><span class="header-section-number">12.9</span> Создание покрытия частных водосборов<a href="hydrodem.html#hydrodem-watersheds" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>В этой части упражнения мы создадим сетку частных водосборов. Частным водосбором сегмента сети называется часть его водосборного бассейна, не включающая бассейны сегментов, расположенных выше по течению. Частные водосборы сегментов сети полностью замощают водосборный бассейн замыкающего створа всей сети и не перекрываются друг с другом.</p>
<p>Для создания сетки частных водосборов в Whitebox используется инструмент Subbasins. Он работает полностью аналогично инструменту Watershed, только замыкающие створы для него задаются не в виде точек, а в виде растра.</p>
<ol style="list-style-type: decimal">
<li><p>Отключите векторный слой водотоков и включите растровый слой, где каждому сегменту сети водотоков был назначен уникальный идентификатор (<code>stream_links</code>).</p></li>
<li><p>Найдите и запустите инструмент <strong>Subbasins</strong>. Задайте необходимые исходные данные и укажите, куда сохранить результат. На этом шаге для хранения результата можно использовать временный файл.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/Whitebox_17_subbasins_raster.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Векторизуйте полученную сетку частных водосборов. Результат векторизации можно либо сохранить в папку <code>processing</code>, либо оставить временным слоем.</p></li>
<li><p>Рассчитайте зональную статистику высот (инструмент «Зональная статистика»), используя векторные полигоны частных водосборов в качестве исходного слоя и <code>dem_fill</code> в качестве растрового слоя. Рассчитайте минимальную, максимальную, среднюю и медианную высоты, а также амплитуду (диапазон) высот. Результат расчёта сохраните в новый шейп-файл <code>subbasins_stat</code> в вашей рабочей директории.</p></li>
<li><p>Разместите слой <code>subbasins_stat</code> под векторным слоем сети водотоков. Отключите все остальные слои, кроме общей границы водосборного бассейна.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/QGIS_08_subbasins.png" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Визуализируйте сетку водосборных бассейнов путём символизации по диапазонам значений. Для классификации используйте поле, представляющее среднее. Настройки классификации и цветовую шкалу подберите самостоятельно — но, пожалуйста, не используйте стандартную шкалу оттенков красного, предлагаемую в QGIS по умолчанию. Сделайте снимок экрана.</li>
</ol>
<p><kbd>В отчёт: снимок экрана №7 – сетка частных водосборов</kbd></p>
</div>
<div id="hydrodem-mapping" class="section level2 hasAnchor" number="12.10">
<h2><span class="header-section-number">12.10</span> Представление результата в виде перспективного изображения<a href="hydrodem.html#hydrodem-mapping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>На этом этапе мы создадим трёхмерную визуализацию полученного плоского изображения, используя ЦМП в качестве данных для моделирования высот и модуль Qgis2threejs.</p>
<p><strong>Внимание!</strong> Модуль Qgis2threejs очень требователен к ресурсам компьютера. Убедитесь, что вы сохранили проект и все необходимые данные, прежде чем приступать к следующим шагам.</p>
<ol style="list-style-type: decimal">
<li><p>Отобразите слои проекта в охвате любого из слоёв, включённых в проекте в настоящий момент: общей границы бассейна, векторной сети водотоков или сетки частных водосборов.</p></li>
<li><p>Найдите на панели инструментов иконку модуля Qgis2treejs <img src="images/Ex12_HydroDEM/Qgis2threejs_icon.png" />. Нажмите на неё, чтобы открыть окно модуля.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/Q2tj_01.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li>В панели слоёв модуля Qgis2treejs (слева вверху) включите слой DEM (исходная ЦМП), чтобы использовать его в качестве базы для показа высот</li>
</ol>
<p><img src="images/Ex12_HydroDEM/Q2tj_02.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Попробуйте вращать, перемещать и масштабировать модель в окне модуля Qgis2treejs с помощью клавиш мыши. Изучите, как работает навигация.</p></li>
<li><p>После того, как вы освоитесь с навигацией, перейдите в настройки сцены (Scene — Scene Settings) и установите параметр «Вытягивание по вертикали» (<em>Vertical Exaggeration</em>) равным <span class="math inline">\(25\)</span>. Изучите, как изменилась сцена.</p></li>
<li><p>Настройте наиболее выгодное изображение сцены (ракурс, вытягивание по вертикали) на свой вкус.</p></li>
<li><p>Экспортируйте полученное изображение (File – Save Scene As – Image (*.png) …) и вставьте его в отчётный файл.</p></li>
</ol>
<p><kbd>В отчёт: рисунок №8 – перспективное изображение ЦМП и тематических данных в окне модуля Qgis2threejs</kbd></p>
<ol start="7" style="list-style-type: decimal">
<li>Опицонально (для любознательных): экспортируйте сцену как самостоятельную модель (File — Export to Web; обратите внимание, что результат экспортируется в виде набора файлов в указанную папку). Откройте результат экспорта в веб-браузере.</li>
</ol>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="weighted-overlay.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="networks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["qgis-course.pdf", "qgis-course.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
