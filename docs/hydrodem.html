<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS</title>
  <meta name="description" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  <meta name="github-repo" content="aentin/qgis-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  
  <meta name="twitter:description" content="Упражнение 12 Гидрологическое моделирование на основе ЦМП | Основы геоинформатики: практикум в QGIS" />
  

<meta name="author" content="Андрей Энтин, Тимофей Самсонов, Андрей Карпачевский" />


<meta name="date" content="2025-02-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="weighted-overlay.html"/>
<link rel="next" href="networks.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Основы геоинформатики</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Общие сведения</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#учебные-материалы"><i class="fa fa-check"></i>Учебные материалы</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#программное-обеспечение-для-работы"><i class="fa fa-check"></i>Программное обеспечение для работы</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#macos"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#linux"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Основы работы с QGIS</b></span></li>
<li class="chapter" data-level="1" data-path="map-design-general.html"><a href="map-design-general.html"><i class="fa fa-check"></i><b>1</b> Создание общегеографической карты</a>
<ul>
<li class="chapter" data-level="1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-intro"><i class="fa fa-check"></i><b>1.1</b> Введение</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-checklist"><i class="fa fa-check"></i><b>1.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-begin"><i class="fa fa-check"></i><b>1.2</b> Начало работы</a></li>
<li class="chapter" data-level="1.3" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-projection"><i class="fa fa-check"></i><b>1.3</b> Настройка системы координат</a></li>
<li class="chapter" data-level="1.4" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-navigation"><i class="fa fa-check"></i><b>1.4</b> Навигация по карте</a></li>
<li class="chapter" data-level="1.5" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-relief"><i class="fa fa-check"></i><b>1.5</b> Оформление изображения рельефа</a></li>
<li class="chapter" data-level="1.6" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-vector"><i class="fa fa-check"></i><b>1.6</b> Добавление векторных наборов данных</a></li>
<li class="chapter" data-level="1.7" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-attributes"><i class="fa fa-check"></i><b>1.7</b> Использование атрибутов объектов при визуализации</a></li>
<li class="chapter" data-level="1.8" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-labels"><i class="fa fa-check"></i><b>1.8</b> Подписи</a></li>
<li class="chapter" data-level="1.9" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-layout"><i class="fa fa-check"></i><b>1.9</b> Настройка компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="map-design-world.html"><a href="map-design-world.html"><i class="fa fa-check"></i><b>2</b> Создание политической карты мира</a>
<ul>
<li class="chapter" data-level="2.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-intro"><i class="fa fa-check"></i><b>2.1</b> Введение</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-checklist"><i class="fa fa-check"></i><b>2.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-begin"><i class="fa fa-check"></i><b>2.2</b> Начало работы</a></li>
<li class="chapter" data-level="2.3" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-input-data"><i class="fa fa-check"></i><b>2.3</b> Загрузка исходных данных</a></li>
<li class="chapter" data-level="2.4" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-qgis-project"><i class="fa fa-check"></i><b>2.4</b> Создание ГИС-проекта и загрузка данных в проект</a></li>
<li class="chapter" data-level="2.5" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-crs"><i class="fa fa-check"></i><b>2.5</b> Настройка системы координат проекта</a></li>
<li class="chapter" data-level="2.6" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-colorbrewer"><i class="fa fa-check"></i><b>2.6</b> Окраска стран в разные цвета</a></li>
<li class="chapter" data-level="2.7" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-other-layers"><i class="fa fa-check"></i><b>2.7</b> Добавление других слоёв на карту</a></li>
<li class="chapter" data-level="2.8" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-layout"><i class="fa fa-check"></i><b>2.8</b> Создание компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html"><i class="fa fa-check"></i><b>3</b> Создание карты четвертичных отложений</a>
<ul>
<li class="chapter" data-level="3.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-intro"><i class="fa fa-check"></i><b>3.1</b> Введение</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-checklist"><i class="fa fa-check"></i><b>3.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-begin"><i class="fa fa-check"></i><b>3.2</b> Начало работы</a></li>
<li class="chapter" data-level="3.3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-data"><i class="fa fa-check"></i><b>3.3</b> Добавление данных в проект</a></li>
<li class="chapter" data-level="3.4" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-classification"><i class="fa fa-check"></i><b>3.4</b> Применение готового стиля к слою</a></li>
<li class="chapter" data-level="3.5" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-csv"><i class="fa fa-check"></i><b>3.5</b> Создание набора пространственных данных из таблицы с координатами</a></li>
<li class="chapter" data-level="3.6" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-final"><i class="fa fa-check"></i><b>3.6</b> Оформление карты</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="map-design-population.html"><a href="map-design-population.html"><i class="fa fa-check"></i><b>4</b> Создание социально-экономической карты</a>
<ul>
<li class="chapter" data-level="4.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-intro"><i class="fa fa-check"></i><b>4.1</b> Введение</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-checklist"><i class="fa fa-check"></i><b>4.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-begin"><i class="fa fa-check"></i><b>4.2</b> Начало работы</a></li>
<li class="chapter" data-level="4.3" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-change-crs"><i class="fa fa-check"></i><b>4.3</b> Изменение системы координат проекта</a></li>
<li class="chapter" data-level="4.4" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-fill-color"><i class="fa fa-check"></i><b>4.4</b> Создание картограмм</a></li>
<li class="chapter" data-level="4.5" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-symbols"><i class="fa fa-check"></i><b>4.5</b> Создание шкалы значков</a></li>
<li class="chapter" data-level="4.6" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-labels"><i class="fa fa-check"></i><b>4.6</b> Добавление подписей значков</a></li>
<li class="chapter" data-level="4.7" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-basemap"><i class="fa fa-check"></i><b>4.7</b> Настройка условных знаков географической основы</a></li>
<li class="chapter" data-level="4.8" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-layout"><i class="fa fa-check"></i><b>4.8</b> Создание макета карты</a></li>
</ul></li>
<li class="part"><span><b>II Редактирование данных в ГИС</b></span></li>
<li class="chapter" data-level="5" data-path="raster-reference.html"><a href="raster-reference.html"><i class="fa fa-check"></i><b>5</b> Привязка графических материалов</a>
<ul>
<li class="chapter" data-level="5.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-intro"><i class="fa fa-check"></i><b>5.1</b> Введение</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-control"><i class="fa fa-check"></i><b>5.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-input"><i class="fa fa-check"></i><b>5.2</b> Привязка растра по меткам координат</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-select-coordinate-system"><i class="fa fa-check"></i><b>5.2.1</b> Определение целевой системы координат</a></li>
<li class="chapter" data-level="5.2.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-topomap"><i class="fa fa-check"></i><b>5.2.2</b> Привязка листа топографической карты</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-basemap"><i class="fa fa-check"></i><b>5.3</b> Добавление базовой карты</a></li>
<li class="chapter" data-level="5.4" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-frommap"><i class="fa fa-check"></i><b>5.4</b> Использование координат с базовой карты</a></li>
<li class="chapter" data-level="5.5" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-accuracy"><i class="fa fa-check"></i><b>5.5</b> Оценка точности привязки</a></li>
<li class="chapter" data-level="5.6" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-linear"><i class="fa fa-check"></i><b>5.6</b> Интерактивная привязка растров на основе аффинного преобразования</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html"><i class="fa fa-check"></i><b>6</b> Ручная векторизация растра</a>
<ul>
<li class="chapter" data-level="6.1" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-intro"><i class="fa fa-check"></i><b>6.1</b> Введение</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-control"><i class="fa fa-check"></i><b>6.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-basedata"><i class="fa fa-check"></i><b>6.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="6.3" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-points"><i class="fa fa-check"></i><b>6.3</b> Создание точечных объектов</a></li>
<li class="chapter" data-level="6.4" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-lines"><i class="fa fa-check"></i><b>6.4</b> Создание линейных объектов</a></li>
<li class="chapter" data-level="6.5" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-polygons"><i class="fa fa-check"></i><b>6.5</b> Создание полигональных объектов</a></li>
<li class="chapter" data-level="6.6" data-path="digitizing-topomap.html"><a href="digitizing-topomap.html#digitizing-topomap-layout"><i class="fa fa-check"></i><b>6.6</b> Оформление макета компоновки</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="digitizing-districts.html"><a href="digitizing-districts.html"><i class="fa fa-check"></i><b>7</b> Пространственные и атрибутивные запросы</a>
<ul>
<li class="chapter" data-level="7.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-intro"><i class="fa fa-check"></i><b>7.1</b> Введение</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-control"><i class="fa fa-check"></i><b>7.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-basedata"><i class="fa fa-check"></i><b>7.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="7.3" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-new-geopackage"><i class="fa fa-check"></i><b>7.3</b> Создание набора пространственных данных</a></li>
<li class="chapter" data-level="7.4" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-drawing"><i class="fa fa-check"></i><b>7.4</b> Векторизация районов</a></li>
<li class="chapter" data-level="7.5" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-query"><i class="fa fa-check"></i><b>7.5</b> Пространственные и атрибутивные запросы</a></li>
<li class="chapter" data-level="7.6" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-diagrams"><i class="fa fa-check"></i><b>7.6</b> Визуализация слоя при помощи картодиаграмм</a></li>
<li class="chapter" data-level="7.7" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-layout"><i class="fa fa-check"></i><b>7.7</b> Создание и экспорт макета компоновки</a></li>
</ul></li>
<li class="part"><span><b>III Векторный анализ</b></span></li>
<li class="chapter" data-level="8" data-path="geometry.html"><a href="geometry.html"><i class="fa fa-check"></i><b>8</b> Геометрические операции с векторными объектами</a>
<ul>
<li class="chapter" data-level="8.1" data-path="geometry.html"><a href="geometry.html#geometry-intro"><i class="fa fa-check"></i><b>8.1</b> Введение</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="geometry.html"><a href="geometry.html#geometry-control"><i class="fa fa-check"></i><b>8.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="8.1.2" data-path="geometry.html"><a href="geometry.html#geometry-annotation"><i class="fa fa-check"></i><b>8.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="geometry.html"><a href="geometry.html#geometry-dissolve"><i class="fa fa-check"></i><b>8.2</b> Объединение контуров схемы четвертичных отложений</a></li>
<li class="chapter" data-level="8.3" data-path="geometry.html"><a href="geometry.html#geometry-buffer"><i class="fa fa-check"></i><b>8.3</b> Построение буферных зон</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="geometry.html"><a href="geometry.html#geometry-buffer-constant"><i class="fa fa-check"></i><b>8.3.1</b> Буферные зоны постоянной ширины</a></li>
<li class="chapter" data-level="8.3.2" data-path="geometry.html"><a href="geometry.html#geometry-buffer-variable"><i class="fa fa-check"></i><b>8.3.2</b> Построение буферных зон переменной ширины</a></li>
<li class="chapter" data-level="8.3.3" data-path="geometry.html"><a href="geometry.html#geometry-buffer-other"><i class="fa fa-check"></i><b>8.3.3</b> Буферные зоны других объектов</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="geometry.html"><a href="geometry.html#geometry-selection"><i class="fa fa-check"></i><b>8.4</b> Сохранение выборки в новую таблицу</a></li>
<li class="chapter" data-level="8.5" data-path="geometry.html"><a href="geometry.html#geometry-erase"><i class="fa fa-check"></i><b>8.5</b> Нахождение геометрической разности объектов</a></li>
<li class="chapter" data-level="8.6" data-path="geometry.html"><a href="geometry.html#geometry-zonal-stat"><i class="fa fa-check"></i><b>8.6</b> Расчёт зональной статистики</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="overlay.html"><a href="overlay.html"><i class="fa fa-check"></i><b>9</b> Анализ пространственных взаимосвязей</a>
<ul>
<li class="chapter" data-level="9.1" data-path="overlay.html"><a href="overlay.html#overlay-intro"><i class="fa fa-check"></i><b>9.1</b> Введение</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="overlay.html"><a href="overlay.html#overlay-control"><i class="fa fa-check"></i><b>9.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="9.1.2" data-path="overlay.html"><a href="overlay.html#overlay-annotation"><i class="fa fa-check"></i><b>9.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="overlay.html"><a href="overlay.html#overlay-vectors"><i class="fa fa-check"></i><b>9.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="9.3" data-path="overlay.html"><a href="overlay.html#overlay-intersect"><i class="fa fa-check"></i><b>9.3</b> Оверлей слоев методом пересечения</a></li>
<li class="chapter" data-level="9.4" data-path="overlay.html"><a href="overlay.html#overlay-merge"><i class="fa fa-check"></i><b>9.4</b> Слияние результатов пересечения с целью получения показателя пространственной связи</a></li>
<li class="chapter" data-level="9.5" data-path="overlay.html"><a href="overlay.html#overlay-sumarea-subtypes"><i class="fa fa-check"></i><b>9.5</b> Объединение подтипов почв для подсчёта суммарной площади</a></li>
<li class="chapter" data-level="9.6" data-path="overlay.html"><a href="overlay.html#overlay-fieldcalc"><i class="fa fa-check"></i><b>9.6</b> Расчёт площадей объектов</a></li>
<li class="chapter" data-level="9.7" data-path="overlay.html"><a href="overlay.html#overlay-join"><i class="fa fa-check"></i><b>9.7</b> Соединение таблиц по названию подтипа почв</a></li>
<li class="chapter" data-level="9.8" data-path="overlay.html"><a href="overlay.html#overlay-resulting"><i class="fa fa-check"></i><b>9.8</b> Вычисление результирующих значений показателя связи</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="spatrelations.html"><a href="spatrelations.html"><i class="fa fa-check"></i><b>10</b> Анализ пространственных соотношений</a>
<ul>
<li class="chapter" data-level="10.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-intro"><i class="fa fa-check"></i><b>10.1</b> Введение</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-control"><i class="fa fa-check"></i><b>10.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="10.1.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-annotation"><i class="fa fa-check"></i><b>10.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-vizual"><i class="fa fa-check"></i><b>10.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="10.3" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-overlay"><i class="fa fa-check"></i><b>10.3</b> Расчёт площадей и оверлей</a></li>
<li class="chapter" data-level="10.4" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-join"><i class="fa fa-check"></i><b>10.4</b> Соединение таблиц по ключевому полю</a></li>
<li class="chapter" data-level="10.5" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-other"><i class="fa fa-check"></i><b>10.5</b> Расчёт площадей, не покрытых объектами</a></li>
<li class="chapter" data-level="10.6" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-symbology"><i class="fa fa-check"></i><b>10.6</b> Настройка символики</a></li>
</ul></li>
<li class="part"><span><b>IV Растровый анализ</b></span></li>
<li class="chapter" data-level="11" data-path="weighted-overlay.html"><a href="weighted-overlay.html"><i class="fa fa-check"></i><b>11</b> Оптимизация местоположения</a>
<ul>
<li class="chapter" data-level="11.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-intro"><i class="fa fa-check"></i><b>11.1</b> Введение</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-control"><i class="fa fa-check"></i><b>11.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="11.1.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-annotation"><i class="fa fa-check"></i><b>11.1.2</b> Аннотация</a></li>
<li class="chapter" data-level="11.1.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-warning"><i class="fa fa-check"></i><b>11.1.3</b> Прежде чем начать…</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-init"><i class="fa fa-check"></i><b>11.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="11.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-slopes"><i class="fa fa-check"></i><b>11.3</b> Расчет углов наклона</a></li>
<li class="chapter" data-level="11.4" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-distances"><i class="fa fa-check"></i><b>11.4</b> Расчет расстояний</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-roads"><i class="fa fa-check"></i><b>11.4.1</b> Расстояния до дорог</a></li>
<li class="chapter" data-level="11.4.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-streams"><i class="fa fa-check"></i><b>11.4.2</b> Водотоки</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass"><i class="fa fa-check"></i><b>11.5</b> Переклассификация наборов данных</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-distance"><i class="fa fa-check"></i><b>11.5.1</b> Переклассификация растров расстояний</a></li>
<li class="chapter" data-level="11.5.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-slope"><i class="fa fa-check"></i><b>11.5.2</b> Переклассификация растра крутизны</a></li>
<li class="chapter" data-level="11.5.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#преобразование-слоя-типов-землепользования-в-растровое-представление"><i class="fa fa-check"></i><b>11.5.3</b> Преобразование слоя типов землепользования в растровое представление</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-combination"><i class="fa fa-check"></i><b>11.6</b> Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</a></li>
<li class="chapter" data-level="11.7" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-final-decision"><i class="fa fa-check"></i><b>11.7</b> Окончательный выбор участка</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="hydrodem.html"><a href="hydrodem.html"><i class="fa fa-check"></i><b>12</b> Гидрологическое моделирование на основе ЦМП</a>
<ul>
<li class="chapter" data-level="12.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-intro"><i class="fa fa-check"></i><b>12.1</b> Введение</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-control"><i class="fa fa-check"></i><b>12.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="12.1.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-annotation"><i class="fa fa-check"></i><b>12.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-init"><i class="fa fa-check"></i><b>12.2</b> Предварительные операции</a></li>
<li class="chapter" data-level="12.3" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-preprocessing"><i class="fa fa-check"></i><b>12.3</b> Подготовка ЦМП к анализу</a></li>
<li class="chapter" data-level="12.4" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-fill"><i class="fa fa-check"></i><b>12.4</b> Гидрологическая коррекция ЦМП</a></li>
<li class="chapter" data-level="12.5" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-flowacc"><i class="fa fa-check"></i><b>12.5</b> Расчёт водосборной площади</a></li>
<li class="chapter" data-level="12.6" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-basin"><i class="fa fa-check"></i><b>12.6</b> Определение границ бассейна р. Протвы</a></li>
<li class="chapter" data-level="12.7" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-network"><i class="fa fa-check"></i><b>12.7</b> Создание модели водотоков на основе водосборной площади</a></li>
<li class="chapter" data-level="12.8" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-watersheds"><i class="fa fa-check"></i><b>12.8</b> Создание модели частных водосборов на основе водосборной площади</a></li>
<li class="chapter" data-level="12.9" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-mapping"><i class="fa fa-check"></i><b>12.9</b> Картографическое представление результата</a></li>
</ul></li>
<li class="part"><span><b>V Сетевой анализ</b></span></li>
<li class="chapter" data-level="13" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>13</b> Анализ транспортных сетей</a>
<ul>
<li class="chapter" data-level="13.1" data-path="networks.html"><a href="networks.html#networks-intro"><i class="fa fa-check"></i><b>13.1</b> Введение</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="networks.html"><a href="networks.html#networks-control"><i class="fa fa-check"></i><b>13.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="13.1.2" data-path="networks.html"><a href="networks.html#networks-annotation"><i class="fa fa-check"></i><b>13.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="networks.html"><a href="networks.html#networks-init"><i class="fa fa-check"></i><b>13.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="13.3" data-path="networks.html"><a href="networks.html#networks-query"><i class="fa fa-check"></i><b>13.3</b> Выбор элементов дорожной сети</a></li>
<li class="chapter" data-level="13.4" data-path="networks.html"><a href="networks.html#networks-route"><i class="fa fa-check"></i><b>13.4</b> Построение маршрута</a></li>
<li class="chapter" data-level="13.5" data-path="networks.html"><a href="networks.html#networks-isochrones"><i class="fa fa-check"></i><b>13.5</b> Расчёт изохрон</a></li>
<li class="chapter" data-level="13.6" data-path="networks.html"><a href="networks.html#networks-matrix"><i class="fa fa-check"></i><b>13.6</b> Работа с матрицей «источник-назначение»</a></li>
</ul></li>
<li class="part"><span><b>VI Геокодирование</b></span></li>
<li class="chapter" data-level="14" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>14</b> Адресное геокодирование и ядерная оценка плотности</a>
<ul>
<li class="chapter" data-level="14.1" data-path="geocoding.html"><a href="geocoding.html#geoding-intro"><i class="fa fa-check"></i><b>14.1</b> Введение</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-control"><i class="fa fa-check"></i><b>14.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="14.1.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-annotation"><i class="fa fa-check"></i><b>14.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-input"><i class="fa fa-check"></i><b>14.2</b> Получение исходных данных</a></li>
<li class="chapter" data-level="14.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-debug"><i class="fa fa-check"></i><b>14.3</b> Тестирование работы сервиса геокодирования</a></li>
<li class="chapter" data-level="14.4" data-path="geocoding.html"><a href="geocoding.html#geocoding-import"><i class="fa fa-check"></i><b>14.4</b> Импорт списка адресов в QGIS</a></li>
<li class="chapter" data-level="14.5" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch-install"><i class="fa fa-check"></i><b>14.5</b> Установка модуля пакетного геокодирования</a></li>
<li class="chapter" data-level="14.6" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch"><i class="fa fa-check"></i><b>14.6</b> Пакетное геокодирование</a></li>
<li class="chapter" data-level="14.7" data-path="geocoding.html"><a href="geocoding.html#geocoding-mapping"><i class="fa fa-check"></i><b>14.7</b> Картографирование плотности объявлений</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="mastertest.html"><a href="mastertest.html"><i class="fa fa-check"></i><b>15</b> Инструкция по регистрации в системе Мастер-тест</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Основы геоинформатики: практикум в QGIS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hydrodem" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Упражнение 12</span> Гидрологическое моделирование на основе ЦМП<a href="hydrodem.html#hydrodem" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex12.zip">Архив с исходными данными</a></p>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex12_%D0%BE%D1%82%D1%87%D1%91%D1%82.docx" target="_blank">Контрольный лист</a></p>
<div id="hydrodem-intro" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Введение<a href="hydrodem.html#hydrodem-intro" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Цель задания</strong> — научиться на основе цифровой модели рельефа выделять водотоки и их водосборные бассейны в автоматическом режиме. Осуществлять расчет статистики по высотам в рамках выделенных бассейнов</p>
<p><strong>Необходимая теоретическая подготовка:</strong> Растровая модель пространственных данных, цифровые модели рельефа (ЦМР), цифровые модели поверхности (ЦМП) и их типы, построение ЦМР, построение производных поверхностей (углы наклона, водосборная площадь), гидрологическое моделирование с использованием ЦМР и его принципы.</p>
<p><strong>Необходимая практическая подготовка:</strong> Знание основных компонент интерфейса QGIS (менеджер источников данных, таблица слоёв, фрейм карты, менеджер компоновок). Работа с различными форматами источников пространственных данных. Настройка символики и подписей объектов. Владение базовыми ГИС-технологиями. Создание компоновки карты: название, легенда, масштаб, градусная сетка.</p>
<p><strong>Исходные данные:</strong> тайлы глобальной ЦМП <a href="https://data.bris.ac.uk/data/dataset/s5hqmjcdj8yo2ibzi9b4ew3sn">FABDEM V1-2</a></p>
<p><strong>Результат:</strong> Схема водотоков и их водосборных бассейнов, построенная по ЦМП, с указанием морфометрических параметров бассейнов.</p>
<div id="hydrodem-control" class="section level3 hasAnchor" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> Контрольный лист<a href="hydrodem.html#hydrodem-control" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Создать виртуальный растр из отдельных тайлов ЦМП;</p></li>
<li><p>Выполнить перепроецирование ЦМП;</p></li>
<li><p>Рассчитать водосборную площадь</p></li>
<li><p>Построить границы бассейна указанного створа</p></li>
<li><p>Обрезать растры по границам построенного бассейна</p></li>
<li><p>Построить сеть тальвегов и частных водосборов</p></li>
<li><p>Рассчитать характеристики поверхности для частных водосборов</p></li>
<li><p>Визуализировать результаты расчёта</p></li>
</ul>
</div>
<div id="hydrodem-annotation" class="section level3 hasAnchor" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> Аннотация<a href="hydrodem.html#hydrodem-annotation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Цифровые модели рельефа играют важную роль в гидрологическом и геоморфологическом анализе. Одно из основных приложений ЦМР, позволивших значительно упростить анализ речных систем, — это автоматизированное построение водосборов и расчет их морфометрических характеристик. Большинство современных программных средств ГИС включают те или иные реализации инструментов гидрологического моделирования на основе ЦМР. QGIS в этом смысле является исключением: у него нет собственных инструментов анализа такого рода, но есть возможность использовать наработки других программных продуктов — например, <a href="https://grass.osgeo.org/">GRASS</a>, <a href="https://saga-gis.sourceforge.io/en/index.html">SAGA</a> и <a href="https://www.whiteboxgeo.com/whitebox-workflows-for-python/">Whitebox</a>.</p>
<p>В этом упражнении вы используете инструменты SAGA посредством интерфейса QGIS, чтобы выполнить гидрологический анализ цифровой модели рельефа, а затем визуализируете полученный результат в виде блок-диаграммы (3D-изображения).</p>
</div>
</div>
<div id="hydrodem-init" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Предварительные операции<a href="hydrodem.html#hydrodem-init" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Перед началом работы нам потребуется, как обычно, создать и настроить рабочую директорию, а также установить и настроить два плагина для QGIS — а именно <a href="https://github.com/north-road/qgis-processing-saga-nextgen">Processing Saga NextGen Provider</a>, требуемый для анализа, и <a href="https://github.com/minorua/Qgis2threejs">Qgis2threejs</a>, который будет использоваться для визуализации на заключительных этапах анализа. Модуль Qgis2threejs работает «из коробки», а для работы Processing Saga NextGen Provider требуется загрузка дополнительного программного обеспечения.</p>
<ol style="list-style-type: decimal">
<li><p>Загрузите исходные данные для упражнения и поместите их в свою рабочую директорию.</p></li>
<li><p>Запустите QGIS и сохраните проект в свою рабочую директорию.</p></li>
<li><p>Установите модуль <strong>Qgis2threejs</strong>.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/module01_Qgis2threejs.png" />
4. Установите модуль <strong>Processing Saga NextGen Provider</strong>.</p>
<p><img src="images/Ex12_HydroDEM/module02_ProcessingSaga.png" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Для работы модуля необходимо, чтобы на вашем компьютере имелся дистрибутив SAGA. Если эта программа уже имеется на вашем компьютере, перейдите к шагу 7. Если у вас нет этой программы, перейдите на <a href="https://sourceforge.net/projects/saga-gis/">страницу загрузки SAGA GIS</a> и загрузите архив с дистрибутивом, нажав на кнопку Download. Размер архива составляет порядка 80 МБ в сжатом виде и 200 МБ после распаковки.</li>
</ol>
<div class="float">
<img src="images/Ex12_HydroDEM/saga_download_page.png" alt="Страница загрузки SAGA GIS: https://sourceforge.net/projects/saga-gis/" />
<div class="figcaption">Страница загрузки SAGA GIS: <a href="https://sourceforge.net/projects/saga-gis/">https://sourceforge.net/projects/saga-gis/</a></div>
</div>
<ol start="6" style="list-style-type: decimal">
<li>Когда дистрибутив SAGA GIS будет загружен, распакуйте его в свою рабочую директорию.</li>
</ol>
<blockquote>
<p>Примечание: строго говоря, неважно, в какой именно директории будет размещён дистрибутив SAGA GIS. Если вы уверенный пользователь ПК, можете размещать его там, где вам удобнее.</p>
</blockquote>
<ol start="7" style="list-style-type: decimal">
<li><p>С помощью Проводника Windows или аналогичных средств MacOS и Linux скопируйте полный путь к каталогу с дистрибутивом SAGA в буфер обмена. Он может выглядеть, например, так: <code>D:\GIS\207_CAR\Entin\Ex12\saga-9.3.2_x64</code>.</p></li>
<li><p>В основном окне QGIS откройте меню «Настройки» — «Параметры» и перейдите на вкладку «Анализ». В открывшемся меню разверните блок «Источники» и найдите в нём пункт «SAGANG». Включите в этом пункте все опции, а в строку SAGA Folder вставьте полный путь к каталогу с дистрибутивом SAGA. Результат будет выглядеть подобно тому, как показано на рисунке ниже:</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/saga_settings.png" /></p>
</div>
<div id="hydrodem-preprocessing" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Подготовка ЦМП к анализу<a href="hydrodem.html#hydrodem-preprocessing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Чтобы работать с цифровой моделью местности, необходимо объединить все тайлы в единую мозаику, затем обрезать (кадрировать) её по охвату территории анализа и перепроецировать из географической системы координат в прямоугольную.</p>
<blockquote>
<p>Создание мозаики из тайлов, кадрирование и перепроектирование — типичные процедуры подготовки растровых тайлов к геоинформационному анализу. Хранить каждый промежуточный результат в виде отдельного файла, как правило, нет необходимости, а при больших объёмах данных и малых объёмах свободного места на диске — нет и возможности. На помощь здесь приходит виртуальный растр (<a href="https://gdal.org/drivers/raster/vrt.html">VRT</a>) — структура, хранящая ссылки на исходные данные и необходимые операции их преобразования.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>Загрузите тайлы FABDEM из папки <code>fabdem</code> в проект QGIS.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/QGIS_01_tiles.png" /></p>
<ol start="2" style="list-style-type: decimal">
<li><p>Соберите мозаику растровых тайлов. Для этого воспользуйтесь инструментом «Создать виртуальный растр» («Растр» — «Прочее»).</p>
<ul>
<li><p>Добавьте тайлы FABDEM в качестве исходных данных</p></li>
<li><p>Если установлена опция <em>Place each input file into a separate band</em>, отключите её.</p></li>
<li><p>Укажите, что виртуальный растр должен быть сохранён в рабочую директорию под именем <code>fabdem_mosaic.vrt</code></p></li>
</ul>
<p><img src="images/Ex12_HydroDEM/QGIS_02_vrt.png" /></p>
<p>Результат будет автоматически добавлен в проект</p>
<p><img src="images/Ex12_HydroDEM/QGIS_03_mosaic.png" /></p></li>
<li><p>Удалите исходные тайлы FABDEM из проекта.</p></li>
<li><p>Для анализа нам не потребуется вся площадь полученной мозаики, мы можем обрезать (кадрировать) мозаику до необходимого охвата, чтобы оптимизировать скорость вычислений и объём требуемой памяти. Для этого воспользуемся инструментом «Обрезать растр по охвату…» («Растр» — «Извлечение»).</p>
<ul>
<li><p>Укажите слой fabdem_mosaic в качестве исходного набора данных</p></li>
<li><p>Введите следующий охват обрезки: <code>35.4,36.5,55.1,55.6</code> (это, соответственно, минимальная долгота, максимальная долгота, минимальная широта и максимальная широта. Для разделения целой и дробной части используется точка, для разделения чисел — запятая).</p></li>
<li><p>Результат сохраните в рабочую директорию под именем <code>fabdem_mosaic_crop.vrt</code></p></li>
</ul>
<p><img src="images/Ex12_HydroDEM/QGIS_04_mosaic_crop.png" /></p></li>
<li><p>Когда результат обрезки будет добавлен в проект, удалите из проекта старую мозаику и увеличьте изображение до охвата обрезанного набора данных.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/QGIS_05_mosaic_crop_result.png" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Теперь необходимо перевести растр в прямоугольную систему координат. Для крупномасштабного картографирования обычно используют системы координат топографических карт, и в этом смысле наша территория анализа расположена не очень удачно — на стыке двух соседних зон. Выберите подходящую систему прямогольных координат из систем проекции UTM на датуме WGS 84. Нужный номер зоны определите самостоятельно. Установите для проекта выбранную систему координат и сделайте снимок экрана.</li>
</ol>
<p><strong>Вопрос 1:</strong> укажите EPSG-код выбранной системы координат</p>
<p><kbd><strong>Снимок экрана №1:</strong> окно QGIS после изменения системы координат</kbd></p>
<p>Из упражнения 1 мы помним, что QGIS умеет перепроецировать наборы данных на лету. Однако для целей морфометрического анализа ЦМП нам необходимо, чтобы набор данных был «физически» сохранён с использованием проецированной системы координат.</p>
<ol start="7" style="list-style-type: decimal">
<li>Используйте инструмент «Деформация (перепроецирование…)» («Растр» — «Проекции»), чтобы конвертировать вашу мозаику в новый набор данных. Укажите исходную и целевую систему координат (целевая СК должна совпадать с СК проекта), установите метод интерполяции «Билинейная (ядро 2×2)». Сохраните перепроецированный растр под именем <code>DEM</code> (от англ. <em>Digital Elevation Model</em>) в рабочую директорию, формат файла — GeoTIFF.</li>
</ol>
<blockquote>
<p>Будьте внимательны: все ваши предыдущие результаты сохранялись в формат виртуальных растров (VRT), но на этом шаге вам нужно подготовить «реальный» растр (GeoTIFF). QGIS по умолчанию предложит вам сохранить результат в формат VRT, поскольку именно этот формат использовался в предыдущих шагах. Измените выходной формат на GeoTIFF</p>
</blockquote>
<ol start="8" style="list-style-type: decimal">
<li>Когда перепроецированный растр добавится в проект, удалите из него «старую» мозаику.</li>
</ol>
</div>
<div id="hydrodem-fill" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Гидрологическая коррекция ЦМП<a href="hydrodem.html#hydrodem-fill" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Гидрологическое моделирование с использованием ЦМП основывается на следующей идее: моделируемая вода стекает из ячейки с большей высотой в соседнюю ячейку с меньшей высотой. Трассируя поток вниз по склону, можно связывать ячейки в так называемые “сети потока” (<em>drainage networks</em>) и определять водосборные площади и границы бассейнов.</p>
<p><img src="images/Ex12_HydroDEM/DEM_flow_concept.png" /></p>
<p>Если на модели есть замкнутые локальные понижения, то они выступают как препятствие для распространения стока.</p>
<p><img src="images/Ex12_HydroDEM/depression_scheme.png" /></p>
<p>Распространённая практика — удалять замкнутые локальные понижения с ЦМП перед началом собственно гидрологического моделирования. Удалить повышения можно путём заполнения, то есть увеличения высот внутри них — таким образом понижение либо исчезает, либо перестаёт быть замкнутым. По-английски эта операция называется <em>Fill sinks</em> или <em>Fill depressions</em>. Альтернативный вариант — разрушать границы замкнутых локальных понижений (<em>Breach depressions</em>), чтобы они переставали быть замкнутыми. В SAGA реализованы оба варианта, но разрушение границ понижений работает значительно дольше заполнения, поэтому мы воспользуемся заполнением.</p>
<ol style="list-style-type: decimal">
<li><p>Создайте в вашей рабочей директории папку <code>processing_saga</code>. Поскольку на этом и на следующих шагах мы будем создавать множество наборов данных с помощью SAGA, желательно, чтобы они хранились хотя бы в относительном порядке.</p></li>
<li><p>Найдите инструмент <em>Fill Sinks XXL (Wang &amp; Liu)</em> через поиск в панели инструментов. Этот инструмент преобразует ЦМР таким образом, что на месте замкнутых понижений будет сформирована наклонная поверхность. Угол наклона задаётся пользователем. Примените этот инструмент к набору DEM с углом наклона 0,0001°. Результат сохраните в директорию <code>processing_saga</code> под именем <code>DEM_filled</code>, расширение оставьте таким, какое предлагается по умолчанию (<code>*.sdat</code>).</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/SAGA_01_fill.png" /></p>
<blockquote>
<p>SAGA GRID — нативный растровый формат SAGA. Он состоит как минимум из двух файлов: заголовка (*.sgrd) и файла с данными (*.sdat). Часто к ним добавляется файл с описанием системы координат (*.prj). Наконец, если набор был создан непосредственно в SAGA (или, что то же самое, в QGIS), он будет сопровождаться файлом *.mgrd, в котором записывается история применения инструментов геообработки.</p>
</blockquote>
<ol start="3" style="list-style-type: decimal">
<li>Сравните исходную и скорректированную ЦМП.</li>
</ol>
<p><strong>Вопрос 2:</strong> Как изменилась амплитуда высот ЦМП после заполнения замкнутых локальных понижений? Какие формы рельефа изменились наиболее сильно?</p>
</div>
<div id="hydrodem-flowacc" class="section level2 hasAnchor" number="12.5">
<h2><span class="header-section-number">12.5</span> Расчёт водосборной площади<a href="hydrodem.html#hydrodem-flowacc" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Водосборная площадь (англ. <em>catchment area</em>) в геоморфометрии определяется для каждой точки поверхности так, как если бы точка была замыкающим створом. В регулярно-сеточном анализе водосборная площадь определяется для отдельных ячеек ЦМП и равняется суммарной площади всех ячеек, сток из которых проходит через данную ячейку (по принципу, описанному выше). Вместо площадей ячеек можно использовать какой-нибудь весовой коэффициент. Например, если этот коэффициент представляет слой поверхностного стока, то результирующая величина будет являться объёмом стока для данной ячейки.</p>
<p>Водосборную площадь вместе со всеми другими величинами, которые можно рассчитать по аналогичному принципу, часто называют аккумуляцией потока (англ. <em>flow accumulation</em>). Именно так называются инструменты расчёта водосборной площади в большинстве современных ГИС-пакетов, в том числе в последних версиях SAGA. Однако в модуле SAGA Processing Provider сохраняются старые названия соответствующих инструментов.</p>
<ol style="list-style-type: decimal">
<li><p>Найдите инструмент <strong>Catchment Area</strong> (без дополнительных слов в названии) в панели инструментов. Запустите его, используя следующие настройки:</p>
<ul>
<li>Исходное поле высот (Elevation): <code>DEM_filled</code></li>
<li>Целевой растр аккумуляции (Accumulation Target): <code>DEM_filled</code></li>
<li>Метод расчёта: [0] Deterministic 8</li>
<li>Выходной растр водосборной площади (Flow Accumulation): сохраните в директорию <code>processing_saga</code> под именем <code>flowacc</code>. Оставьте включённой опцию «Открыть выходной файл после завершения алгоритма».</li>
<li>Все прочие выходные растры: оставьте поля пустыми и отключите опции «Открыть выходной файл после завершения алгоритма».</li>
<li>Остальные параметры оставьте по умолчанию.</li>
</ul></li>
<li><p>Запустите расчёт и дождитесь его завершения (может занимать до 10 минут). По окончании расчётов в проект QGIS будет добавлен новый растровый слой:</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/SAGA_02_CArea.png" /></p>
<blockquote>
<p>Водосборная площадь при движении вниз по склону увеличивается экспоненциально, поэтому изображение в оттенках серого, которое вы видите, почти чёрное.</p>
</blockquote>
<ol start="3" style="list-style-type: decimal">
<li><p>Измените стиль отображения растра на «Одноканальное псевдоцветное», максимальное значение — <code>1e7</code>, и выберите шкалу Blues. Примените изменения.</p></li>
<li><p>Перейдите на вкладку «Пирамиды» и постройте пирамидальные слои всех доступных разрешений для вашего набора данных. Для этого выберите в списке справа все доступные разрешения, установите в переключателе внизу метод передискретизации Гаусса и нажмите кнопку «Построение пирамид». Примените изменения.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/SAGA_03_pyramids.png" /></p>
<blockquote>
<p>Пирамидальные слои, или пирамиды — это производные растры относительно низкого разрешения, создаваемые на основе исходного растра для улучшения производительности в процессе визуализации. Если используется мелкий масштаб карты, ГИС-пакет отрисовывает не исходный растр, а один из пирамидальных слоёв.</p>
</blockquote>
<p><img src="images/Ex12_HydroDEM/SAGA_04_pyramids_result.png" /></p>
<blockquote>
<p>Если после построения пирамид на экране не произойдёт никаких изменений, перезагрузите проект QGIS.</p>
</blockquote>
<ol start="5" style="list-style-type: decimal">
<li><p>Изучите полученное изображение, увеличивая и уменьшая масштаб визуализации.</p></li>
<li><p>Установите для растра водосборной площади прозрачность 50 %. Остальные слои отключите.</p></li>
<li><p>Добавьте в проект базовую карту Google Hybrid. Увеличьте изображение до севера Калужской области, где находится д. Сатино. Найдите к северу от неё место слияния рек Протва и Исьма.Оцените, в какой мере области высоких значений водосборной площади соответствуют положениям водотоков и крупных эрозионных форм.</p></li>
<li><p>Установите масштаб отображения 1:1 и сделайте снимок экрана так, чтобы на него попали окрестности д. Сатино.</p></li>
</ol>
<p><kbd><strong>Снимок экрана № 2:</strong> растр водосборной площади после настройки визуализации</kbd></p>
<p><strong>Вопрос 3:</strong> Можно ли сказать, что области высоких значений водосборной площади, рассчитанной по ЦМП, соответствуют тальвегам эрозионных форм и руслам рек? Ответ обоснуйте.</p>
</div>
<div id="hydrodem-basin" class="section level2 hasAnchor" number="12.6">
<h2><span class="header-section-number">12.6</span> Определение границ бассейна р. Протвы<a href="hydrodem.html#hydrodem-basin" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Для дальнейшего анализа нам будет нужна только территория водосборного бассейна р. Протвы до слияния её с р. Исьмой. На этом шаге мы определим границы бассейна этого створа.</p>
<ol style="list-style-type: decimal">
<li>Увеличьте изображение до места слияния Протвы и Исьмы, как показано на рисунке ниже:</li>
</ol>
<p><img src="images/Ex12_HydroDEM/SAGA_05_gauge.png" />
2. В панели слоёв выберите слой <code>flowacc</code>, затем включите инструмент идентификации и укажите пиксель растра, предшествующий слиянию. В новых версиях QGIS выбранный пиксель подсвечивается красным цветом. Убедитесь, что в панели результата определения выводятся координаты выбранной точки.</p>
<p><img src="images/Ex12_HydroDEM/SAGA_06_gauge.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li><p>Найдите и запустите инструмент <strong>Upslope Area</strong> из группы SAGA. Этот инструмент предназначен для идентификации всех ячеек, сток из которых проходит через точку с заданными координатами — фактически, он позволяет определить границы водосборного бассейна.</p></li>
<li><p>Задайте входные параметры инструмента <strong>Upslope Area</strong>. Скопируйте координаты X и Y в соответствующие поля. Установите <code>DEM_filled</code> в качестве исходной ЦМП и выберите метод Deterministic 8. Остальные опции не задавайте. Результат сохраните в папку <code>processing_saga</code> под именем <code>basin_protva_raster</code>.</p></li>
<li><p>Когда результат будет добавлен в проект, увеличьте изображение до полного охвата новго слоя.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/SAGA_07_basin.png" /></p>
<p>На полученном растре представлено всего два значения: <span class="math inline">\(100\)</span> для ячеек, входящих в границы бассейна, и <span class="math inline">\(0\)</span> для всех остальных ячеек.</p>
<ol start="6" style="list-style-type: decimal">
<li><p>Векторизуйте полученный растр. Результат векторизации сохраните в папку <code>processing_saga</code> под именем <code>basin_protva_polygon</code>, формат — шейп-файл (*.shp)</p></li>
<li><p>Если необходимо, удалите из результата векторизации полигон, соответствующий областям за пределами бассейна р. Протва. Также отключите растр границ бассейна.</p></li>
<li><p>Изобразите полученный полигон с помощью обводки красного цвета и Удалите из проекта растровый слой бассейна.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/SAGA_08_basin.png" /></p>
<ol start="9" style="list-style-type: decimal">
<li><p>Используйте полученный полигон, чтобы обрезать растры заполненной ЦМП и водосборной площади по маске. Для этого воспользуйтесь инструментом «Обрезать растр по маске…» («Растр» — «Извлечение»). Назовите целевые растры, соответственно, <code>DEM_fill_crop.tif</code> и <code>flowacc_crop.tif</code>; обратие внимание, что формат выходного растра опять нужно задать вручную как GeoTIFF.</p></li>
<li><p>Когда обрезанные слои будут добавлены в проект, расположите их в следующем порядке: вверху полигон водосборного бассейна, затем растр водосборной площади, и под ним растр ЦМП. Остальные слои, кроме мозаики спутниковых снимков, отключите.</p></li>
<li><p>Сделайте снимок экрана.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №3:</strong> Границы водосборного бассейна и обрезанные тематические растры</kbd></p>
</div>
<div id="hydrodem-network" class="section level2 hasAnchor" number="12.7">
<h2><span class="header-section-number">12.7</span> Создание модели водотоков на основе водосборной площади<a href="hydrodem.html#hydrodem-network" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>Растр водосборной площади (или объёма стока) позволяет выделить сеть потенциальных водотоков. Ячейка считается принадлежащей к сети потенциальных водотоков, если величина водосборной площади в ней превышает некоторый заданный порог. Это упрощённый принцип, но он позволяет строить сети, подобные реальным.</p>
<p>Для выборки ячеек в QGIS можно воспользоваться уже знакомым вам инструментом переклассификации (см. <a href="weighted-overlay.html#weighted-overlay-reclass">Переклассификация наборов данных</a>). Альтернативный вариант — специально предназначенный для этого инструмент Channel Network из набора SAGA.</p>
<ol style="list-style-type: decimal">
<li><p>Запустите инструмент Channel Network. Задайте следующие параметры:</p>
<ul>
<li>Elevation: DEM_fill</li>
<li>Initiation grid: flowacc</li>
<li>Initiation threshold: <span class="math inline">\(1000000\)</span></li>
<li>Остальные параметры оставьте по умолчанию</li>
</ul>
<p>Обратите внимание, что мы используем исходные наборы данных, а не обрезанные по маске на предыдущем шаге. Это связано с некорректной работой SAGA в этих условиях.</p>
<p>Инструмент выводит три выходных набора данных: 1) растр сети водотоков, где каждый сегмент водотока маркируется уникальным индексом; 2) растр направлений стока для в пределах сети водотоков; 3) векторное представление сети водотоков. Укажите, куда и под каким именем должны быть сохранены эти результаты:</p>
<ul>
<li>Растр водотоков: в каталог <code>processing_saga</code> под именем <code>channels_raster</code>;</li>
<li>Растр направлений стока: в каталог <code>processing_saga</code> под именем <code>channels_direction</code>;</li>
<li>Векторная сеть водотоков: в каталог <code>processing_saga</code> под именем <code>channels_polyline</code></li>
</ul></li>
<li><p>Дождитесь, пока инструмент анализа завершит работу (может занимать порядка 10 минут) и изучите полученный результат.</p></li>
<li><p>Обрежьте векторное представление сети водотоков, используя границы водобсорного бассейна в качестве маски. Результат сохраните в вашу рабочую директорию (не в папку <code>processing_saga</code>) в формате GeoPackage. Файл GeoPackage назовите <code>Ex12</code>, а таблицу водотоков в нём — <code>rivers</code>.</p></li>
<li><p>Визуализируйте слой rivers на основе символизации по диапазонам значений. Значения возьмите из поля <code>Order</code>, знак — <em>topo hydrology</em>, метод (изменения знака) — размер, режим классификации — логарифмическая шкала (см. рисунок ниже).</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/QGIS_06_rivers.png" /></p>
<p><img src="images/Ex12_HydroDEM/QGIS_07_rivers.png" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Удалите из проекта исходный векторный слой водотоков и растр направлений стока.</li>
</ol>
</div>
<div id="hydrodem-watersheds" class="section level2 hasAnchor" number="12.8">
<h2><span class="header-section-number">12.8</span> Создание модели частных водосборов на основе водосборной площади<a href="hydrodem.html#hydrodem-watersheds" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>В этой части упражнения мы создадим сетку частных водосборов для каждого сегмента водотока. При этом водосбор соответствующего сегмента не будет включать площади, относящиеся к сегментам, лежащим выше по течению.</p>
<p>Для создания сетки частных водосборов в SAGA используется инструмент <strong>Watershed Basins</strong>.</p>
<ol style="list-style-type: decimal">
<li><p>Обрежьте растр сети водотоков по маске бассейна. В отличие от предыдущих шагов с обрезкой, отключите опцию «Совместить охват кадрированного растра с охватом слоя маски» — это позволит сохранить экстент исходного растра и при этом не брать в расчёт те водотоки, которые находятся за пределами изучаемого бассейна. Результат сохраните в папку <code>processing_saga</code> под именем <code>channels_raster_crop</code>, формат — GeoTIFF.</p></li>
<li><p>Запустите инструмент Watershed Basins. Задайте следующие настройки:</p>
<ul>
<li>Высоты: DEM_fill</li>
<li>Сеть водотоков: channels_raster_crop</li>
<li>Результат сохраните в <code>processing_saga</code> под именем <code>watersheds_raster</code></li>
</ul></li>
<li><p>Дождитесь, пока инструмент завершит работу. Изучите полученный набор данных.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/SAGA_09_watersheds.png" />
4. Векторизуйте полученную сетку водосборных бассейнов. Результат векторизации сохраните в папку <code>processing_saga</code> под именем <code>watersheds_vector</code>.</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Рассчитайте зональную статистику высот (инструмент «Зональная статистика»), используя <code>watersheds_vector</code> в качестве исходного слоя и <code>DEM_fill</code> в качестве растрового слоя. Рассчитайте минимальную, максимальную, среднюю и медианную высоты, а также амплитуду (диапазон) высот. Результат сохраните в файл GeoPackage <code>Ex12</code>, созданный ранее, под именем <code>watersheds_stat</code>.</p></li>
<li><p>Удалите из проекта все представления частных водосборов, кроме финального <code>watersheds_stat</code>. Разместите слой <code>watersheds_stat</code> под слоем <code>rivers</code>.</p></li>
<li><p>Визуализируйте сетку водосборных бассейнов путём символизации по диапазонам значений. Для классификации используйте поле <code>_range</code>, представляющее амплитуду. Настройки классификации и цветовую шкалу подберите самостоятельно. Установите для слоя прозрачность <span class="math inline">\(50 %\)</span>.</p></li>
</ol>
</div>
<div id="hydrodem-mapping" class="section level2 hasAnchor" number="12.9">
<h2><span class="header-section-number">12.9</span> Картографическое представление результата<a href="hydrodem.html#hydrodem-mapping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="hydrodem.html#hydrodem">В начало упражнения ⇡</a></p>
<p>На этом этапе мы создадим трёхмерную визуализацию бассейна р. Протвы до слияния её с р. Исьмой.</p>
<ol style="list-style-type: decimal">
<li><p>Отобразите слои проекта в охвате слоя <code>DEM_fill</code>. Включите только следующие слои: границы водосбора, речную сеть (вектор), полигоны частных водосборов (зональная статистика), полный растр водосборной площади (<code>flowacc</code>) и <code>DEM_fill</code>.</p></li>
<li><p>Измените настройки визуализации слоя <code>DEM_fill</code> следующим образом:</p>
<ul>
<li>Стиль: одноканальное псевдоцветное</li>
<li>Минимальное значение: 150</li>
<li>Максимальное значение: 350</li>
<li>Интерполяция: дискретная</li>
<li>Шкала: нажмите правой кнопкой мыши на палитру, выберите «Создать новый градиент», тип градиента — «Каталог: cpt-city». В открывшемся интерфейсе в разделе Topography выберите палитру <code>wiki-knutux</code>.</li>
<li>Режим классификации: равные интервалы</li>
<li>Число классов: 9</li>
</ul></li>
</ol>
<p><img src="images/Ex12_HydroDEM/QGIS_08_elevation.png" /></p>
<p>После применения настроек изображение должно выглядеть, как показано на рисунке ниже (возможно, с другими настройками отображения частных водосборов):</p>
<p><img src="images/Ex12_HydroDEM/QGIS_09_elevation.png" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Найдите на панели инструментов иконку модуля Qgis2treejs <img src="images/Ex12_HydroDEM/Qgis2threejs_icon.png" />. Нажмите на неё, чтобы открыть окно модуля.</li>
</ol>
<p><img src="images/Ex12_HydroDEM/Q2tj_01.png" /></p>
<ol start="4" style="list-style-type: decimal">
<li><p>В окне модуля Qgis2threejs включите слой DEM_fill. Высоты из этого слоя будут использоваться для создания 3D-поверхности, а текстура (материал) изображения будет составлена на основе изображения в основном окне карты.</p></li>
<li><p>Изображение в окне Qgis2threejs выглядит плоским. Для того, чтобы сделать его более «объёмным», можно увеличить вертикальный масштаб. Для этого зайдите в настройки сцены (Scene – Scene settings…) и установите коэффициент вертикального масштабирования (Z exaggeration) равным <span class="math inline">\(20\)</span>.</p></li>
</ol>
<p><img src="images/Ex12_HydroDEM/Q2tj_02.png" /></p>
<ol start="6" style="list-style-type: decimal">
<li><p>Вращая (с помощью зажатой левой кнопки мыши), перемещая (правой кнопкой мыши) и масштабируя (колесо мыши) изображение в окне Qgis2threejs, подберите такой ракурс изображения, который позволит наиболее наглядно, на ваш взгляд, продемонстрировать рельеф местности.</p></li>
<li><p>Экспортируйте полученное изображение (File – Save Scene As – Image (*.png) …) и вставьте его в отчётный файл.</p></li>
</ol>
<p><kbd><strong>Изображение №4:</strong> трёхмерная визуализация бассейна р. Протва</kbd></p>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="weighted-overlay.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="networks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["qgis-course.pdf", "qgis-course.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
