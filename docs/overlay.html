<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Упражнение 7 Анализ пространственных взаимосвязей | Основы геоинформатики: практикум в QGIS</title>
  <meta name="description" content="Упражнение 7 Анализ пространственных взаимосвязей | Основы геоинформатики: практикум в QGIS" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Упражнение 7 Анализ пространственных взаимосвязей | Основы геоинформатики: практикум в QGIS" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Упражнение 7 Анализ пространственных взаимосвязей | Основы геоинформатики: практикум в QGIS" />
  <meta name="github-repo" content="aentin/qgis-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Упражнение 7 Анализ пространственных взаимосвязей | Основы геоинформатики: практикум в QGIS" />
  
  <meta name="twitter:description" content="Упражнение 7 Анализ пространственных взаимосвязей | Основы геоинформатики: практикум в QGIS" />
  

<meta name="author" content="Андрей Энтин, Тимофей Самсонов, Андрей Карпачевский" />


<meta name="date" content="2023-02-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="digitizing-districts.html"/>
<link rel="next" href="spatrelations.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Основы геоинформатики</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Общие сведения</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#учебные-материалы"><i class="fa fa-check"></i>Учебные материалы</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#программное-обеспечение-для-работы"><i class="fa fa-check"></i>Программное обеспечение для работы</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#macos"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#linux"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Основы работы с QGIS</b></span></li>
<li class="chapter" data-level="1" data-path="map-design-general.html"><a href="map-design-general.html"><i class="fa fa-check"></i><b>1</b> Создание общегеографической карты</a>
<ul>
<li class="chapter" data-level="1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-intro"><i class="fa fa-check"></i><b>1.1</b> Введение</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-checklist"><i class="fa fa-check"></i><b>1.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-begin"><i class="fa fa-check"></i><b>1.2</b> Начало работы</a></li>
<li class="chapter" data-level="1.3" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-projection"><i class="fa fa-check"></i><b>1.3</b> Настройка системы координат</a></li>
<li class="chapter" data-level="1.4" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-navigation"><i class="fa fa-check"></i><b>1.4</b> Навигация по карте</a></li>
<li class="chapter" data-level="1.5" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-relief"><i class="fa fa-check"></i><b>1.5</b> Оформление изображения рельефа</a></li>
<li class="chapter" data-level="1.6" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-vector"><i class="fa fa-check"></i><b>1.6</b> Добавление векторных наборов данных</a></li>
<li class="chapter" data-level="1.7" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-attributes"><i class="fa fa-check"></i><b>1.7</b> Использование атрибутов объектов при визуализации</a></li>
<li class="chapter" data-level="1.8" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-labels"><i class="fa fa-check"></i><b>1.8</b> Подписи</a></li>
<li class="chapter" data-level="1.9" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-layout"><i class="fa fa-check"></i><b>1.9</b> Настройка компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="map-design-world.html"><a href="map-design-world.html"><i class="fa fa-check"></i><b>2</b> Создание политической карты мира</a>
<ul>
<li class="chapter" data-level="2.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-intro"><i class="fa fa-check"></i><b>2.1</b> Введение</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-checklist"><i class="fa fa-check"></i><b>2.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-begin"><i class="fa fa-check"></i><b>2.2</b> Начало работы</a></li>
<li class="chapter" data-level="2.3" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-input-data"><i class="fa fa-check"></i><b>2.3</b> Загрузка исходных данных</a></li>
<li class="chapter" data-level="2.4" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-qgis-project"><i class="fa fa-check"></i><b>2.4</b> Создание ГИС-проекта и загрузка данных в проект</a></li>
<li class="chapter" data-level="2.5" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-crs"><i class="fa fa-check"></i><b>2.5</b> Настройка системы координат проекта</a></li>
<li class="chapter" data-level="2.6" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-colorbrewer"><i class="fa fa-check"></i><b>2.6</b> Окраска стран в разные цвета</a></li>
<li class="chapter" data-level="2.7" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-other-layers"><i class="fa fa-check"></i><b>2.7</b> Добавление других слоёв на карту</a></li>
<li class="chapter" data-level="2.8" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-layout"><i class="fa fa-check"></i><b>2.8</b> Создание компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html"><i class="fa fa-check"></i><b>3</b> Создание карты четвертичных отложений</a>
<ul>
<li class="chapter" data-level="3.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-intro"><i class="fa fa-check"></i><b>3.1</b> Введение</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-checklist"><i class="fa fa-check"></i><b>3.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-begin"><i class="fa fa-check"></i><b>3.2</b> Начало работы</a></li>
<li class="chapter" data-level="3.3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-data"><i class="fa fa-check"></i><b>3.3</b> Добавление данных в проект</a></li>
<li class="chapter" data-level="3.4" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-classification"><i class="fa fa-check"></i><b>3.4</b> Применение готового стиля к слою</a></li>
<li class="chapter" data-level="3.5" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-csv"><i class="fa fa-check"></i><b>3.5</b> Создание набора пространственных данных из таблицы с координатами</a></li>
<li class="chapter" data-level="3.6" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-final"><i class="fa fa-check"></i><b>3.6</b> Оформление карты</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="map-design-population.html"><a href="map-design-population.html"><i class="fa fa-check"></i><b>4</b> Создание социально-экономической карты</a>
<ul>
<li class="chapter" data-level="4.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-intro"><i class="fa fa-check"></i><b>4.1</b> Введение</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-checklist"><i class="fa fa-check"></i><b>4.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-begin"><i class="fa fa-check"></i><b>4.2</b> Начало работы</a></li>
<li class="chapter" data-level="4.3" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-change-crs"><i class="fa fa-check"></i><b>4.3</b> Изменение системы координат проекта</a></li>
<li class="chapter" data-level="4.4" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-fill-color"><i class="fa fa-check"></i><b>4.4</b> Создание картограмм</a></li>
<li class="chapter" data-level="4.5" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-symbols"><i class="fa fa-check"></i><b>4.5</b> Создание шкалы значков</a></li>
<li class="chapter" data-level="4.6" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-labels"><i class="fa fa-check"></i><b>4.6</b> Добавление подписей значков</a></li>
<li class="chapter" data-level="4.7" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-basemap"><i class="fa fa-check"></i><b>4.7</b> Настройка условных знаков географической основы</a></li>
<li class="chapter" data-level="4.8" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-layout"><i class="fa fa-check"></i><b>4.8</b> Создание макета карты</a></li>
</ul></li>
<li class="part"><span><b>II Редактирование данных в ГИС</b></span></li>
<li class="chapter" data-level="5" data-path="raster-reference.html"><a href="raster-reference.html"><i class="fa fa-check"></i><b>5</b> Привязка графических материалов</a>
<ul>
<li class="chapter" data-level="5.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-intro"><i class="fa fa-check"></i><b>5.1</b> Введение</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-control"><i class="fa fa-check"></i><b>5.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-input"><i class="fa fa-check"></i><b>5.2</b> Привязка растра по меткам координат</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-select-coordinate-system"><i class="fa fa-check"></i><b>5.2.1</b> Определение целевой системы координат</a></li>
<li class="chapter" data-level="5.2.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-topomap"><i class="fa fa-check"></i><b>5.2.2</b> Привязка листа топографической карты</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-basemap"><i class="fa fa-check"></i><b>5.3</b> Добавление базовой карты</a></li>
<li class="chapter" data-level="5.4" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-frommap"><i class="fa fa-check"></i><b>5.4</b> Использование координат с базовой карты</a></li>
<li class="chapter" data-level="5.5" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-accuracy"><i class="fa fa-check"></i><b>5.5</b> Оценка точности привязки</a></li>
<li class="chapter" data-level="5.6" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-linear"><i class="fa fa-check"></i><b>5.6</b> Интерактивная привязка растров на основе аффинного преобразования</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="digitizing-districts.html"><a href="digitizing-districts.html"><i class="fa fa-check"></i><b>6</b> Векторизация карты-схемы из сети Интернет</a>
<ul>
<li class="chapter" data-level="6.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-intro"><i class="fa fa-check"></i><b>6.1</b> Введение</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-control"><i class="fa fa-check"></i><b>6.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-basedata"><i class="fa fa-check"></i><b>6.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="6.3" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-new-geopackage"><i class="fa fa-check"></i><b>6.3</b> Создание набора пространственных данных</a></li>
<li class="chapter" data-level="6.4" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-drawing"><i class="fa fa-check"></i><b>6.4</b> Векторизация районов</a></li>
<li class="chapter" data-level="6.5" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-query"><i class="fa fa-check"></i><b>6.5</b> Пространственные и атрибутивные запросы</a></li>
<li class="chapter" data-level="6.6" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-diagrams"><i class="fa fa-check"></i><b>6.6</b> Визуализация слоя при помощи картодиаграмм</a></li>
<li class="chapter" data-level="6.7" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-layout"><i class="fa fa-check"></i><b>6.7</b> Создание и экспорт макета компоновки</a></li>
</ul></li>
<li class="part"><span><b>III Векторный анализ</b></span></li>
<li class="chapter" data-level="7" data-path="overlay.html"><a href="overlay.html"><i class="fa fa-check"></i><b>7</b> Анализ пространственных взаимосвязей</a>
<ul>
<li class="chapter" data-level="7.1" data-path="overlay.html"><a href="overlay.html#overlay-intro"><i class="fa fa-check"></i><b>7.1</b> Введение</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="overlay.html"><a href="overlay.html#overlay-control"><i class="fa fa-check"></i><b>7.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="7.1.2" data-path="overlay.html"><a href="overlay.html#overlay-annotation"><i class="fa fa-check"></i><b>7.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="overlay.html"><a href="overlay.html#overlay-vectors"><i class="fa fa-check"></i><b>7.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="7.3" data-path="overlay.html"><a href="overlay.html#overlay-intersect"><i class="fa fa-check"></i><b>7.3</b> Оверлей слоев методом пересечения</a></li>
<li class="chapter" data-level="7.4" data-path="overlay.html"><a href="overlay.html#overlay-merge"><i class="fa fa-check"></i><b>7.4</b> Слияние результатов пересечения с целью получения показателя пространственной связи</a></li>
<li class="chapter" data-level="7.5" data-path="overlay.html"><a href="overlay.html#overlay-sumarea-subtypes"><i class="fa fa-check"></i><b>7.5</b> Объединение подтипов почв для подсчёта суммарной площади</a></li>
<li class="chapter" data-level="7.6" data-path="overlay.html"><a href="overlay.html#overlay-fieldcalc"><i class="fa fa-check"></i><b>7.6</b> Расчёт площадей объектов</a></li>
<li class="chapter" data-level="7.7" data-path="overlay.html"><a href="overlay.html#overlay-join"><i class="fa fa-check"></i><b>7.7</b> Соединение таблиц по названию подтипа почв</a></li>
<li class="chapter" data-level="7.8" data-path="overlay.html"><a href="overlay.html#overlay-resulting"><i class="fa fa-check"></i><b>7.8</b> Вычисление результирующих значений показателя связи</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="spatrelations.html"><a href="spatrelations.html"><i class="fa fa-check"></i><b>8</b> Анализ пространственных соотношений</a>
<ul>
<li class="chapter" data-level="8.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-intro"><i class="fa fa-check"></i><b>8.1</b> Введение</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-control"><i class="fa fa-check"></i><b>8.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="8.1.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-annotation"><i class="fa fa-check"></i><b>8.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-vizual"><i class="fa fa-check"></i><b>8.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="8.3" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-overlay"><i class="fa fa-check"></i><b>8.3</b> Расчёт площадей и оверлей</a></li>
<li class="chapter" data-level="8.4" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-join"><i class="fa fa-check"></i><b>8.4</b> Соединение таблиц по ключевому полю</a></li>
<li class="chapter" data-level="8.5" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-other"><i class="fa fa-check"></i><b>8.5</b> Расчёт площадей, не покрытых объектаи</a></li>
<li class="chapter" data-level="8.6" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-symbology"><i class="fa fa-check"></i><b>8.6</b> Настройка символики</a></li>
</ul></li>
<li class="part"><span><b>IV Растровый анализ</b></span></li>
<li class="chapter" data-level="9" data-path="weighted-overlay.html"><a href="weighted-overlay.html"><i class="fa fa-check"></i><b>9</b> Оптимизация местоположения</a>
<ul>
<li class="chapter" data-level="9.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-intro"><i class="fa fa-check"></i><b>9.1</b> Введение</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-control"><i class="fa fa-check"></i><b>9.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="9.1.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-annotation"><i class="fa fa-check"></i><b>9.1.2</b> Аннотация</a></li>
<li class="chapter" data-level="9.1.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-warning"><i class="fa fa-check"></i><b>9.1.3</b> Прежде чем начать…</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-init"><i class="fa fa-check"></i><b>9.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="9.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-slopes"><i class="fa fa-check"></i><b>9.3</b> Расчет углов наклона</a></li>
<li class="chapter" data-level="9.4" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-distances"><i class="fa fa-check"></i><b>9.4</b> Расчет расстояний</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-roads"><i class="fa fa-check"></i><b>9.4.1</b> Расстояния до дорог</a></li>
<li class="chapter" data-level="9.4.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-streams"><i class="fa fa-check"></i><b>9.4.2</b> Водотоки</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass"><i class="fa fa-check"></i><b>9.5</b> Переклассификация наборов данных</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-distance"><i class="fa fa-check"></i><b>9.5.1</b> Переклассификация растров расстояний</a></li>
<li class="chapter" data-level="9.5.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-slope"><i class="fa fa-check"></i><b>9.5.2</b> Переклассификация растра крутизны</a></li>
<li class="chapter" data-level="9.5.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#преобразование-слоя-типов-землепользования-в-растровое-представление"><i class="fa fa-check"></i><b>9.5.3</b> Преобразование слоя типов землепользования в растровое представление</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-combination"><i class="fa fa-check"></i><b>9.6</b> Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</a></li>
<li class="chapter" data-level="9.7" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-final-decision"><i class="fa fa-check"></i><b>9.7</b> Окончательный выбор участка</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="hydrodem.html"><a href="hydrodem.html"><i class="fa fa-check"></i><b>10</b> Гидрологическое моделирование на основе ЦМР</a>
<ul>
<li class="chapter" data-level="10.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-intro"><i class="fa fa-check"></i><b>10.1</b> Введение</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-control"><i class="fa fa-check"></i><b>10.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="10.1.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-annotation"><i class="fa fa-check"></i><b>10.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-init"><i class="fa fa-check"></i><b>10.2</b> Получение и подготовка исходных данных</a></li>
<li class="chapter" data-level="10.3" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-preprocessing"><i class="fa fa-check"></i><b>10.3</b> Гидрологическая коррекция ЦМР</a></li>
<li class="chapter" data-level="10.4" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-flowacc"><i class="fa fa-check"></i><b>10.4</b> Расчёт водосборной площади</a></li>
<li class="chapter" data-level="10.5" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-network"><i class="fa fa-check"></i><b>10.5</b> Создание растра водотоков на основе модели водосборной площади</a></li>
<li class="chapter" data-level="10.6" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-basin"><i class="fa fa-check"></i><b>10.6</b> Определение границ бассейна р. Оскол</a></li>
<li class="chapter" data-level="10.7" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-mapping"><i class="fa fa-check"></i><b>10.7</b> Картографическое представление результата</a></li>
</ul></li>
<li class="part"><span><b>V Сетевой анализ</b></span></li>
<li class="chapter" data-level="11" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>11</b> Анализ транспортных сетей</a>
<ul>
<li class="chapter" data-level="11.1" data-path="networks.html"><a href="networks.html#networks-intro"><i class="fa fa-check"></i><b>11.1</b> Введение</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="networks.html"><a href="networks.html#networks-control"><i class="fa fa-check"></i><b>11.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="11.1.2" data-path="networks.html"><a href="networks.html#networks-annotation"><i class="fa fa-check"></i><b>11.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="networks.html"><a href="networks.html#networks-init"><i class="fa fa-check"></i><b>11.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="11.3" data-path="networks.html"><a href="networks.html#networks-query"><i class="fa fa-check"></i><b>11.3</b> Выбор элементов дорожной сети</a></li>
<li class="chapter" data-level="11.4" data-path="networks.html"><a href="networks.html#networks-route"><i class="fa fa-check"></i><b>11.4</b> Построение маршрута</a></li>
<li class="chapter" data-level="11.5" data-path="networks.html"><a href="networks.html#networks-isochrones"><i class="fa fa-check"></i><b>11.5</b> Расчёт изохрон</a></li>
<li class="chapter" data-level="11.6" data-path="networks.html"><a href="networks.html#networks-matrix"><i class="fa fa-check"></i><b>11.6</b> Работа с матрицей «источник-назначение»</a></li>
</ul></li>
<li class="part"><span><b>VI Геокодирование</b></span></li>
<li class="chapter" data-level="12" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>12</b> Адресное геокодирование и ядерная оценка плотности</a>
<ul>
<li class="chapter" data-level="12.1" data-path="geocoding.html"><a href="geocoding.html#geoding-intro"><i class="fa fa-check"></i><b>12.1</b> Введение</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-control"><i class="fa fa-check"></i><b>12.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="12.1.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-annotation"><i class="fa fa-check"></i><b>12.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-input"><i class="fa fa-check"></i><b>12.2</b> Получение исходных данных</a></li>
<li class="chapter" data-level="12.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-debug"><i class="fa fa-check"></i><b>12.3</b> Тестирование работы сервиса геокодирования</a></li>
<li class="chapter" data-level="12.4" data-path="geocoding.html"><a href="geocoding.html#geocoding-import"><i class="fa fa-check"></i><b>12.4</b> Импорт списка адресов в QGIS</a></li>
<li class="chapter" data-level="12.5" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch-install"><i class="fa fa-check"></i><b>12.5</b> Установка модуля пакетного геокодирования</a></li>
<li class="chapter" data-level="12.6" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch"><i class="fa fa-check"></i><b>12.6</b> Пакетное геокодирование</a></li>
<li class="chapter" data-level="12.7" data-path="geocoding.html"><a href="geocoding.html#geocoding-mapping"><i class="fa fa-check"></i><b>12.7</b> Картографирование плотности объявлений</a></li>
</ul></li>
<li class="appendix"><span><b>Справочные сведения</b></span></li>
<li class="chapter" data-level="A" data-path="manual-catalog.html"><a href="manual-catalog.html"><i class="fa fa-check"></i><b>A</b> Форматы пространственных данных</a>
<ul>
<li class="chapter" data-level="A.1" data-path="manual-catalog.html"><a href="manual-catalog.html#manual-dataformats-shapefile"><i class="fa fa-check"></i><b>A.1</b> Шейп-файлы</a></li>
<li class="chapter" data-level="A.2" data-path="manual-catalog.html"><a href="manual-catalog.html#geopackage"><i class="fa fa-check"></i><b>A.2</b> GeoPackage</a></li>
<li class="chapter" data-level="A.3" data-path="manual-catalog.html"><a href="manual-catalog.html#базы-геоданных-esri"><i class="fa fa-check"></i><b>A.3</b> Базы геоданных ESRI</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="manual-crs.html"><a href="manual-crs.html"><i class="fa fa-check"></i><b>B</b> Форматы описания систем координат</a></li>
<li class="chapter" data-level="C" data-path="manual-plugins.html"><a href="manual-plugins.html"><i class="fa fa-check"></i><b>C</b> Установка модулей в QGIS</a>
<ul>
<li class="chapter" data-level="C.1" data-path="manual-plugins.html"><a href="manual-plugins.html#manual-plugins-install"><i class="fa fa-check"></i><b>C.1</b> Установка модулей</a></li>
<li class="chapter" data-level="C.2" data-path="manual-plugins.html"><a href="manual-plugins.html#manual-plugins-update"><i class="fa fa-check"></i><b>C.2</b> Обновление модулей</a></li>
<li class="chapter" data-level="C.3" data-path="manual-plugins.html"><a href="manual-plugins.html#manual-plugins-uninstall"><i class="fa fa-check"></i><b>C.3</b> Удаление модулей</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="mastertest.html"><a href="mastertest.html"><i class="fa fa-check"></i><b>D</b> Инструкция по регистрации в системе Мастер-тест</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Основы геоинформатики: практикум в QGIS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="overlay" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Упражнение 7</span> Анализ пространственных взаимосвязей<a href="overlay.html#overlay" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex07.zip">Архив с исходными данными</a></p>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex07_%D0%BE%D1%82%D1%87%D1%91%D1%82.docx">Контрольный лист</a></p>
<div id="overlay-intro" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Введение<a href="overlay.html#overlay-intro" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Цель задания</strong> — научиться определять пространственную приуроченность двух явлений на основе процента взаимного покрытия их площадей (методом оверлея).</p>
<p><strong>Необходимая теоретическая подготовка:</strong> Оверлей пространственных объектов, геометрическое определение вероятности как отношения мер (площадей), соединение таблиц в реляционных базах данных, внешний и внутренний ключ соединения.</p>
<p><strong>Необходимая практическая подготовка:</strong> Знание основных компонент интерфейса QGIS (менеджер источников данных, таблица слоёв, фрейм карты, менеджер компоновок). Работа с различными форматами источников пространственных данных . Настройка символики и подписей объектов. Владение базовыми ГИС-технологиями.</p>
<p><strong>Исходные данные:</strong> База данных ГИС «Сатино».</p>
<p><strong>Результат:</strong> Таблица взаимного покрытия площадей типов рельефа и подтипов почв.</p>
<div id="overlay-control" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Контрольный лист<a href="overlay.html#overlay-control" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Добавить на карту слои типов почв и рельефа, оформить их</li>
<li>Произвести оверлей слоев</li>
<li>Произвести слияние данных и соединение таблиц</li>
<li>Подсчитать процент покрытия площадей</li>
</ul>
</div>
<div id="overlay-annotation" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Аннотация<a href="overlay.html#overlay-annotation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Задание посвящено знакомству с пространственным анализом на основе векторных данных. Векторная модель представляет объекты в виде отдельных геометрических фигур с набором атрибутов. Она является объектно-ориентированной и удобна для анализа формы, размеров объектов, их взаимной конфигурации в пространстве. Одним из широко используемых методов анализа на основе векторных данных является оверлей.</p>
<blockquote>
<p>При <em>оверлее</em> происходит наложение двух или более слоев, в результате чего образуется их графическая композиция. Полученные участки наследуют атрибуты от каждого слоя. Эта операция базируется на стандартных отношениях множеств, таких как пересечение, объединение и симметрическая разность.</p>
</blockquote>
<p>С помощью оверлея можно, например, установить, к каким генетическим типам рельефа приурочены различные типы и подтипы почв. В общем случае оверлей позволяет установить, какие комбинации объектов встречаются в пространстве. В задании предлагается исследовать методом оверлея взаимосвязь типов рельефа и типов и подтипов почв.</p>
</div>
</div>
<div id="overlay-vectors" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Визуальный анализ векторных слоев<a href="overlay.html#overlay-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="overlay.html#overlay">В начало упражнения ⇡</a></p>
<p>В первую очередь при анализе данных следует провести их визуальную оценку, которая может натолкнуть на отыскание закономерностей во взаимном расположении объектов.</p>
<ol style="list-style-type: decimal">
<li><p>Распакуйте архив с материалами упражнения в свою рабочую директорию. Создайте проект QGIS в папке с распакованными материалами.</p></li>
<li><p>Добавьте на карту слой <em>RelTypes</em> из базы геоданных <code>Satino.gdb</code>. Примените к нему стиль из файла <code>RelTypes.qml</code>.</p>
<p><img src="images/Ex06/AppliedStyle1.png" /></p></li>
<li><p>Добавьте на карту слой <em>SoilTypes</em> из той же базы. Изобразите его в виде полигонов без заливки с обводкой красного цвета.</p>
<p><img src="images/Ex06/AppliedStyle2.png" /></p></li>
<li><p>Выберите инструмент идентификации <img src="images/Ex06/icon_identify.png" /> и щелкните в пределах карты на любом полигоне. Откроется форма идентификации (отображения) атрибутов объекта</p>
<p><img src="images/Ex06/identify1.png" /></p>
<p>По умолчанию QGIS идентифицирует объекты либо из самого верхнего слоя (<em>Сверху вниз, до первого найденного</em>, в порядке перечисления в панели слоёв), либо из того слоя, который выбран в панели слоёв (<em>Текущий слой</em>). Можно настроить инструмент идентификации таким образом, чтобы отображать атрибуты объектов из всех доступных слоёв. Для этого в нижней части панели идентификации нужно установить режим <em>Сверху вниз</em>.</p>
<p><img src="images/Ex06/identify2.png" /></p>
<p><img src="images/Ex06/identify3.png" /></p>
<p>Пользуясь инструментом идентификации, проанализируйте совмещенное изображение границ типов почв и рельефа.</p></li>
</ol>
<p><strong>Вопрос 1:</strong> Есть ли какие-то совпадения или подобия рисунков контуров типов рельефа и подтипов почв в пределах речных долин, междуречий, малых эрозионных форм?</p>
<p>Когда данные исследованы визуально и путем идентификации, можно перейти к их анализу с помощью оверлея.</p>
</div>
<div id="overlay-intersect" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Оверлей слоев методом пересечения<a href="overlay.html#overlay-intersect" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="overlay.html#overlay">В начало упражнения ⇡</a></p>
<p>Инструменты векторного оверлея, а также некоторые родственные им инструменты в QGIS размещаются в меню «Вектор — Геообработка». Также эти инструменты доступны из панели инструментов анализа.</p>
<p><em>Изучите, как работают инструменты геообработки</em>. Для этого сохраните и закройте свой проект QGIS, затем создайте новый проект, а в нём — два временных полигональных слоя.</p>
<blockquote>
<p>Временный слой в QGIS хранится в выделенной директории среди системных файлов. Если не сохранять временные файлы, они будут удалены после закрытия окна QGIS.</p>
</blockquote>
<blockquote>
<p>Чтобы создать временный слой, нажмите кнопку <em>Новый временный слой</em> в панели менеджера источников данных. Используйте для создаваемых слоёв проецированную систему координат!</p>
</blockquote>
<p><strong>поочерёдно примените к вашим слоям следующие инструменты геообработки: Обрезать (Clip), Разность (Erase), пересечение (Intersect), Симметрическая разность (Symmetrical Difference), Объединение (Union)</strong> и ответьте на вопросы:</p>
<p><strong>Вопрос 2</strong>: опишите словесно, как будет выглядеть результат применения каждого из инструментов геообработки к произвольной паре наборов данных?</p>
<p><strong>Вопрос 3</strong>: какие из изученных инструментов геообработки будут выдавать одинаковый результат независимо от порядка исходных слоёв, а для каких этот результат будет различен? Учитывайте не только геометрические, но и атрибутивные свойства результата.</p>
<p><strong>Вопрос 4</strong>: чем отличаются результаты обработки с помощью инструментов Обрезать (Clip) и Пересечение (Intersect)?</p>
<ol style="list-style-type: decimal">
<li><p>Вернитесь в основной рабочий проект.</p></li>
<li><p>Запустите инструмент <em>Пересечение (Intersect)</em>. Настройте параметры следующим образом:</p>
<ol style="list-style-type: decimal">
<li>Используйте слой <code>SoilTypes</code> в качестве исходного и слой <code>RelTypes</code> в качестве оверлейного.<br />
</li>
<li>Сохраните выходной набор данных как GeoPackage в вашу рабочую директорию. Назовите выходной файл <code>%фамилия%_geoprocessing.gpkg</code>, а в открывшемся окне задания имени слоя введите <code>Soil_Relief_Intersect</code>.</li>
</ol>
<p><img src="images/Ex06/overlay2.png" /></p></li>
<li><p>Нажмите «Выполнить», чтобы запустить вычисления.</p>
<p>Результат вычислений добавится на карту и в таблицу слоёв под именем <code>Пересечение</code>.</p></li>
<li><p>Переименуйте добавленный слой в <code>Комбинации почвы-рельеф</code>.</p></li>
<li><p>Поместите полученный оверлеем слой между слоями типов почв и рельефа, и настройте его отображение в виде полигона без заливки с черной обводкой. Там, где границы совпадают с контурами типов рельефа, они будут черного цвета, а там где они совпадают с контурами типов почв, будет красная линия с черной обводкой.</p>
<p><img src="images/Ex06/overlay3.png" /></p></li>
<li><p>Раскройте атрибутивную таблицу слоя <em>Комбинации почвы-рельеф</em>.</p></li>
</ol>
<p><strong>Вопрос 5</strong>: Какие поля содержатся в атрибутивной таблице полученного слоя?</p>
</div>
<div id="overlay-merge" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Слияние результатов пересечения с целью получения показателя пространственной связи<a href="overlay.html#overlay-merge" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="overlay.html#overlay">В начало упражнения ⇡</a></p>
<p>Поскольку каждый полигон в оверлейном слое содержит значение типа/подтипа почвы и типа рельефа, появляется возможность установить приуроченность типов и подтипов почв к определенным типам рельефа.</p>
<p>Чтобы подсчитать долю каждого типа рельефа в площади каждого подтипа почв, необходимо просуммировать площади каждой их уникальной комбинации. Например, дерново-карбонатные выщелоченные почвы (<em>Д-в-к</em>) на крутых эрозионных склонах встречаются в пределах Сатинского полигона в виде 6 разрозненных участков, имеющих некоторую суммарную площадь. Эта площадь, деленная на суммарную площадь почв подтипа <em>Д-в-к</em> даст вероятностный критерий приуроченности почв <em>Д-в-к</em> к крутым эрозионным склонам. То же самое касается остальных комбинаций подтипов почв и типов рельефа.</p>
<p>С точки зрения рабочих процессов ГИС, операцию следует разбить на 5 шагов:</p>
<ul>
<li><p>подсчет суммарной площади каждой комбинации подтипа почв и типа рельефа;</p></li>
<li><p>подсчет суммарной площади каждого подтипа почв;</p></li>
<li><p>добавление поля, в которое будет записана процентная доля;</p></li>
<li><p>соединение таблиц комбинаций и подтипов почв по названию подтипа почв;</p></li>
<li><p>деление площади комбинации на площадь подтипа почв и запись результата в соответствующее поле.</p></li>
</ul>
<blockquote>
<p>Объединение разрозненных объектов, обладающих одинаковым набором атрибутов, осуществляется с помощью <em>операции объединения по признаку</em> (Dissolve). Причем, если объекты примыкают друг к другу, граница между ними будет стерта, а если объекты разнесены в пространстве, на выходе получится составной объект (Multipart feature), состоящий из нескольких полигонов. Объединение по признаку — это один из методов генерализации, он очень часто используется в геоинформационном анализе и картографировании.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p>Откройте инструмент геообработки «Объединение по признаку».</p></li>
<li><p>Выберите в качестве исходного слоя <em>Комбинации почвы-рельеф</em>.</p></li>
<li><p>Нажмите на кнопку с изображением многоточия в строке <em>Dissolve fields (optional)</em>, чтобы задать поля, по которым будет производиться слияние. В открывшемся списке отметьте поля <em>SoilType</em>, <em>SoilSubtype</em> и <em>RelType</em>. Тем самым можно будет найти все уникальные комбинации подтипов почв и типов рельефа.</p>
<blockquote>
<p>Поле <em>SoilType</em> необходимо отметить для того, чтобы в таблице результирующего слоя сохранилась информация о типах почв. Это не повлияет на сам результат, поскольку количество комбинаций типа и подтипа почв равно количеству самих подтипов.</p>
</blockquote></li>
<li><p>Укажите путь для сохранения результата объединения по признаку. Сохраните результат в тот же GeoPackage, что и результат пересечения, а слой назовите <code>Soil_Relief_Intersect_Dissolve</code>.</p></li>
<li><p>Запустите выполнение инструмента.</p></li>
<li><p>После того, как результат появится в таблице содержания, закройте окно инструмента. Переименуйте полученный слой в <em>Слияние комбинаций почвы-рельеф</em>.</p></li>
<li><p>Отключите этот слой в таблице содержания.</p></li>
</ol>
</div>
<div id="overlay-sumarea-subtypes" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Объединение подтипов почв для подсчёта суммарной площади<a href="overlay.html#overlay-sumarea-subtypes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="overlay.html#overlay">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Запустите инструмент объединения по признаку еще раз.</p></li>
<li><p>Выберите в качестве входных данных слой <em>SoilTypes</em>.</p></li>
<li><p>В списке полей для объединения выберите поля <em>SoilType</em> и <em>SoilSubtype</em>.</p></li>
<li><p>Выходной набор данных сохраните в тот же GeoPackage с именем слоя <em>SoilTypes_Dissolve</em>.</p></li>
<li><p>Остальные параметры оставьте по умолчанию и запустите инструмент.</p></li>
<li><p>Назовите полученный слой <em>Слияние подтипов почв</em>. В данном слое в результате операции слияния каждый подтип почв будет представлен единственным объектом.</p></li>
<li><p>Отключите этот слой в таблице содержания.</p></li>
</ol>
</div>
<div id="overlay-fieldcalc" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> Расчёт площадей объектов<a href="overlay.html#overlay-fieldcalc" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="overlay.html#overlay">В начало упражнения ⇡</a></p>
<p>В отличие от ArcGIS, QGIS не умеет автоматически пересчитывать площади объектов при изменении их геометрии. А изменения, которые мы произвели в процессе объединения по признаку, достаточно велики. Далее мы рассчитаем площади каждого объекта в «объединённых» слоях, затем выполним соединение атрибутивных таблиц и рассчитаем показатель связи на основе соотношения площадей.</p>
<ol style="list-style-type: decimal">
<li><p>Откройте таблицу атрибутов слоя <em>Слияние комбинаций почвы-рельеф</em>.</p></li>
<li><p>В заголовке таблицы найдите <strong>Открыть калькулятор полей</strong> (<img src="images/Ex06/fieldcalc1.png" />) или нажмите <code>Ctrl+I</code>.</p>
<p>В QGIS, в отличие от ArcGIS и многих СУБД, не требуется отдельно создавать новое поле перед выполнением расчёта. Мы создадим новое поле, в котором будет записана площадь объекта в гектарах, и одновременно заполним его значениями с помощью калькулятора полей.</p></li>
<li><p>Введите имя поля <code>AREA_HA_INTERSECT</code> и установите тип данных «Десятичное число (real)».</p></li>
<li><p>Введите выражение <code>$area / 10000</code> в поле «Выражение».</p>
<p><img src="images/Ex06/fieldcalc2.png" /></p>
<p>Пояснение: <code>area()</code> — системная функция QGIS, возвращающая площадь объекта. Значок <code>$</code> означает, что функция будет применена к текущему объекту. Площадь вычисляется в единицах измерения площади, предусмотренных для системы координат источника данных. Для проецированных систем координат это, как правило, метры (реже футы). Назначение выражения <code>/ 10000</code> постарайтесь определить самостоятельно.</p></li>
<li><p>Нажмите ОК. Слой перейдёт в режим редактирования, а в таблице атрибутов появится новый столбец.</p></li>
<li><p>Сохраните правки и выключите режим редактирования для слоя <em>Слияние комбинаций почвы-рельеф</em>. Кнопка включения/выключения режима редактирования доступна не только в панели редактирования, но и в окне таблицы атрибутов.</p></li>
<li><p>Проделайте аналогичную операцию для слоя <em>Слияние подтипов почв</em>. <strong>Важно:</strong> используйте другое имя для поля площади, например, <code>AREA_HA_SOILS</code>, чтобы избежать ошибки на следующем шаге.</p></li>
</ol>
</div>
<div id="overlay-join" class="section level2 hasAnchor" number="7.7">
<h2><span class="header-section-number">7.7</span> Соединение таблиц по названию подтипа почв<a href="overlay.html#overlay-join" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="overlay.html#overlay">В начало упражнения ⇡</a></p>
<p>Для расчета пространственной взаимосвязи необходимо поделить площадь каждой комбинации на площадь соответствующего подтипа почв. Эти площади находятся сейчас в разных таблицах — <em>Слияние подтипов почв</em> и <em>Слияние комбинаций почвы-рельеф</em>. Их можно соединить по полю подтипа почв.</p>
<blockquote>
<p><em>Соединение таблиц</em> (table join) — операция, в результате которой к одной таблице временно добавляются столбцы из другой таблицы. Чтобы установить соответствие между строками исходной и присоединяемой таблицы, необходимо иметь в каждой таблице поле с общими для них значениями. Например, это может быть числовой код объекта или, как в нашем случае, подтип почв (строковый тип данных).</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p>Откройте свойства слоя <em>Слияние комбинаций почвы-рельеф</em> и перейдите на вкладку <em>Связи</em>.</p></li>
<li><p>Нажмите на кнопку с изображением знака «+» внизу, чтобы добавить новую связь.</p></li>
<li><p>Настройте параметры соединения, как показано на рисунке ниже:</p>
<p><img src="images/Ex06/tablejoin1.png" /></p>
<p><strong>Вопрос 6</strong>: Что такое «поле для объединения» и «целевое поле» в QGIS? К каким слоям относится каждое из них?</p></li>
<li><p>Примените изменения, закройте свойства слоя и откройте таблицу атрибутов.</p>
<p><strong>Вопрос 7</strong>: Что изменилось в таблице атрибутов после создания связи?</p></li>
</ol>
</div>
<div id="overlay-resulting" class="section level2 hasAnchor" number="7.8">
<h2><span class="header-section-number">7.8</span> Вычисление результирующих значений показателя связи<a href="overlay.html#overlay-resulting" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="overlay.html#overlay">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Откройте таблицу атрибутов слоя <em>Слияние комбинаций почвы-рельеф</em>, а затем вызовите калькулятор полей.</p></li>
<li><p>Укажите, что результат вычисления будет сохраняться в новое поле вещественного (real) типа, имя поля — <code>Percent</code></p></li>
<li><p>В окне ввода выражения составьте следующее выражение:</p>
<p><strong>Площадь сочетания подтипа почв и типа рельефа / Площадь подтипа почв × 100 </strong></p>
<blockquote>
<p>Подсказка: чтобы использовать значения полей в выражении, найдите в средней панели группу «Поля и значения». Добавляйте поля в выражение, кликая по их названиям дважды левой кнопкой мыши.</p>
</blockquote></li>
<li><p>Запустите расчёт. После окончания расчёта посмотрите получившиеся значения в поле <em>Percent</em>.</p></li>
<li><p>Удалите соединение таблиц через свойства слоя <em>Слияние комбинаций почвы-рельеф</em> (вкладка «Связи», кнопка с изображением знака «минус» внизу).</p></li>
<li><p>Отсортируйте таблицу атрибутов по значению поля <em>Percent</em> по убыванию. Выберите объекты, значение показателя связи для которых превышает 75 %.</p></li>
<li><p>Скройте все столбцы, кроме типа почв, подтипа почв, типа рельефа и поля <em>Percent.</em>. Для того, чтобы скрыть столбец в таблице атрибутов, нажмите на его название правой кнопкой мыши и выберите опцию <em>Hide column</em>.</p></li>
<li><p>Скомпонуйте окно приложения так, чтобы было видно целиком карту, а также выделенные в таблице строки, а также столбцы, перечисленные в предыдущем пункте.</p>
<p><strong>Скриншот 1:</strong> окно карты и результирующая таблица</p>
<blockquote>
<p>Примечание: если размер вашего экрана не позволяет скомпоновать окно QGIS в запрошенном виде, сделайте два скриншота: отдельно основное окно QGIS, отдельно таблицу атрибутов.</p>
</blockquote></li>
<li><p>Сохраните документ карты.</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="digitizing-districts.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spatrelations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["qgis-course.pdf", "qgis-course.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
