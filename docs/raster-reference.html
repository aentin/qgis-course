<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Упражнение 5 Привязка графических материалов | Основы геоинформатики: практикум в QGIS</title>
  <meta name="description" content="Упражнение 5 Привязка графических материалов | Основы геоинформатики: практикум в QGIS" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Упражнение 5 Привязка графических материалов | Основы геоинформатики: практикум в QGIS" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Упражнение 5 Привязка графических материалов | Основы геоинформатики: практикум в QGIS" />
  <meta name="github-repo" content="aentin/qgis-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Упражнение 5 Привязка графических материалов | Основы геоинформатики: практикум в QGIS" />
  
  <meta name="twitter:description" content="Упражнение 5 Привязка графических материалов | Основы геоинформатики: практикум в QGIS" />
  

<meta name="author" content="Андрей Энтин, Тимофей Самсонов, Андрей Карпачевский" />


<meta name="date" content="2023-02-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="map-design-population.html"/>
<link rel="next" href="digitizing-districts.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Основы геоинформатики</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Общие сведения</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#учебные-материалы"><i class="fa fa-check"></i>Учебные материалы</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#программное-обеспечение-для-работы"><i class="fa fa-check"></i>Программное обеспечение для работы</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#macos"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#linux"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Основы работы с QGIS</b></span></li>
<li class="chapter" data-level="1" data-path="map-design-general.html"><a href="map-design-general.html"><i class="fa fa-check"></i><b>1</b> Создание общегеографической карты</a>
<ul>
<li class="chapter" data-level="1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-intro"><i class="fa fa-check"></i><b>1.1</b> Введение</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-checklist"><i class="fa fa-check"></i><b>1.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-begin"><i class="fa fa-check"></i><b>1.2</b> Начало работы</a></li>
<li class="chapter" data-level="1.3" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-projection"><i class="fa fa-check"></i><b>1.3</b> Настройка системы координат</a></li>
<li class="chapter" data-level="1.4" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-navigation"><i class="fa fa-check"></i><b>1.4</b> Навигация по карте</a></li>
<li class="chapter" data-level="1.5" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-relief"><i class="fa fa-check"></i><b>1.5</b> Оформление изображения рельефа</a></li>
<li class="chapter" data-level="1.6" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-vector"><i class="fa fa-check"></i><b>1.6</b> Добавление векторных наборов данных</a></li>
<li class="chapter" data-level="1.7" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-attributes"><i class="fa fa-check"></i><b>1.7</b> Использование атрибутов объектов при визуализации</a></li>
<li class="chapter" data-level="1.8" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-labels"><i class="fa fa-check"></i><b>1.8</b> Подписи</a></li>
<li class="chapter" data-level="1.9" data-path="map-design-general.html"><a href="map-design-general.html#map-design-general-layout"><i class="fa fa-check"></i><b>1.9</b> Настройка компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="map-design-world.html"><a href="map-design-world.html"><i class="fa fa-check"></i><b>2</b> Создание политической карты мира</a>
<ul>
<li class="chapter" data-level="2.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-intro"><i class="fa fa-check"></i><b>2.1</b> Введение</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-checklist"><i class="fa fa-check"></i><b>2.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-begin"><i class="fa fa-check"></i><b>2.2</b> Начало работы</a></li>
<li class="chapter" data-level="2.3" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-input-data"><i class="fa fa-check"></i><b>2.3</b> Загрузка исходных данных</a></li>
<li class="chapter" data-level="2.4" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-qgis-project"><i class="fa fa-check"></i><b>2.4</b> Создание ГИС-проекта и загрузка данных в проект</a></li>
<li class="chapter" data-level="2.5" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-crs"><i class="fa fa-check"></i><b>2.5</b> Настройка системы координат проекта</a></li>
<li class="chapter" data-level="2.6" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-colorbrewer"><i class="fa fa-check"></i><b>2.6</b> Окраска стран в разные цвета</a></li>
<li class="chapter" data-level="2.7" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-other-layers"><i class="fa fa-check"></i><b>2.7</b> Добавление других слоёв на карту</a></li>
<li class="chapter" data-level="2.8" data-path="map-design-world.html"><a href="map-design-world.html#map-design-world-layout"><i class="fa fa-check"></i><b>2.8</b> Создание компоновки карты</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html"><i class="fa fa-check"></i><b>3</b> Создание карты четвертичных отложений</a>
<ul>
<li class="chapter" data-level="3.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-intro"><i class="fa fa-check"></i><b>3.1</b> Введение</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-checklist"><i class="fa fa-check"></i><b>3.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-begin"><i class="fa fa-check"></i><b>3.2</b> Начало работы</a></li>
<li class="chapter" data-level="3.3" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-data"><i class="fa fa-check"></i><b>3.3</b> Добавление данных в проект</a></li>
<li class="chapter" data-level="3.4" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-classification"><i class="fa fa-check"></i><b>3.4</b> Применение готового стиля к слою</a></li>
<li class="chapter" data-level="3.5" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-csv"><i class="fa fa-check"></i><b>3.5</b> Создание набора пространственных данных из таблицы с координатами</a></li>
<li class="chapter" data-level="3.6" data-path="map-design-quaternary.html"><a href="map-design-quaternary.html#map-design-quaternary-final"><i class="fa fa-check"></i><b>3.6</b> Оформление карты</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="map-design-population.html"><a href="map-design-population.html"><i class="fa fa-check"></i><b>4</b> Создание социально-экономической карты</a>
<ul>
<li class="chapter" data-level="4.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-intro"><i class="fa fa-check"></i><b>4.1</b> Введение</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-checklist"><i class="fa fa-check"></i><b>4.1.1</b> Контольный лист</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-begin"><i class="fa fa-check"></i><b>4.2</b> Начало работы</a></li>
<li class="chapter" data-level="4.3" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-change-crs"><i class="fa fa-check"></i><b>4.3</b> Изменение системы координат проекта</a></li>
<li class="chapter" data-level="4.4" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-fill-color"><i class="fa fa-check"></i><b>4.4</b> Создание картограмм</a></li>
<li class="chapter" data-level="4.5" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-symbols"><i class="fa fa-check"></i><b>4.5</b> Создание шкалы значков</a></li>
<li class="chapter" data-level="4.6" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-labels"><i class="fa fa-check"></i><b>4.6</b> Добавление подписей значков</a></li>
<li class="chapter" data-level="4.7" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-basemap"><i class="fa fa-check"></i><b>4.7</b> Настройка условных знаков географической основы</a></li>
<li class="chapter" data-level="4.8" data-path="map-design-population.html"><a href="map-design-population.html#map-design-population-layout"><i class="fa fa-check"></i><b>4.8</b> Создание макета карты</a></li>
</ul></li>
<li class="part"><span><b>II Редактирование данных в ГИС</b></span></li>
<li class="chapter" data-level="5" data-path="raster-reference.html"><a href="raster-reference.html"><i class="fa fa-check"></i><b>5</b> Привязка графических материалов</a>
<ul>
<li class="chapter" data-level="5.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-intro"><i class="fa fa-check"></i><b>5.1</b> Введение</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-control"><i class="fa fa-check"></i><b>5.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-input"><i class="fa fa-check"></i><b>5.2</b> Привязка растра по меткам координат</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-select-coordinate-system"><i class="fa fa-check"></i><b>5.2.1</b> Определение целевой системы координат</a></li>
<li class="chapter" data-level="5.2.2" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-topomap"><i class="fa fa-check"></i><b>5.2.2</b> Привязка листа топографической карты</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-basemap"><i class="fa fa-check"></i><b>5.3</b> Добавление базовой карты</a></li>
<li class="chapter" data-level="5.4" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-frommap"><i class="fa fa-check"></i><b>5.4</b> Использование координат с базовой карты</a></li>
<li class="chapter" data-level="5.5" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-accuracy"><i class="fa fa-check"></i><b>5.5</b> Оценка точности привязки</a></li>
<li class="chapter" data-level="5.6" data-path="raster-reference.html"><a href="raster-reference.html#raster-reference-linear"><i class="fa fa-check"></i><b>5.6</b> Интерактивная привязка растров на основе аффинного преобразования</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="digitizing-districts.html"><a href="digitizing-districts.html"><i class="fa fa-check"></i><b>6</b> Векторизация карты-схемы из сети Интернет</a>
<ul>
<li class="chapter" data-level="6.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-intro"><i class="fa fa-check"></i><b>6.1</b> Введение</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-control"><i class="fa fa-check"></i><b>6.1.1</b> Контрольный лист</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-basedata"><i class="fa fa-check"></i><b>6.2</b> Подготовка исходных данных</a></li>
<li class="chapter" data-level="6.3" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-new-geopackage"><i class="fa fa-check"></i><b>6.3</b> Создание набора пространственных данных</a></li>
<li class="chapter" data-level="6.4" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-drawing"><i class="fa fa-check"></i><b>6.4</b> Векторизация районов</a></li>
<li class="chapter" data-level="6.5" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-query"><i class="fa fa-check"></i><b>6.5</b> Пространственные и атрибутивные запросы</a></li>
<li class="chapter" data-level="6.6" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-diagrams"><i class="fa fa-check"></i><b>6.6</b> Визуализация слоя при помощи картодиаграмм</a></li>
<li class="chapter" data-level="6.7" data-path="digitizing-districts.html"><a href="digitizing-districts.html#digitizing-layout"><i class="fa fa-check"></i><b>6.7</b> Создание и экспорт макета компоновки</a></li>
</ul></li>
<li class="part"><span><b>III Векторный анализ</b></span></li>
<li class="chapter" data-level="7" data-path="overlay.html"><a href="overlay.html"><i class="fa fa-check"></i><b>7</b> Анализ пространственных взаимосвязей</a>
<ul>
<li class="chapter" data-level="7.1" data-path="overlay.html"><a href="overlay.html#overlay-intro"><i class="fa fa-check"></i><b>7.1</b> Введение</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="overlay.html"><a href="overlay.html#overlay-control"><i class="fa fa-check"></i><b>7.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="7.1.2" data-path="overlay.html"><a href="overlay.html#overlay-annotation"><i class="fa fa-check"></i><b>7.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="overlay.html"><a href="overlay.html#overlay-vectors"><i class="fa fa-check"></i><b>7.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="7.3" data-path="overlay.html"><a href="overlay.html#overlay-intersect"><i class="fa fa-check"></i><b>7.3</b> Оверлей слоев методом пересечения</a></li>
<li class="chapter" data-level="7.4" data-path="overlay.html"><a href="overlay.html#overlay-merge"><i class="fa fa-check"></i><b>7.4</b> Слияние результатов пересечения с целью получения показателя пространственной связи</a></li>
<li class="chapter" data-level="7.5" data-path="overlay.html"><a href="overlay.html#overlay-sumarea-subtypes"><i class="fa fa-check"></i><b>7.5</b> Объединение подтипов почв для подсчёта суммарной площади</a></li>
<li class="chapter" data-level="7.6" data-path="overlay.html"><a href="overlay.html#overlay-fieldcalc"><i class="fa fa-check"></i><b>7.6</b> Расчёт площадей объектов</a></li>
<li class="chapter" data-level="7.7" data-path="overlay.html"><a href="overlay.html#overlay-join"><i class="fa fa-check"></i><b>7.7</b> Соединение таблиц по названию подтипа почв</a></li>
<li class="chapter" data-level="7.8" data-path="overlay.html"><a href="overlay.html#overlay-resulting"><i class="fa fa-check"></i><b>7.8</b> Вычисление результирующих значений показателя связи</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="spatrelations.html"><a href="spatrelations.html"><i class="fa fa-check"></i><b>8</b> Анализ пространственных соотношений</a>
<ul>
<li class="chapter" data-level="8.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-intro"><i class="fa fa-check"></i><b>8.1</b> Введение</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-control"><i class="fa fa-check"></i><b>8.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="8.1.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-annotation"><i class="fa fa-check"></i><b>8.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-vizual"><i class="fa fa-check"></i><b>8.2</b> Визуальный анализ векторных слоев</a></li>
<li class="chapter" data-level="8.3" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-overlay"><i class="fa fa-check"></i><b>8.3</b> Расчёт площадей и оверлей</a></li>
<li class="chapter" data-level="8.4" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-join"><i class="fa fa-check"></i><b>8.4</b> Соединение таблиц по ключевому полю</a></li>
<li class="chapter" data-level="8.5" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-other"><i class="fa fa-check"></i><b>8.5</b> Расчёт площадей, не покрытых объектаи</a></li>
<li class="chapter" data-level="8.6" data-path="spatrelations.html"><a href="spatrelations.html#spatrelations-symbology"><i class="fa fa-check"></i><b>8.6</b> Настройка символики</a></li>
</ul></li>
<li class="part"><span><b>IV Растровый анализ</b></span></li>
<li class="chapter" data-level="9" data-path="weighted-overlay.html"><a href="weighted-overlay.html"><i class="fa fa-check"></i><b>9</b> Оптимизация местоположения</a>
<ul>
<li class="chapter" data-level="9.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-intro"><i class="fa fa-check"></i><b>9.1</b> Введение</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-control"><i class="fa fa-check"></i><b>9.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="9.1.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-annotation"><i class="fa fa-check"></i><b>9.1.2</b> Аннотация</a></li>
<li class="chapter" data-level="9.1.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-warning"><i class="fa fa-check"></i><b>9.1.3</b> Прежде чем начать…</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-init"><i class="fa fa-check"></i><b>9.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="9.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-slopes"><i class="fa fa-check"></i><b>9.3</b> Расчет углов наклона</a></li>
<li class="chapter" data-level="9.4" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-distances"><i class="fa fa-check"></i><b>9.4</b> Расчет расстояний</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-roads"><i class="fa fa-check"></i><b>9.4.1</b> Расстояния до дорог</a></li>
<li class="chapter" data-level="9.4.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-streams"><i class="fa fa-check"></i><b>9.4.2</b> Водотоки</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass"><i class="fa fa-check"></i><b>9.5</b> Переклассификация наборов данных</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-distance"><i class="fa fa-check"></i><b>9.5.1</b> Переклассификация растров расстояний</a></li>
<li class="chapter" data-level="9.5.2" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-reclass-slope"><i class="fa fa-check"></i><b>9.5.2</b> Переклассификация растра крутизны</a></li>
<li class="chapter" data-level="9.5.3" data-path="weighted-overlay.html"><a href="weighted-overlay.html#преобразование-слоя-типов-землепользования-в-растровое-представление"><i class="fa fa-check"></i><b>9.5.3</b> Преобразование слоя типов землепользования в растровое представление</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-combination"><i class="fa fa-check"></i><b>9.6</b> Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</a></li>
<li class="chapter" data-level="9.7" data-path="weighted-overlay.html"><a href="weighted-overlay.html#weighted-overlay-final-decision"><i class="fa fa-check"></i><b>9.7</b> Окончательный выбор участка</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="hydrodem.html"><a href="hydrodem.html"><i class="fa fa-check"></i><b>10</b> Гидрологическое моделирование на основе ЦМР</a>
<ul>
<li class="chapter" data-level="10.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-intro"><i class="fa fa-check"></i><b>10.1</b> Введение</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-control"><i class="fa fa-check"></i><b>10.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="10.1.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-annotation"><i class="fa fa-check"></i><b>10.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-init"><i class="fa fa-check"></i><b>10.2</b> Получение и подготовка исходных данных</a></li>
<li class="chapter" data-level="10.3" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-preprocessing"><i class="fa fa-check"></i><b>10.3</b> Гидрологическая коррекция ЦМР</a></li>
<li class="chapter" data-level="10.4" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-flowacc"><i class="fa fa-check"></i><b>10.4</b> Расчёт водосборной площади</a></li>
<li class="chapter" data-level="10.5" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-network"><i class="fa fa-check"></i><b>10.5</b> Создание растра водотоков на основе модели водосборной площади</a></li>
<li class="chapter" data-level="10.6" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-basin"><i class="fa fa-check"></i><b>10.6</b> Определение границ бассейна р. Оскол</a></li>
<li class="chapter" data-level="10.7" data-path="hydrodem.html"><a href="hydrodem.html#hydrodem-mapping"><i class="fa fa-check"></i><b>10.7</b> Картографическое представление результата</a></li>
</ul></li>
<li class="part"><span><b>V Сетевой анализ</b></span></li>
<li class="chapter" data-level="11" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>11</b> Анализ транспортных сетей</a>
<ul>
<li class="chapter" data-level="11.1" data-path="networks.html"><a href="networks.html#networks-intro"><i class="fa fa-check"></i><b>11.1</b> Введение</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="networks.html"><a href="networks.html#networks-control"><i class="fa fa-check"></i><b>11.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="11.1.2" data-path="networks.html"><a href="networks.html#networks-annotation"><i class="fa fa-check"></i><b>11.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="networks.html"><a href="networks.html#networks-init"><i class="fa fa-check"></i><b>11.2</b> Добавление исходных данных</a></li>
<li class="chapter" data-level="11.3" data-path="networks.html"><a href="networks.html#networks-query"><i class="fa fa-check"></i><b>11.3</b> Выбор элементов дорожной сети</a></li>
<li class="chapter" data-level="11.4" data-path="networks.html"><a href="networks.html#networks-route"><i class="fa fa-check"></i><b>11.4</b> Построение маршрута</a></li>
<li class="chapter" data-level="11.5" data-path="networks.html"><a href="networks.html#networks-isochrones"><i class="fa fa-check"></i><b>11.5</b> Расчёт изохрон</a></li>
<li class="chapter" data-level="11.6" data-path="networks.html"><a href="networks.html#networks-matrix"><i class="fa fa-check"></i><b>11.6</b> Работа с матрицей «источник-назначение»</a></li>
</ul></li>
<li class="part"><span><b>VI Геокодирование</b></span></li>
<li class="chapter" data-level="12" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>12</b> Адресное геокодирование и ядерная оценка плотности</a>
<ul>
<li class="chapter" data-level="12.1" data-path="geocoding.html"><a href="geocoding.html#geoding-intro"><i class="fa fa-check"></i><b>12.1</b> Введение</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-control"><i class="fa fa-check"></i><b>12.1.1</b> Контрольный лист</a></li>
<li class="chapter" data-level="12.1.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-annotation"><i class="fa fa-check"></i><b>12.1.2</b> Аннотация</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-input"><i class="fa fa-check"></i><b>12.2</b> Получение исходных данных</a></li>
<li class="chapter" data-level="12.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-debug"><i class="fa fa-check"></i><b>12.3</b> Тестирование работы сервиса геокодирования</a></li>
<li class="chapter" data-level="12.4" data-path="geocoding.html"><a href="geocoding.html#geocoding-import"><i class="fa fa-check"></i><b>12.4</b> Импорт списка адресов в QGIS</a></li>
<li class="chapter" data-level="12.5" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch-install"><i class="fa fa-check"></i><b>12.5</b> Установка модуля пакетного геокодирования</a></li>
<li class="chapter" data-level="12.6" data-path="geocoding.html"><a href="geocoding.html#geocoding-batch"><i class="fa fa-check"></i><b>12.6</b> Пакетное геокодирование</a></li>
<li class="chapter" data-level="12.7" data-path="geocoding.html"><a href="geocoding.html#geocoding-mapping"><i class="fa fa-check"></i><b>12.7</b> Картографирование плотности объявлений</a></li>
</ul></li>
<li class="appendix"><span><b>Справочные сведения</b></span></li>
<li class="chapter" data-level="A" data-path="manual-catalog.html"><a href="manual-catalog.html"><i class="fa fa-check"></i><b>A</b> Форматы пространственных данных</a>
<ul>
<li class="chapter" data-level="A.1" data-path="manual-catalog.html"><a href="manual-catalog.html#manual-dataformats-shapefile"><i class="fa fa-check"></i><b>A.1</b> Шейп-файлы</a></li>
<li class="chapter" data-level="A.2" data-path="manual-catalog.html"><a href="manual-catalog.html#geopackage"><i class="fa fa-check"></i><b>A.2</b> GeoPackage</a></li>
<li class="chapter" data-level="A.3" data-path="manual-catalog.html"><a href="manual-catalog.html#базы-геоданных-esri"><i class="fa fa-check"></i><b>A.3</b> Базы геоданных ESRI</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="manual-crs.html"><a href="manual-crs.html"><i class="fa fa-check"></i><b>B</b> Форматы описания систем координат</a></li>
<li class="chapter" data-level="C" data-path="manual-plugins.html"><a href="manual-plugins.html"><i class="fa fa-check"></i><b>C</b> Установка модулей в QGIS</a>
<ul>
<li class="chapter" data-level="C.1" data-path="manual-plugins.html"><a href="manual-plugins.html#manual-plugins-install"><i class="fa fa-check"></i><b>C.1</b> Установка модулей</a></li>
<li class="chapter" data-level="C.2" data-path="manual-plugins.html"><a href="manual-plugins.html#manual-plugins-update"><i class="fa fa-check"></i><b>C.2</b> Обновление модулей</a></li>
<li class="chapter" data-level="C.3" data-path="manual-plugins.html"><a href="manual-plugins.html#manual-plugins-uninstall"><i class="fa fa-check"></i><b>C.3</b> Удаление модулей</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="mastertest.html"><a href="mastertest.html"><i class="fa fa-check"></i><b>D</b> Инструкция по регистрации в системе Мастер-тест</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Основы геоинформатики: практикум в QGIS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="raster-reference" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Упражнение 5</span> Привязка графических материалов<a href="raster-reference.html#raster-reference" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex05.zip">Архив с исходными данными</a></p>
<p><a href="https://github.com/aentin/qgis-course/raw/master/files/Ex05_%D0%BE%D1%82%D1%87%D1%91%D1%82.docx">Контрольный лист</a></p>
<p><strong>Внимание! Ваш преподаватель может предоставить вам другие исходные данные для выполнения этого упражнения.</strong> При возникновении противоречий следуйте указаниям преподавателя!</p>
<div id="raster-reference-intro" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Введение<a href="raster-reference.html#raster-reference-intro" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Цель задания</strong> — знакомство с привязкой и трансформированием растровых геоизображений.</p>
<p><strong>Необходимая теоретическая подготовка:</strong> Системы координат и проекции карт, привязка геоизображений, трансформирование геоизображений. Разграфка, номенклатура и проекция топографических карт. Методы трансформации: аффинное, проективное, полиномиальное, метод резинового листа.</p>
<p><strong>Необходимая практическая подготовка:</strong> Знание основных компонент интерфейса QGIS (менеджер источников данных, панель слоёв, фрейм карты), умение выполнять масштабирование и перемещение по карте, определять координаты курсора.</p>
<p><strong>Исходные данные:</strong> Растровые изображения листов топографических карт и тематических карт, сканированные космические снимки.</p>
<p><strong>Результат:</strong> Привязанные и трансформированные растровые изображения, пригодные для непосредственно использования в ГИС.</p>
<p><strong>Аннотация:</strong> Положение точки в пределах растрового изображения может быть определено во внутренней системе координат растра. В этой системе координаты отсчитываются от верхнего левого угла растра по направлению отсчёта строк и столбцов и измеряются, соответственно, в пикселах. Для работы в геоинформационных системах (ГИС) необходимо установить соответствие между внутренней системой координат растра и внешней (целевой) системой координат, применяемой в ГИС-проекте — иными словами, выполнить <em>привязку</em> растра. С точки зрения пользователя ГИС, привязка заключается в определении для некоторого числа точек двух пар координат: 1) пары координат во внутренней системе координат растра и 2) пары координат в целевой системе координат ГИС-проекта. Но если «внутренние» координаты могут быть легко определены, поскольку они непосредственно связаны непосредственно с растром, то целевые координаты необходимо узнавать отдельно. У некоторых видов растров — например, у топографических карт, — координатные метки с их численными значениями нанесены на само изображение (сетки координат). У других — например, у космических снимков, — эту информацию нужно определять с привлечением дополнительных источников.</p>
<p>Точки, используемые для привязки, должны равномерно покрывать всю площадь изображения (или по крайней мере ту его часть, которая будет использоваться в исследовании), а также ни в коем случае не находиться на одной линии.</p>
<p>Привязка часто сопровождается <em>трансформацией</em>. В ходе трансформации растр пересчитывается в новую систему координат таким образом, что направления отсчёта строк и столбцов становятся параллельными осям координат целевой системы.</p>
<div id="raster-reference-control" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Контрольный лист<a href="raster-reference.html#raster-reference-control" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Определить систему координат для привязки</li>
<li>Привязать растровую карту по известным координатам точек</li>
<li>Оценить точность привязки карты</li>
<li>Привязать изображение путём интерактивного определения положения точек привязки</li>
<li>Использовать базовые карты из сети Интернет для привязки</li>
</ul>
</div>
</div>
<div id="raster-reference-input" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Привязка растра по меткам координат<a href="raster-reference.html#raster-reference-input" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="raster-reference.html#raster-reference">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Скачайте архив с исходными данными и распакуйте его в свою рабочую директорию.</p></li>
<li><p>Найдите в папке <code>raw_images</code> изображение <code>o38-085.tif</code>, откройте и изучите его в любой программе просмотра изображений. Это отсканированный лист топографической карты масштаба 1:100 000 на город Кинешма и его окрестности.</p></li>
</ol>
<blockquote>
<p>Топографические карты на территорию СССР составлялись в проекции Гаусса-Крюгера. Задание проекции позволяет ввести систему плоских прямоугольных координат — соответствующая сетка наносится на лист карты. Когда вы работаете с листом карты в бумажном виде, вы можете определить координаты любой точки, проведя несложные измерения относительно линий сетки, измерить расстояния, углы и площади. Использование ГИС значительно упрощает рутинные операции, поскольку все объекты в ГИС-проекте помещены в некоторую систему координат. Но простые растровые изображения таким функционалом не обладают.
Чтобы использовать растр в геоинформационной среде, необходимо выполнить его привязку — то есть задать соотношение между внутренней системой координат растра (связанной с его строками и столбцами) и «внешней» проецированной системой координат.</p>
</blockquote>
<p>Для выполнения привязки нам нужно определить целевую систему координат, в которой следует привязать (соориентировать) исходный растр, а затем выбрать несколько пар точек, для которых известны и внутренние координаты (в системе координат растра), и целевые координаты (в целевой системе координат). Точки пересечения линий сетки прямоугольных координат хорошо подходят в этом качестве, поскольку их целевые координаты подписаны вдоль рамок карты.</p>
<div id="raster-reference-select-coordinate-system" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Определение целевой системы координат<a href="raster-reference.html#raster-reference-select-coordinate-system" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Привязка растра начинается с определения целевой системы координат. Сейчас мы работаем с топографической картой, изданной в 1990 г. в рамках системы топографического картографирования СССР. Топографические карты СССР составлялись в проекции Гаусса-Крюгера на основе датума СК-42, использующего эллипсоид Красовского, с разграфкой по 6-градусным зонам. Описание целевой системы координат должно включать все эти компоненты.</p>
<ol style="list-style-type: decimal">
<li><p>Перейдите на сайт <a href="https://spatialreference.org/">Spatialreference.org</a></p>
<div class="figure">
<img src="images/Ex05_Reference/spatialreference0.png" alt="" />
<p class="caption">Стартовая страница сайта Spatialreference.org</p>
</div></li>
<li><p>В правом верхнем углу в окне поиска введите <code>Pulkovo 1942 / Gauss-Kruger</code> и нажмите <em>Search</em>.</p>
<blockquote>
<p>Примечание 1: датум СК-42 в англоязычной литературе обозначается как Pulkovo 1942.</p>
</blockquote>
<blockquote>
<p>Примечание 1: в описаниях систем координат орфография немецкого языка традиционно не соблюдается. Поэтому для поиска систем координат проекции Гаусса-Крюгера следует вводить именно <code>Gauss-Kruger</code>, а не <code>Gauss-Krüger</code> или <code>Gauss-Krueger</code>.</p>
</blockquote></li>
<li><p>В открывшемся окне используйте кнопку <em>Next Page</em>, чтобы переходить на следующие страницы и найти системы координат, соответствующие нужной вам зоне.</p>
<div class="figure">
<img src="images/Ex05_Reference/spatialreference1.png" alt="" />
<p class="caption">Системы координат Гаусса-Крюгера на основе датума СК-42 на сайте Spatialreference.org</p>
</div>
<p>Обратите внимание на три важных момента. Первое: для вашего листа карты подходит несколько разных систем координат. Второе: название соответствующей системы координат не обязательно содержит номер зоны. Вместо номера зоны может быть указан средний меридиан зоны (<em>Central Meridian</em>, CM). Центральный меридиан для своего номера зоны вы можете определить самостоятельно. Третье: среди описаний встречаются системы координат 3-градусных зон. Они тоже иногда используются, но ваша карта составлена на основе 6-градусной разграфки.</p></li>
<li><p>Найдя нужные системы координат, откройте страницу каждой из них в новой вкладке браузера.</p></li>
</ol>
<button id="show_table_button" type="button" class="btn btn-default action-button" onclick="button_handler()">Показать подходящие описания проекций для листа карты o38-085.tif</button>
<div id="resultContainer" hidden="true">EPSG:2498, EPSG:28408, EPSG:28468</div>
<script type="text/javascript">
function button_handler() {
  document.getElementById('resultContainer').hidden = false;
}
</script>
<div class="figure">
<img src="images/Ex05_Reference/spatialreference2.png" alt="" />
<p class="caption">Пример описания системы координат на сайте Spatialreference.org</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li><p>Определите, чем отличаются эти системы координат друг от друга. При необходимости посмотрите описания систем координат в форматах Proj4 или ESRI WKT.</p></li>
<li><p>Выберите подходящую систему координат для привязки.</p>
<p>Прямоугольные координаты, подписываемые вдоль северной и южной рамок топографических карт СССР, формируются следующим образом. Берётся фактическое значение прямоугольной координаты, отсчитанное от среднего меридиана зоны, смещённого к востоку на 500 км (например, <code>348</code>). Слева к этому номеру приписывается номер зоны (например, <code>8</code>). Полученные числа (например, <code>8348</code>) обозначают координаты соответствующих линий сетки в километрах. Они подписываются целиком только в углах карты, а в остальных случаях пишется только последние две цифры числа (например, <code>48</code>). При описании таких координат в ГИС-среде может использоваться как полная форма записи, включающая номер зоны, так и сокращённая форма записи (англ. <em>truncated</em>), не включающая номер зоны. Отличия между вариантами будут заключаться в единственном параметре: смещении координаты X (<code>x_0</code> в Proj4, <code>false easting</code> в WKT). На наш взгляд, удобнее пользоваться полной формой записи.</p>
<div class="figure">
<img src="images/Ex05_Reference/mapframe.png" alt="" />
<p class="caption">Фрагмент рамки карты</p>
</div></li>
</ol>
</div>
<div id="raster-reference-topomap" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Привязка листа топографической карты<a href="raster-reference.html#raster-reference-topomap" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Запустите QGIS и сохраните проект в вашу рабочую директорию</p></li>
<li><p>В QGIS запустите инструмент для привязки растров («Слой» — «Привязка растров»)</p>
<div class="figure">
<img src="images/Ex05_Reference/RasterReference0.png" alt="" />
<p class="caption">Инструмент «Привязка растров…» в меню «Слой»</p>
</div></li>
<li><p>Добавьте файл <code>o38-085.tif</code> в окно инструмента привязки. Можно перетащить файл из проводника или воспользоваться кнопкой <img src="images/Ex05_Reference/addRasterButton.png" /> на панели инструментов</p>
<div class="figure">
<img src="images/Ex05_Reference/RasterReference1.png" alt="" />
<p class="caption">Окно привязки растра с загруженным в него изображением</p>
</div></li>
<li><p>В окне привязки по умолчанию активен инструмент добавления опорных точек <img src="images/Ex05_Reference/addPointButton.png" />. С помощью мыши увеличьте изображение северо-западного угла карты, найдите пересечение линий сетки и определите его координаты.</p></li>
<li><p>Щёлкните левой кнопкой мыши по пересечению линий сетки, координаты которого вы определили. В появившемся окне введите координаты. Обратите внимание на следующие моменты:</p></li>
</ol>
<ul>
<li><p>В проекции Гаусса-Крюгера ось X считается направленной на север, ось Y — на восток. В QGIS и большинстве других геоинформационных программ ось X направлена на восток, ось Y — на север.</p></li>
<li><p>Координаты, подписанные вдоль рамки карты, измеряются в километрах. Координаты, которые вам нужно ввести для привязки, должны быть измерены в метрах.</p></li>
</ul>
<p>Сверьтесь с изображением ниже, чтобы убедиться, что вы всё делаете правильно:</p>
<div class="figure">
<img src="images/Ex05_Reference/FirstPoint.gif" alt="" />
<p class="caption">Процесс добавления новой опорной точки</p>
</div>
<p>Чтобы включить подписи идентификаторов точек, зайдите в «Параметры» — «Настройки привязки растров»</p>
<ol start="8" style="list-style-type: decimal">
<li>Аналогичным образом добавьте ещё четыре опорных точки: три точки в других углах листа карты и одну точку в центре листа карты</li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/RasterReference2.png" alt="" />
<p class="caption">Окно привязки после расстановки пяти опорных точек</p>
</div>
<ol start="10" style="list-style-type: decimal">
<li><p>Изучите информацию, которая отображается в таблице внизу. «X источника» и «Y источника» — это координаты точек привязки на исходном растре, измеренные в пикселях растра от левого верхнего угла. «X назначения» и «Y назначения» — координаты на местности. В столбцах «dX», «dY» и «Невязка» будут отображаться несхождения в определении координат. Сейчас там отображаются нули, поскольку мы ещё не задали настройки трансформации.</p></li>
<li><p>Откройте интерфейс настроек трансформации растра, нажав на кнопку <img src="images/Ex05_Reference/parametersButton.png" />. Изучите доступные параметры.</p></li>
<li><p>Самостоятельно определите значение параметра «Тип трансформации».</p></li>
<li><p>Параметр «Метод интерполяции» установите в значение «Линейная»</p></li>
<li><p>Чтобы установить целевую систему координат, нажмите кнопку <img src="images/Ex05_Reference/crsButton.png" /></p>
<div class="figure">
<img src="images/Ex05_Reference/CoordinateSystem.png" alt="" />
<p class="caption">Окно выбора системы координат</p>
</div></li>
<li><p>Выберите нужную систему координат по её названию или EPSG-коду и закройте окно выбора проекции, нажав <strong>OK</strong></p></li>
<li><p>Теперь, когда вы задали параметры привязки, нужно указать, куда будет сохранён привязанный файл. Это задаётся настройкой «Целевой растр». Укажите, что растр нужно сохранить в папку <code>referenced_images</code> вашей рабочей директории под именем <code>o38-085_modified.tif</code>. Также нужно отметить опции «Сохранить контрольные точки», чтобы сохранить пары координат в отдельный файл, и «Открыть результат в QGIS», чтобы резульат привязки был автоматически прикреплён к открытому проекту. Остальные параметры оставьте по умолчанию.</p></li>
<li><p>Закройте окно настроек привязки. Привязка не запустится автоматически: чтобы запустить процедуру, нужно нажать кнопку <img src="images/Ex05_Reference/beginButton.png" />. Но пока не делайте этого.</p></li>
<li><p>Изучите величины ошибок, которые отображаются в таблице внизу. Величины ошибок отображаются в пикселах исходного растра. Обычно в практике привязки стараются добиться, чтобы ошибка не превышала 0,5 пиксела (с рядом оговорок). В нашем же случае исходный картографический материал отсканирован с невысоким разрешением, и такой точности достичь не получится. Для учебного упражнения достаточно добиться точности порядка 1,5-2 пиксела. Если точность привязки какой-либо из ваших точек значительно превышает это пороговое значение, удалите точку и установите её заново.</p></li>
<li><p>Когда величины ошибок станут приемлемыми, нажмите кнопку <img src="images/Ex05_Reference/beginButton.png" />. QGIS выполнит привязку и попытается добавить изображение к карте. Если при этом появится всплывающее окно выбора параметров трансформации, нажмите ОК.</p></li>
<li><p>Закройте окно привязки растров. Окно QGIS примет вид, аналогичный представленному ниже:</p>
<div class="figure">
<img src="images/Ex05_Reference/QGIS1.png" alt="" />
<p class="caption">Привязанное изображение в основном окне QGIS</p>
</div>
<blockquote>
<p>Примечание: в новых версиях QGIS в момент добавления нового растра в проект может появиться всплывающее окно с запросом выбора параметров трансформации. Оно появляется, если система координат проекта и система координат добавляемого набора данных основаны на разных геодезических датумах (и если этот запрос не отключён в настройках QGIS). Обсуждение точности преобразований датумов выходит за рамки нашего курса. Если вы студент-картограф, обратитесь к преподавателю за более подробными разъяснениями; остальным же достаточночно принять настройки, предагаемые по умолчанию (нажать OK).</p>
</blockquote>
<div class="figure">
<img src="images/Ex05_Reference/Warning.png" alt="" />
<p class="caption">Предупреждение о преобразовании датумов</p>
</div></li>
</ol>
</div>
</div>
<div id="raster-reference-basemap" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Добавление базовой карты<a href="raster-reference.html#raster-reference-basemap" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="raster-reference.html#raster-reference">В начало упражнения ⇡</a></p>
<p>Мы успешно привязали растровое изображение топографической карты, и теперь можем определять координаты, измерять расстояния и площади по карте при помощи простого ГИС-инструментария. Однако наша карта пока «висит в воздухе». Давайте сравним её с изображением какой-нибудь популярной Интернет-карты, например, Google Maps или OpenStreetMap.</p>
<p>Базовые карты из сети интернет могут быть загружены в настольный ГИС-пакет с использованием протокола WMS, WFS или аналогичных. На базовом уровне знакомства с ГИС нас не интересуют технические подробности реализации, поэтому мы воспользуемся простым инструментом загрузки — подключаемым модулем (плагином) QuickMapService. Он позволяет добавлять многие карты из сети интернет «в один клик».</p>
<ol style="list-style-type: decimal">
<li>Модуль QuickMapService не включается в базовую поставку QGIS, его нужно установить отдельно. Для этого откройте меню «Модули» — «Управление и установка модулей…». Дождитесь, пока сведения о модулях загрузятся.</li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/modules01.png" alt="" />
<p class="caption">Опция «Управление и установка модулей…» в меню «Модули»</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li><p>В открывшемся окне управления модулями начните вводить <code>QuickMap</code> в строке поиска. Модули будут отфильтрованы по названию.</p></li>
<li><p>Выберите модуль QuickMapServices в списке и нажмите кнопку «Установить» внизу окна. Дождитесь, пока модуль загрузится и установится.</p></li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/modules02.png" alt="" />
<p class="caption">Модуль QuickMapServices в окне работы с модулями</p>
</div>
<ol start="4" style="list-style-type: decimal">
<li>После установки модуля его инструменты появляются в меню «Интернет» — «QuickMapServices». По умолчанию доступно небольшое число источников, но его можно увеличить. Для этого перейдите в настройки модуля и на вкладке «Загрузить сервисы» нажмите «Получить дополнительные источники данных». Подождите, пока дополнительные источники будут добавлены к модулю, и закройте настройки</li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/AddSources.gif" alt="" />
<p class="caption">Включение дополнительных источников данных в модуле QuickMapServices</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li><p>Теперь вы можете добавить какую-нибудь базовую карту из сети Интернет, просто выбрав её в списке. Добавьте карты Google в проект.</p></li>
<li><p>Включая и отключая изображение топографической карты в панели слоёв, оцените, насколько хорошо она ложится на базовую карту Google.</p></li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/Overlay.gif" alt="" />
<p class="caption">Отображение топографической карты поверх карт Google</p>
</div>
<blockquote>
<p>Для любознательных: обратите внимание на настройки прозрачности слоёв, а также на подключаемый модуль MapSwipe Tool.</p>
</blockquote>
<ol start="7" style="list-style-type: decimal">
<li><p>Удалите из проекта карту Google и загрузите любую другую базовую карту на ваш выбор.</p></li>
<li><p>Уберите чёрные рамки вокруг привязанного изображения. Чтобы это сделать, можно воспользоваться следующим способом. Откройте настройки слоя привязанного снимка, перейдите на вкладку «Прозрачность» и введите дополнительное значение «нет данных», равное 0. QGIS будет воспринимать пиксели изображения, имеющие нулевую яркость, как «нет данных», и скроет их при визуализации.</p></li>
<li><p>Сохраните проект и сделайте снимок экрана.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №1.</strong> Привязанная топографическая карта на фоне базовой карты из Интернета</kbd>.</p>
<ol start="10" style="list-style-type: decimal">
<li>Закройте проект QGIS.</li>
</ol>
</div>
<div id="raster-reference-frommap" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Использование координат с базовой карты<a href="raster-reference.html#raster-reference-frommap" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="raster-reference.html#raster-reference">В начало упражнения ⇡</a></p>
<p>Топографические карты — удобный материал для привязки, поскольку нужные системы координат известны, а точные значения координат нанесены непосредственно на карту. Однако в большинстве случаев привязка требуется таким материалам, у которых ни система координат, ни точные их значения не известны заранее — например, архивные аэрофотоснимки и космические снимки. В таком случае придётся не вводить координаты вручную, а считывать их значения из окна карты, используя в качестве опоры какой-либо материал, уже представленный в целевой системе координат.</p>
<ol style="list-style-type: decimal">
<li><p>Создайте новый проект QGIS и сохраните его в вашу рабочую директорию.</p></li>
<li><p>добавьте к новому проекту в качестве базовой карты любое покрытие космических снимков (например, Google Satellite). Обратите внимание, как изменилась система координат проекта.</p></li>
<li><p>Переместитесь по карте на юг Российской Федерации, в окрестности города Махачкала</p></li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/RasterReference5.png" alt="" />
<p class="caption">Окрестности Махачкалы на мозаике космических снимков Google</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li><p>Откройте модуль привязки и загрузите в него изображение <code>DS1023-2087DF131_b_crop.tif</code>. Это фрагмент космического снимка, полученного в середине 1960-х со спутника системы CORONA (программа Keyhole)</p>
<blockquote>
<p>Примечание 1: подробнее о спутниках CORONA и программе Keyhole вы можете прочитать по <a href="https://www.usgs.gov/centers/eros/science/usgs-eros-archive-declassified-data-declassified-satellite-imagery-1">этой ссылке</a>.</p>
</blockquote>
<blockquote>
<p>Примечание 2: у отдельных снимков со спутников CORONA не своей «собственной» системы координат, мы привязываем снимок и одновременно трансформируем его в целевую систему координат, определяемую базовой картой привязки.</p>
</blockquote></li>
<li><p>Изображение на космическом снимке повёрнуто относительно изображения базовой карты. Чтобы облегчить опознавание опорных точек, мы можем повернуть изображение в основном окне QIGS. Для этого найдите в нижней правой части окна QGIS настройку «Угол поворота» и введите значение <code>30</code>.</p></li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/RasterReference7.png" alt="" />
<p class="caption">Повёрнутое изображение в основном окне карты в сравнении с фрагментов спутникового снимка</p>
</div>
<ol start="6" style="list-style-type: decimal">
<li>Начните расстановку контрольных точек. Установите первую точку нажатием левой кнопки мыши. Затем, когда появится окно ввода координат, не вводите координаты вручную, а нажмите кнопку «С карты». Окна привязки и ввода координат будут свёрнуты, давая возможность найти соответственную точку на карте. Найдя точку, кликните по ней левой кнопкой мыши. Координаты точки (в системе координат проекта) будут считаны с карты и подставлены в интерфейс ввода.</li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/PointsFromMap.gif" alt="" />
<p class="caption">Пример расстановки опорных точек на снимке с использованием базовой карты</p>
</div>
<ol start="7" style="list-style-type: decimal">
<li><p>Введите таким образом координаты 15-20 точек. Следите, чтобы точки были равномерно распределены по площади снимка и не выстраивались в одну линию.</p></li>
<li><p>Настройте параметры привязки. Используйте полиномиальное преобразование 2-й степени. Такое преобразование иногда используется для космических снимков с сильными искажениями геометрии. Укажите, что изображение должно быть сохранено в папку <code>referenced_images</code> вашей рабочей директории.</p></li>
<li><p>Проверьте ошибки положения точек. Поскольку исходное изображение характеризуется высокой зашумленностью и «зернитостью», в этом упражнении не нужно добиваться высокой точности привязки. Ошибка порядка 7-10 пикселов может считаться приемлемой.</p>
<div class="figure">
<img src="images/Ex05_Reference/RasterReference7a.png" alt="" />
<p class="caption">Расставленные опорные точки на базовой крарте и на снимке</p>
</div></li>
<li><p>Запустите привязку. Когда привязанное изображение добавится в проект, сравните его с базовой картой.</p></li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/RasterReference8.png" alt="" />
<p class="caption">Привязанное изображение в основном окне QGIS</p>
</div>
<ol start="11" style="list-style-type: decimal">
<li><p>Если привязанное изображение хорошо согласуется с базовой картой, закройте окно привязки. Если вы видите заметные смещения каких-либо элементов на привязанном изображении относительно базовой карты, вернитесь в окно привязки и отредактируйте опорные точки, а затем снова выполните трансформацию изображения.</p></li>
<li><p>Верните угол поворота окна карты в исходное значение (0°) и увеличьте изображение до охвата космического снимка.</p></li>
<li><p>Сделайте снимок экрана.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №2.</strong> Привязанный космический снимок на фоне базовой карты из Интернета</kbd>.</p>
<ol start="14" style="list-style-type: decimal">
<li>Закройте проект QGIS</li>
</ol>
<p>При привязке изображения к базовой карте следует соблюдать следующее правило: <em>детальность карты (снимка), используемого в качестве базы, должна быть выше («лучше»), чем детальность (разрешение) привязываемог изображения</em>. В нашем примере разрешение мозаики космических снимков Google в окрестностях Махачкалы составляет примерно 0,4–1 м, а наилучшее разрешение снимков CORONA — 6 футов, или около 1,8 м. Поэтому снимки Google можно использовать в качестве базовой карты для снимков CORONA. Другая ситация может возникнуть в районах, не затронутых хозяйственной деятельностью человека. Мозаики снимков Google для таких районов создаются на основе снимков Landsat и Sentinel, имеющих наилучшее разрешение порядка 10–20 м, что гораздо грубее, чем разрешение снимков CORONA. Выполнять привязку по такой же схеме, как в этом упражнении, будет методически некорректным решением. Следует использовать другие базовые материалы для привязки.</p>
</div>
<div id="raster-reference-accuracy" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Оценка точности привязки<a href="raster-reference.html#raster-reference-accuracy" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="raster-reference.html#raster-reference">В начало упражнения ⇡</a></p>
<p>В реальных задачах бывает необходимо не только привязать растр, но и оценить точность привязки. Для этого часть опорных точек переводятся в класс контрольных. Эти точки не участвуют в вычислении параметров преобразования, поэтому по ним можно проверять абсолютную точность привязки.</p>
<ol style="list-style-type: decimal">
<li><p>Откройте проект, в котором вы работали с топографической картой.</p></li>
<li><p>Откройте окно привязки и снова загрузите в него исходное изображение топографической карты.</p></li>
<li><p>Загрузите опорные точки, которые вы использовали ранее для привязки этого листа карты (файл с расширением <code>*.points</code> в папке <code>referenced_images</code>).</p></li>
<li><p>Настройте параметры привязки: алгоритм привязки, алгоритм трансформации, систему координат и т.д.</p></li>
<li><p>Теперь добавьте ещё четыре опорные точки между «угловыми» и «центральной».</p></li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/RasterReference3.png" alt="" />
<p class="caption">Дополнительные опорные точки</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Когда вы добавите дополнительные точки, отключите их: снимите галочки в таблице возле их названий. Отключённые опорные точки перейдут в разряд <strong>контрольных</strong>: они не будут использоваться для вычисления параметров преобразования, но разность между теоретическим и фактическим значением координат для них будет рассчитана.</li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/RasterReference4.png" alt="" />
<p class="caption">Отключение опорных точек:</p>
</div>
<ol start="6" style="list-style-type: decimal">
<li>Найдите максимальную ошибку привязки по контрольным точкам. Запишите её с точность до второго знака после запятой в отчётный файл.</li>
</ol>
<p>Обратите внимание, что величина ошибки измеряется в пикселах. Чтобы получить абсолютное значение, нам нужно умножить эту величину на размер пиксела на местности</p>
<ol start="7" style="list-style-type: decimal">
<li><p>Запустите привязку растра. Добавьте привязанный растр в проект QGIS, если это не произошло автоматически.</p></li>
<li><p>Откройте свойства добавленного растра и выясните (на вкладке «Информация»), каков размер его пикселя в целевой системе координат</p></li>
<li><p>Рассчитайте максимальное значение абсолютной ошибки привязки (в метрах) и впишите это значение в отчётный файл.</p></li>
<li><p>Сохраните контрольные точки в новый файл и закройте проект QGIS.</p></li>
</ol>
</div>
<div id="raster-reference-linear" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Интерактивная привязка растров на основе аффинного преобразования<a href="raster-reference.html#raster-reference-linear" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="raster-reference.html#raster-reference">В начало упражнения ⇡</a></p>
<!-- Обычно, говоря о привязке, мы рассматриваем исторические картографические изображения или материалы дистанционного зондирования. Современные геоинформационные продукты, как правило, поставляются в виде, непосредственно пригодном для использования в ГИС-среде. Но иногда возникает необходимость выполнять привязку современных материалов — например, схем и эскизов, вычерченных (нарисованных) поверх изображений из картографических веб-сервисов. -->
<p>В предыдущих разделах упражнения мы рассматривали привязку при помощи опорных точек. Но есть и другой способ, менее точный, но в ряде случаев более быстрый и удобный — интерактивная привязка (<em>freehand georeferencing</em>). Этот способ годится в следующих случаях: когда необходимо ввести в ГИС-проект эскизные материалы, выполненные с невысокой точностью («традиционная» привязка в этом сценарии практически неприменима), или если нужно привязать современные картографические материалы, для которых заранее известна система координат (например, схемы и планы, составленные на основе изображений из картографических веб-сервисов). В этом упражнении мы рассмотрим второй сценарий.</p>
<ol style="list-style-type: decimal">
<li><p>Изучите изображение <code>20_okrugov_27-04-2020_13-32-09.png</code>. На какой основе оно составлено?</p></li>
<li><p>Создайте новый проект QGIS и сохраните его в вашу рабочую директорию.</p></li>
<li><p>Добавьте из набора QuickMapServices ту базовую карту, на основе которой составлено изображение из п. 1</p>
<blockquote>
<p>Примечание: по техническим причинам эта базовая карта может быть недоступна через QuickMapServices. Если она не загружается, воспользуйтесь любой другой картой общегеографического содержания (например, 2GIS Map, Bing Map, Google Road и др.)</p>
</blockquote></li>
<li><p>Установите модуль <strong>Freehand raster georeferencer</strong>.</p></li>
</ol>
<div class="figure">
<img src="images/Ex05_Reference/Freehand1.png" alt="" />
<p class="caption">Панель инструментов Freehand raster georeferencer</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li><p>Увеличьте изображение в окне QGIS таким образом, чтобы охват базовой карты, отображающейся в окне QGIS, примерно соответствовал охвату схемы избирательных округов.</p>
<div class="figure">
<img src="images/Ex05_Reference/Freehand2.png" alt="" />
<p class="caption">Целевой охват перед началом интерактивной привязки</p>
</div></li>
<li><p>Нажмите кнопку «Add Raster for Interactive Georeferencing» <img src="images/Ex05_Reference/Freehand3.png" />. В открывшемся диалоговом окне с помощью кнопки «Browse…» укажите путь к файлу <code>20_okrugov_27-04-2020_13-32-09.png</code>, а затем нажмите «Add New». Полупрозрачное изображнение отобразится поверх базовой карты.</p>
<p><img src="images/Ex05_Reference/Freehand4.png" alt="Привязываемое изображение, добавленное в основное окно карты" />.</p></li>
<li><p>Изучите опции преобразования растра, доступные на панели привязки. Попробуйте двигать, масштабировать и увеличивать/уменьшать изображение. Чтобы отменить последнее действие, нажмите кнопку <strong>Undo</strong> <img src="images/Ex05_Reference/Freehand4a.png" />.</p></li>
<li><p>Верните растр в исходное положение и активируйте кнопку «Georeference raster with 2 points» <img src="images/Ex05_Reference/Freehand5.png" /> на панели инструментов интерактивной привязки. Будет активирован режим интерактивной привязки по двум точкам.</p></li>
<li><p>Опознайте на привязываемом растре и на основе какую-либо общую точку (например, характерный перекрёсток). Затем подведите курсор к этой точке на привязываемом растре, зажмите левую кнопку мыши и передвиньте курсор к той же точке на основе, как показано на изображении ниже:</p>
<p><img src="images/Ex05_Reference/Freehand6.gif" alt="Установка первой опорной точки" />.</p></li>
<li><p>Найдите ещё одну аналогичную пару точек и повторите действия, описанные в предыдущем пункте. Если всё сделано правильно, растр должен, насколько это возможно, совпасть с основой. Если этого не произошло, воспользуйтесь кнопкой Undo <img src="images/Ex05_Reference/Freehand4a.png" />, а затем попробуйте ещё раз.</p>
<p><img src="images/Ex05_Reference/Freehand7.png" alt="Установка второй опорной точки" />.</p></li>
<li><p>Чтобы сохранить результат привязки, нажмите кнопку «Export Raster with World File» <img src="images/Ex05_Reference/Freehand8.png" />. Сохраните результат привязки в папку <code>georeferenced_images</code></p></li>
<li><p>Сделайте снимок экрана.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №3.</strong> Привязанное изображение схемы избирательных округов.</kbd>.</p>
<ol start="13" style="list-style-type: decimal">
<li>Ответьте на вопросы в контрольном листе.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="map-design-population.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="digitizing-districts.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["qgis-course.pdf", "qgis-course.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
